(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(o){if(o.ep)return;o.ep=!0;const s=n(o);fetch(o.href,s)}})();const Mo=!1,Lo=(e,t)=>e===t,ut=Symbol("solid-proxy"),wr=typeof Proxy=="function",Do=Symbol("solid-track"),ft={equals:Lo};let xr=Er;const me=1,dt=2,$r={owned:null,cleanups:null,context:null,owner:null},Mt={};var N=null;let Lt=null,Uo=null,R=null,K=null,pe=null,zt=0;function ce(e,t){const n=R,r=N,o=e.length===0,s=t===void 0?r:t,i=o?$r:{owned:null,cleanups:null,context:s?s.context:null,owner:s},a=o?e:()=>e(()=>fe(()=>We(i)));N=i,R=null;try{return _e(a,!0)}finally{R=n,N=r}}function O(e,t){t=t?Object.assign({},ft,t):ft;const n={value:e,observers:null,observerSlots:null,comparator:t.equals||void 0},r=o=>(typeof o=="function"&&(o=o(n.value)),Tr(n,o));return[zr.bind(n),r]}function Fo(e,t,n){const r=Tt(e,t,!0,me);Me(r)}function D(e,t,n){const r=Tt(e,t,!1,me);Me(r)}function Ze(e,t,n){xr=Go;const r=Tt(e,t,!1,me);(!n||!n.render)&&(r.user=!0),pe?pe.push(r):Me(r)}function ge(e,t,n){n=n?Object.assign({},ft,n):ft;const r=Tt(e,t,!0,0);return r.observers=null,r.observerSlots=null,r.comparator=n.equals||void 0,Me(r),zr.bind(r)}function Bo(e){return e&&typeof e=="object"&&"then"in e}function Jo(e,t,n){let r,o,s;r=!0,o=e,s={};let i=null,a=Mt,l=!1,c="initialValue"in s,u=typeof r=="function"&&ge(r);const f=new Set,[h,d]=(s.storage||O)(s.initialValue),[p,m]=O(void 0),[y,S]=O(void 0,{equals:!1}),[C,$]=O(c?"ready":"unresolved");function x(B,M,te,w){return i===B&&(i=null,w!==void 0&&(c=!0),(B===a||M===a)&&s.onHydrated&&queueMicrotask(()=>s.onHydrated(w,{value:M})),a=Mt,z(M,te)),M}function z(B,M){_e(()=>{M===void 0&&d(()=>B),$(M!==void 0?"errored":c?"ready":"unresolved"),m(M);for(const te of f.keys())te.decrement();f.clear()},!1)}function de(){const B=qo,M=h(),te=p();if(te!==void 0&&!i)throw te;return R&&R.user,M}function Se(B=!0){if(B!==!1&&l)return;l=!1;const M=u?u():r;if(M==null||M===!1){x(i,fe(h));return}let te;const w=a!==Mt?a:fe(()=>{try{return o(M,{value:h(),refetching:B})}catch(P){te=P}});if(te!==void 0){x(i,void 0,at(te),M);return}else if(!Bo(w))return x(i,w,void 0,M),w;return i=w,"v"in w?(w.s===1?x(i,w.v,void 0,M):x(i,void 0,at(w.v),M),w):(l=!0,queueMicrotask(()=>l=!1),_e(()=>{$(c?"refreshing":"pending"),S()},!1),w.then(P=>x(w,P,void 0,M),P=>x(w,void 0,at(P),M)))}Object.defineProperties(de,{state:{get:()=>C()},error:{get:()=>p()},loading:{get(){const B=C();return B==="pending"||B==="refreshing"}},latest:{get(){if(!c)return de();const B=p();if(B&&!i)throw B;return h()}}});let et=N;return u?Fo(()=>(et=N,Se(!1))):Se(!1),[de,{refetch:B=>Sr(et,()=>Se(B)),mutate:d}]}function fe(e){if(R===null)return e();const t=R;R=null;try{return e()}finally{R=t}}function Ke(e){Ze(()=>fe(e))}function ye(e){return N===null||(N.cleanups===null?N.cleanups=[e]:N.cleanups.push(e)),e}function Vo(){return N}function Sr(e,t){const n=N,r=R;N=e,R=null;try{return _e(t,!0)}catch(o){pn(o)}finally{N=n,R=r}}const[wd,xd]=O(!1);let qo;function zr(){if(this.sources&&this.state)if(this.state===me)Me(this);else{const e=K;K=null,_e(()=>pt(this),!1),K=e}if(R){const e=this.observers?this.observers.length:0;R.sources?(R.sources.push(this),R.sourceSlots.push(e)):(R.sources=[this],R.sourceSlots=[e]),this.observers?(this.observers.push(R),this.observerSlots.push(R.sources.length-1)):(this.observers=[R],this.observerSlots=[R.sources.length-1])}return this.value}function Tr(e,t,n){let r=e.value;return(!e.comparator||!e.comparator(r,t))&&(e.value=t,e.observers&&e.observers.length&&_e(()=>{for(let o=0;o<e.observers.length;o+=1){const s=e.observers[o],i=Lt&&Lt.running;i&&Lt.disposed.has(s),(i?!s.tState:!s.state)&&(s.pure?K.push(s):pe.push(s),s.observers&&Or(s)),i||(s.state=me)}if(K.length>1e6)throw K=[],new Error},!1)),t}function Me(e){if(!e.fn)return;We(e);const t=zt;Wo(e,e.value,t)}function Wo(e,t,n){let r;const o=N,s=R;R=N=e;try{r=e.fn(t)}catch(i){return e.pure&&(e.state=me,e.owned&&e.owned.forEach(We),e.owned=null),e.updatedAt=n+1,pn(i)}finally{R=s,N=o}(!e.updatedAt||e.updatedAt<=n)&&(e.updatedAt!=null&&"observers"in e?Tr(e,r):e.value=r,e.updatedAt=n)}function Tt(e,t,n,r=me,o){const s={fn:e,state:r,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:t,owner:N,context:N?N.context:null,pure:n};return N===null||N!==$r&&(N.owned?N.owned.push(s):N.owned=[s]),s}function ht(e){if(e.state===0)return;if(e.state===dt)return pt(e);if(e.suspense&&fe(e.suspense.inFallback))return e.suspense.effects.push(e);const t=[e];for(;(e=e.owner)&&(!e.updatedAt||e.updatedAt<zt);)e.state&&t.push(e);for(let n=t.length-1;n>=0;n--)if(e=t[n],e.state===me)Me(e);else if(e.state===dt){const r=K;K=null,_e(()=>pt(e,t[0]),!1),K=r}}function _e(e,t){if(K)return e();let n=!1;t||(K=[]),pe?n=!0:pe=[],zt++;try{const r=e();return Ho(n),r}catch(r){n||(pe=null),K=null,pn(r)}}function Ho(e){if(K&&(Er(K),K=null),e)return;const t=pe;pe=null,t.length&&_e(()=>xr(t),!1)}function Er(e){for(let t=0;t<e.length;t++)ht(e[t])}function Go(e){let t,n=0;for(t=0;t<e.length;t++){const r=e[t];r.user?e[n++]=r:ht(r)}for(t=0;t<n;t++)ht(e[t])}function pt(e,t){e.state=0;for(let n=0;n<e.sources.length;n+=1){const r=e.sources[n];if(r.sources){const o=r.state;o===me?r!==t&&(!r.updatedAt||r.updatedAt<zt)&&ht(r):o===dt&&pt(r,t)}}}function Or(e){for(let t=0;t<e.observers.length;t+=1){const n=e.observers[t];n.state||(n.state=dt,n.pure?K.push(n):pe.push(n),n.observers&&Or(n))}}function We(e){let t;if(e.sources)for(;e.sources.length;){const n=e.sources.pop(),r=e.sourceSlots.pop(),o=n.observers;if(o&&o.length){const s=o.pop(),i=n.observerSlots.pop();r<o.length&&(s.sourceSlots[i]=r,o[r]=s,n.observerSlots[r]=i)}}if(e.tOwned){for(t=e.tOwned.length-1;t>=0;t--)We(e.tOwned[t]);delete e.tOwned}if(e.owned){for(t=e.owned.length-1;t>=0;t--)We(e.owned[t]);e.owned=null}if(e.cleanups){for(t=e.cleanups.length-1;t>=0;t--)e.cleanups[t]();e.cleanups=null}e.state=0}function at(e){return e instanceof Error?e:new Error(typeof e=="string"?e:"Unknown error",{cause:e})}function pn(e,t=N){throw at(e)}const Ko=Symbol("fallback");function Rn(e){for(let t=0;t<e.length;t++)e[t]()}function Yo(e,t,n={}){let r=[],o=[],s=[],i=0,a=t.length>1?[]:null;return ye(()=>Rn(s)),()=>{let l=e()||[],c=l.length,u,f;return l[Do],fe(()=>{let d,p,m,y,S,C,$,x,z;if(c===0)i!==0&&(Rn(s),s=[],r=[],o=[],i=0,a&&(a=[])),n.fallback&&(r=[Ko],o[0]=ce(de=>(s[0]=de,n.fallback())),i=1);else if(i===0){for(o=new Array(c),f=0;f<c;f++)r[f]=l[f],o[f]=ce(h);i=c}else{for(m=new Array(c),y=new Array(c),a&&(S=new Array(c)),C=0,$=Math.min(i,c);C<$&&r[C]===l[C];C++);for($=i-1,x=c-1;$>=C&&x>=C&&r[$]===l[x];$--,x--)m[x]=o[$],y[x]=s[$],a&&(S[x]=a[$]);for(d=new Map,p=new Array(x+1),f=x;f>=C;f--)z=l[f],u=d.get(z),p[f]=u===void 0?-1:u,d.set(z,f);for(u=C;u<=$;u++)z=r[u],f=d.get(z),f!==void 0&&f!==-1?(m[f]=o[u],y[f]=s[u],a&&(S[f]=a[u]),f=p[f],d.set(z,f)):s[u]();for(f=C;f<c;f++)f in m?(o[f]=m[f],s[f]=y[f],a&&(a[f]=S[f],a[f](f))):o[f]=ce(h);o=o.slice(0,i=c),r=l.slice(0)}return o});function h(d){if(s[f]=d,a){const[p,m]=O(f);return a[f]=m,t(l[f],p)}return t(l[f])}}}function v(e,t){return fe(()=>e(t||{}))}function tt(){return!0}const Ht={get(e,t,n){return t===ut?n:e.get(t)},has(e,t){return t===ut?!0:e.has(t)},set:tt,deleteProperty:tt,getOwnPropertyDescriptor(e,t){return{configurable:!0,enumerable:!0,get(){return e.get(t)},set:tt,deleteProperty:tt}},ownKeys(e){return e.keys()}};function Dt(e){return(e=typeof e=="function"?e():e)?e:{}}function Xo(){for(let e=0,t=this.length;e<t;++e){const n=this[e]();if(n!==void 0)return n}}function Ar(...e){let t=!1;for(let i=0;i<e.length;i++){const a=e[i];t=t||!!a&&ut in a,e[i]=typeof a=="function"?(t=!0,ge(a)):a}if(wr&&t)return new Proxy({get(i){for(let a=e.length-1;a>=0;a--){const l=Dt(e[a])[i];if(l!==void 0)return l}},has(i){for(let a=e.length-1;a>=0;a--)if(i in Dt(e[a]))return!0;return!1},keys(){const i=[];for(let a=0;a<e.length;a++)i.push(...Object.keys(Dt(e[a])));return[...new Set(i)]}},Ht);const n={},r=Object.create(null);for(let i=e.length-1;i>=0;i--){const a=e[i];if(!a)continue;const l=Object.getOwnPropertyNames(a);for(let c=l.length-1;c>=0;c--){const u=l[c];if(u==="__proto__"||u==="constructor")continue;const f=Object.getOwnPropertyDescriptor(a,u);if(!r[u])r[u]=f.get?{enumerable:!0,configurable:!0,get:Xo.bind(n[u]=[f.get.bind(a)])}:f.value!==void 0?f:void 0;else{const h=n[u];h&&(f.get?h.push(f.get.bind(a)):f.value!==void 0&&h.push(()=>f.value))}}}const o={},s=Object.keys(r);for(let i=s.length-1;i>=0;i--){const a=s[i],l=r[a];l&&l.get?Object.defineProperty(o,a,l):o[a]=l?l.value:void 0}return o}function Qo(e,...t){const n=t.length;if(wr&&ut in e){const o=n>1?t.flat():t[0],s=t.map(i=>new Proxy({get(a){return i.includes(a)?e[a]:void 0},has(a){return i.includes(a)&&a in e},keys(){return i.filter(a=>a in e)}},Ht));return s.push(new Proxy({get(i){return o.includes(i)?void 0:e[i]},has(i){return o.includes(i)?!1:i in e},keys(){return Object.keys(e).filter(i=>!o.includes(i))}},Ht)),s}const r=[];for(let o=0;o<=n;o++)r[o]={};for(const o of Object.getOwnPropertyNames(e)){let s=n;for(let l=0;l<t.length;l++)if(t[l].includes(o)){s=l;break}const i=Object.getOwnPropertyDescriptor(e,o);!i.get&&!i.set&&i.enumerable&&i.writable&&i.configurable?r[s][o]=i.value:Object.defineProperty(r[s],o,i)}return r}const es=e=>`Stale read from <${e}>.`;function Et(e){const t="fallback"in e&&{fallback:()=>e.fallback};return ge(Yo(()=>e.each,e.children,t||void 0))}function G(e){const t=e.keyed,n=ge(()=>e.when,void 0,void 0),r=t?n:ge(n,void 0,{equals:(o,s)=>!o==!s});return ge(()=>{const o=r();if(o){const s=e.children;return typeof s=="function"&&s.length>0?fe(()=>s(t?o:()=>{if(!fe(r))throw es("Show");return n()})):s}return e.fallback},void 0,void 0)}const ts=["allowfullscreen","async","alpha","autofocus","autoplay","checked","controls","default","disabled","formnovalidate","hidden","indeterminate","inert","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","seamless","selected","adauctionheaders","browsingtopics","credentialless","defaultchecked","defaultmuted","defaultselected","defer","disablepictureinpicture","disableremoteplayback","preservespitch","shadowrootclonable","shadowrootcustomelementregistry","shadowrootdelegatesfocus","shadowrootserializable","sharedstoragewritable"],ns=new Set(["className","value","readOnly","noValidate","formNoValidate","isMap","noModule","playsInline","adAuctionHeaders","allowFullscreen","browsingTopics","defaultChecked","defaultMuted","defaultSelected","disablePictureInPicture","disableRemotePlayback","preservesPitch","shadowRootClonable","shadowRootCustomElementRegistry","shadowRootDelegatesFocus","shadowRootSerializable","sharedStorageWritable",...ts]),rs=new Set(["innerHTML","textContent","innerText","children"]),os=Object.assign(Object.create(null),{className:"class",htmlFor:"for"}),ss=Object.assign(Object.create(null),{class:"className",novalidate:{$:"noValidate",FORM:1},formnovalidate:{$:"formNoValidate",BUTTON:1,INPUT:1},ismap:{$:"isMap",IMG:1},nomodule:{$:"noModule",SCRIPT:1},playsinline:{$:"playsInline",VIDEO:1},readonly:{$:"readOnly",INPUT:1,TEXTAREA:1},adauctionheaders:{$:"adAuctionHeaders",IFRAME:1},allowfullscreen:{$:"allowFullscreen",IFRAME:1},browsingtopics:{$:"browsingTopics",IMG:1},defaultchecked:{$:"defaultChecked",INPUT:1},defaultmuted:{$:"defaultMuted",AUDIO:1,VIDEO:1},defaultselected:{$:"defaultSelected",OPTION:1},disablepictureinpicture:{$:"disablePictureInPicture",VIDEO:1},disableremoteplayback:{$:"disableRemotePlayback",AUDIO:1,VIDEO:1},preservespitch:{$:"preservesPitch",AUDIO:1,VIDEO:1},shadowrootclonable:{$:"shadowRootClonable",TEMPLATE:1},shadowrootdelegatesfocus:{$:"shadowRootDelegatesFocus",TEMPLATE:1},shadowrootserializable:{$:"shadowRootSerializable",TEMPLATE:1},sharedstoragewritable:{$:"sharedStorageWritable",IFRAME:1,IMG:1}});function is(e,t){const n=ss[e];return typeof n=="object"?n[t]?n.$:void 0:n}const as=new Set(["beforeinput","click","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"]),Gt=e=>ge(()=>e());function ls(e,t,n){let r=n.length,o=t.length,s=r,i=0,a=0,l=t[o-1].nextSibling,c=null;for(;i<o||a<s;){if(t[i]===n[a]){i++,a++;continue}for(;t[o-1]===n[s-1];)o--,s--;if(o===i){const u=s<r?a?n[a-1].nextSibling:n[s-a]:l;for(;a<s;)e.insertBefore(n[a++],u)}else if(s===a)for(;i<o;)(!c||!c.has(t[i]))&&t[i].remove(),i++;else if(t[i]===n[s-1]&&n[a]===t[o-1]){const u=t[--o].nextSibling;e.insertBefore(n[a++],t[i++].nextSibling),e.insertBefore(n[--s],u),t[o]=n[s]}else{if(!c){c=new Map;let f=a;for(;f<s;)c.set(n[f],f++)}const u=c.get(t[i]);if(u!=null)if(a<u&&u<s){let f=i,h=1,d;for(;++f<o&&f<s&&!((d=c.get(t[f]))==null||d!==u+h);)h++;if(h>u-a){const p=t[i];for(;a<u;)e.insertBefore(n[a++],p)}else e.replaceChild(n[a++],t[i++])}else i++;else t[i++].remove()}}}const Nn="_$DX_DELEGATE";function cs(e,t,n,r={}){let o;return ce(s=>{o=s,t===document?e():b(t,e(),t.firstChild?null:void 0,n)},r.owner),()=>{o(),t.textContent=""}}function k(e,t,n,r){let o;const s=()=>{const a=document.createElement("template");return a.innerHTML=e,a.content.firstChild},i=()=>(o||(o=s())).cloneNode(!0);return i.cloneNode=i,i}function Ye(e,t=window.document){const n=t[Nn]||(t[Nn]=new Set);for(let r=0,o=e.length;r<o;r++){const s=e[r];n.has(s)||(n.add(s),t.addEventListener(s,gs))}}function gt(e,t,n){n==null?e.removeAttribute(t):e.setAttribute(t,n)}function us(e,t,n){n?e.setAttribute(t,""):e.removeAttribute(t)}function Q(e,t){t==null?e.removeAttribute("class"):e.className=t}function fs(e,t,n,r){if(r)Array.isArray(n)?(e[`$$${t}`]=n[0],e[`$$${t}Data`]=n[1]):e[`$$${t}`]=n;else if(Array.isArray(n)){const o=n[0];e.addEventListener(t,n[0]=s=>o.call(e,n[1],s))}else e.addEventListener(t,n,typeof n!="function"&&n)}function gn(e,t,n={}){const r=Object.keys(t||{}),o=Object.keys(n);let s,i;for(s=0,i=o.length;s<i;s++){const a=o[s];!a||a==="undefined"||t[a]||(jn(e,a,!1),delete n[a])}for(s=0,i=r.length;s<i;s++){const a=r[s],l=!!t[a];!a||a==="undefined"||n[a]===l||!l||(jn(e,a,!0),n[a]=l)}return n}function ds(e,t,n){if(!t)return n?gt(e,"style"):t;const r=e.style;if(typeof t=="string")return r.cssText=t;typeof n=="string"&&(r.cssText=n=void 0),n||(n={}),t||(t={});let o,s;for(s in n)t[s]==null&&r.removeProperty(s),delete n[s];for(s in t)o=t[s],o!==n[s]&&(r.setProperty(s,o),n[s]=o);return n}function le(e,t,n){n!=null?e.style.setProperty(t,n):e.style.removeProperty(t)}function Cr(e,t={},n,r){const o={};return D(()=>typeof t.ref=="function"&&Ot(t.ref,e)),D(()=>hs(e,t,n,!0,o,!0)),o}function Ot(e,t,n){return fe(()=>e(t,n))}function b(e,t,n,r){if(n!==void 0&&!r&&(r=[]),typeof t!="function")return mt(e,t,r,n);D(o=>mt(e,t(),o,n),r)}function hs(e,t,n,r,o={},s=!1){t||(t={});for(const i in o)if(!(i in t)){if(i==="children")continue;o[i]=Mn(e,i,null,o[i],n,s,t)}for(const i in t){if(i==="children")continue;const a=t[i];o[i]=Mn(e,i,a,o[i],n,s,t)}}function ps(e){return e.toLowerCase().replace(/-([a-z])/g,(t,n)=>n.toUpperCase())}function jn(e,t,n){const r=t.trim().split(/\s+/);for(let o=0,s=r.length;o<s;o++)e.classList.toggle(r[o],n)}function Mn(e,t,n,r,o,s,i){let a,l,c,u,f;if(t==="style")return ds(e,n,r);if(t==="classList")return gn(e,n,r);if(n===r)return r;if(t==="ref")s||n(e);else if(t.slice(0,3)==="on:"){const h=t.slice(3);r&&e.removeEventListener(h,r,typeof r!="function"&&r),n&&e.addEventListener(h,n,typeof n!="function"&&n)}else if(t.slice(0,10)==="oncapture:"){const h=t.slice(10);r&&e.removeEventListener(h,r,!0),n&&e.addEventListener(h,n,!0)}else if(t.slice(0,2)==="on"){const h=t.slice(2).toLowerCase(),d=as.has(h);if(!d&&r){const p=Array.isArray(r)?r[0]:r;e.removeEventListener(h,p)}(d||n)&&(fs(e,h,n,d),d&&Ye([h]))}else t.slice(0,5)==="attr:"?gt(e,t.slice(5),n):t.slice(0,5)==="bool:"?us(e,t.slice(5),n):(f=t.slice(0,5)==="prop:")||(c=rs.has(t))||(u=is(t,e.tagName))||(l=ns.has(t))||(a=e.nodeName.includes("-")||"is"in i)?(f&&(t=t.slice(5),l=!0),t==="class"||t==="className"?Q(e,n):a&&!l&&!c?e[ps(t)]=n:e[u||t]=n):gt(e,os[t]||t,n);return n}function gs(e){let t=e.target;const n=`$$${e.type}`,r=e.target,o=e.currentTarget,s=l=>Object.defineProperty(e,"target",{configurable:!0,value:l}),i=()=>{const l=t[n];if(l&&!t.disabled){const c=t[`${n}Data`];if(c!==void 0?l.call(t,c,e):l.call(t,e),e.cancelBubble)return}return t.host&&typeof t.host!="string"&&!t.host._$host&&t.contains(e.target)&&s(t.host),!0},a=()=>{for(;i()&&(t=t._$host||t.parentNode||t.host););};if(Object.defineProperty(e,"currentTarget",{configurable:!0,get(){return t||document}}),e.composedPath){const l=e.composedPath();s(l[0]);for(let c=0;c<l.length-2&&(t=l[c],!!i());c++){if(t._$host){t=t._$host,a();break}if(t.parentNode===o)break}}else a();s(r)}function mt(e,t,n,r,o){for(;typeof n=="function";)n=n();if(t===n)return n;const s=typeof t,i=r!==void 0;if(e=i&&n[0]&&n[0].parentNode||e,s==="string"||s==="number"){if(s==="number"&&(t=t.toString(),t===n))return n;if(i){let a=n[0];a&&a.nodeType===3?a.data!==t&&(a.data=t):a=document.createTextNode(t),n=Ae(e,n,r,a)}else n!==""&&typeof n=="string"?n=e.firstChild.data=t:n=e.textContent=t}else if(t==null||s==="boolean")n=Ae(e,n,r);else{if(s==="function")return D(()=>{let a=t();for(;typeof a=="function";)a=a();n=mt(e,a,n,r)}),()=>n;if(Array.isArray(t)){const a=[],l=n&&Array.isArray(n);if(Kt(a,t,n,o))return D(()=>n=mt(e,a,n,r,!0)),()=>n;if(a.length===0){if(n=Ae(e,n,r),i)return n}else l?n.length===0?Ln(e,a,r):ls(e,n,a):(n&&Ae(e),Ln(e,a));n=a}else if(t.nodeType){if(Array.isArray(n)){if(i)return n=Ae(e,n,r,t);Ae(e,n,null,t)}else n==null||n===""||!e.firstChild?e.appendChild(t):e.replaceChild(t,e.firstChild);n=t}}return n}function Kt(e,t,n,r){let o=!1;for(let s=0,i=t.length;s<i;s++){let a=t[s],l=n&&n[e.length],c;if(!(a==null||a===!0||a===!1))if((c=typeof a)=="object"&&a.nodeType)e.push(a);else if(Array.isArray(a))o=Kt(e,a,l)||o;else if(c==="function")if(r){for(;typeof a=="function";)a=a();o=Kt(e,Array.isArray(a)?a:[a],Array.isArray(l)?l:[l])||o}else e.push(a),o=!0;else{const u=String(a);l&&l.nodeType===3&&l.data===u?e.push(l):e.push(document.createTextNode(u))}}return o}function Ln(e,t,n=null){for(let r=0,o=t.length;r<o;r++)e.insertBefore(t[r],n)}function Ae(e,t,n,r){if(n===void 0)return e.textContent="";const o=r||document.createTextNode("");if(t.length){let s=!1;for(let i=t.length-1;i>=0;i--){const a=t[i];if(o!==a){const l=a.parentNode===e;!s&&!i?l?e.replaceChild(o,a):e.insertBefore(o,n):l&&a.remove()}else s=!0}}else e.insertBefore(o,n);return[o]}const ms="http://www.w3.org/2000/svg";function bs(e,t=!1,n=void 0){return t?document.createElementNS(ms,e):document.createElement(e,{is:n})}function vs(e){const{useShadow:t}=e,n=document.createTextNode(""),r=()=>e.mount||document.body,o=Vo();let s;return Ze(()=>{s||(s=Sr(o,()=>ge(()=>e.children)));const i=r();if(i instanceof HTMLHeadElement){const[a,l]=O(!1),c=()=>l(!0);ce(u=>b(i,()=>a()?u():s(),null)),ye(c)}else{const a=bs(e.isSVG?"g":"div",e.isSVG),l=t&&a.attachShadow?a.attachShadow({mode:"open"}):a;Object.defineProperty(a,"_$host",{get(){return n.parentNode},configurable:!0}),b(l,s),i.appendChild(a),e.ref&&e.ref(a),ye(()=>i.removeChild(a))}},void 0,{render:!0}),n}async function ys(e=50,t){const n=new URLSearchParams;n.set("limit",e.toString());const r=await fetch(`/api/v1/sessions?${n.toString()}`);if(!r.ok)throw new Error(`Failed to fetch sessions: ${r.statusText}`);return r.json()}async function _s(e,t){const n=await fetch(`/api/v1/sessions/${e}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:t})});if(!n.ok)throw new Error(`Failed to rename session: ${n.statusText}`)}async function ks(e){const t=await fetch(`/api/v1/sessions/${e}`,{method:"DELETE"});if(!t.ok)throw new Error(`Failed to delete session: ${t.statusText}`)}function ws(){const[e,t]=O(!1);return{isBusy:e,setIsBusy:t}}const Re=ce(ws);function xs(){const[e,t]=O([]),[n,r]=O(""),[o,s]=O(null),[i,a]=O(!1);return{messages:e,streamingContent:n,pendingAction:o,isThinking:i,addMessage:y=>{t(S=>[...S,y])},clearMessages:()=>{t([]),r(""),s(null),a(!1)},setMessagesList:y=>{t(y)},updateMessage:(y,S)=>{t(C=>C.map($=>$.id===y?{...$,...S}:$))},updateStreamingContent:y=>{r(y)},clearStreamingContent:()=>{r(""),a(!1)},setPendingActionData:y=>{s(y)},setIsThinking:a,isEmpty:()=>e().length===0&&!n()&&!o()}}const E=ce(xs);async function*$s(e,t=null){Re.setIsBusy(!0),E.setIsThinking(!0);try{const n=await fetch("/api/v1/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:e,session_id:t})});if(!n.ok){const i=await n.json();console.error("Chat failed:",i);return}if(!n.body)return;const r=n.body.getReader(),o=new TextDecoder;let s="";for(;;){const{value:i,done:a}=await r.read();if(a)break;s+=o.decode(i,{stream:!0});const l=s.split(`
`);s=l.pop()||"";for(const c of l){const u=c.trim();if(u)try{yield JSON.parse(u)}catch(f){console.error("Failed to parse chunk:",f,u)}}}if(s.trim())try{yield JSON.parse(s.trim())}catch(i){console.error("Failed to parse final chunk:",i,s)}}catch(n){console.error("Chat streaming failed:",n)}finally{Re.setIsBusy(!1),E.setIsThinking(!1)}}async function*Ss(e,t,n){Re.setIsBusy(!0),E.setIsThinking(!0);try{const r=await fetch("/api/v1/chat/respond",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({session_id:e,approval_id:t,decision:n})});if(!r.ok){const a=await r.json();console.error("Action response failed:",a);return}if(!r.body)return;const o=r.body.getReader(),s=new TextDecoder;let i="";for(;;){const{value:a,done:l}=await o.read();if(l)break;i+=s.decode(a,{stream:!0});const c=i.split(`
`);i=c.pop()||"";for(const u of c){const f=u.trim();if(f)try{yield JSON.parse(f)}catch(h){console.error("Failed to parse chunk:",h,f)}}}if(i.trim())try{yield JSON.parse(i.trim())}catch(a){console.error("Failed to parse final chunk:",a,i)}}catch(r){console.error("Action response streaming failed:",r)}finally{Re.setIsBusy(!1),E.setIsThinking(!1)}}async function zs(e){const t=await fetch(`/api/v1/chat/history?session_id=${encodeURIComponent(e)}`);if(!t.ok){const r=await t.json();return console.error("Failed to fetch chat history:",r),[]}return(await t.json()).messages||[]}class Ts{lastProcessedSessionId=null;async loadHistory(t){if(!t||t.startsWith("temp-")||this.lastProcessedSessionId===t)return null;this.lastProcessedSessionId=t;try{return(await zs(t)).map(o=>({id:o.id,sender:o.sender,content:o.content,handler:o.handler,isPersistent:!0,...o.type&&{type:o.type},...o.approval_id&&{approval_id:o.approval_id},...o.tool_name&&{tool_name:o.tool_name},...o.tool_args&&{tool_args:o.tool_args},...o.explanation&&{explanation:o.explanation},...o.action_status&&{action_status:o.action_status}}))}catch(n){return console.error("Failed to load chat history:",n),null}}reset(){this.lastProcessedSessionId=null}}const Pr=new Ts;function Es(){const[e,t]=O(null),[n,r]=O(null),o=new BroadcastChannel("mmcp_session_sync");o.onmessage=u=>{if(u.data.type==="SESSION_CHANGE"){if(u.data.isLocal)return;const f=u.data.sessionId;t(f)}};const s=(u,f=!1)=>{t(u),o.postMessage({type:"SESSION_CHANGE",sessionId:u,isLocal:f})};return{currentSessionId:e,pendingSessionTitle:n,loadSession:u=>{s(u,!0)},setSessionId:u=>{s(u,!0)},clearSession:()=>{s(null),r(null),Pr.reset()},setPendingTitle:u=>{r(u)}}}const re=ce(Es);var Yt=function(e,t){return Yt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o])},Yt(e,t)};function Te(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");Yt(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var Xt=function(){return Xt=Object.assign||function(t){for(var n,r=1,o=arguments.length;r<o;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},Xt.apply(this,arguments)};function Qt(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function en(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),o,s=[],i;try{for(;(t===void 0||t-- >0)&&!(o=r.next()).done;)s.push(o.value)}catch(a){i={error:a}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(i)throw i.error}}return s}function tn(e,t,n){if(n||arguments.length===2)for(var r=0,o=t.length,s;r<o;r++)(s||!(r in t))&&(s||(s=Array.prototype.slice.call(t,0,r)),s[r]=t[r]);return e.concat(s||Array.prototype.slice.call(t))}function ae(e){return typeof e=="function"}function Ir(e){var t=function(r){Error.call(r),r.stack=new Error().stack},n=e(t);return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var Ut=Ir(function(e){return function(n){e(this),this.message=n?n.length+` errors occurred during unsubscription:
`+n.map(function(r,o){return o+1+") "+r.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=n}});function nn(e,t){if(e){var n=e.indexOf(t);0<=n&&e.splice(n,1)}}var Xe=(function(){function e(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}return e.prototype.unsubscribe=function(){var t,n,r,o,s;if(!this.closed){this.closed=!0;var i=this._parentage;if(i)if(this._parentage=null,Array.isArray(i))try{for(var a=Qt(i),l=a.next();!l.done;l=a.next()){var c=l.value;c.remove(this)}}catch(m){t={error:m}}finally{try{l&&!l.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}else i.remove(this);var u=this.initialTeardown;if(ae(u))try{u()}catch(m){s=m instanceof Ut?m.errors:[m]}var f=this._finalizers;if(f){this._finalizers=null;try{for(var h=Qt(f),d=h.next();!d.done;d=h.next()){var p=d.value;try{Dn(p)}catch(m){s=s??[],m instanceof Ut?s=tn(tn([],en(s)),en(m.errors)):s.push(m)}}}catch(m){r={error:m}}finally{try{d&&!d.done&&(o=h.return)&&o.call(h)}finally{if(r)throw r.error}}}if(s)throw new Ut(s)}},e.prototype.add=function(t){var n;if(t&&t!==this)if(this.closed)Dn(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(t)}},e.prototype._hasParent=function(t){var n=this._parentage;return n===t||Array.isArray(n)&&n.includes(t)},e.prototype._addParent=function(t){var n=this._parentage;this._parentage=Array.isArray(n)?(n.push(t),n):n?[n,t]:t},e.prototype._removeParent=function(t){var n=this._parentage;n===t?this._parentage=null:Array.isArray(n)&&nn(n,t)},e.prototype.remove=function(t){var n=this._finalizers;n&&nn(n,t),t instanceof e&&t._removeParent(this)},e.EMPTY=(function(){var t=new e;return t.closed=!0,t})(),e})(),Zr=Xe.EMPTY;function Rr(e){return e instanceof Xe||e&&"closed"in e&&ae(e.remove)&&ae(e.add)&&ae(e.unsubscribe)}function Dn(e){ae(e)?e():e.unsubscribe()}var Os={Promise:void 0},As={setTimeout:function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];return setTimeout.apply(void 0,tn([e,t],en(n)))},clearTimeout:function(e){return clearTimeout(e)},delegate:void 0};function Cs(e){As.setTimeout(function(){throw e})}function Un(){}function lt(e){e()}var At=(function(e){Te(t,e);function t(n){var r=e.call(this)||this;return r.isStopped=!1,n?(r.destination=n,Rr(n)&&n.add(r)):r.destination=Zs,r}return t.create=function(n,r,o){return new rn(n,r,o)},t.prototype.next=function(n){this.isStopped||this._next(n)},t.prototype.error=function(n){this.isStopped||(this.isStopped=!0,this._error(n))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this),this.destination=null)},t.prototype._next=function(n){this.destination.next(n)},t.prototype._error=function(n){try{this.destination.error(n)}finally{this.unsubscribe()}},t.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},t})(Xe),Ps=(function(){function e(t){this.partialObserver=t}return e.prototype.next=function(t){var n=this.partialObserver;if(n.next)try{n.next(t)}catch(r){nt(r)}},e.prototype.error=function(t){var n=this.partialObserver;if(n.error)try{n.error(t)}catch(r){nt(r)}else nt(t)},e.prototype.complete=function(){var t=this.partialObserver;if(t.complete)try{t.complete()}catch(n){nt(n)}},e})(),rn=(function(e){Te(t,e);function t(n,r,o){var s=e.call(this)||this,i;return ae(n)||!n?i={next:n??void 0,error:r??void 0,complete:o??void 0}:i=n,s.destination=new Ps(i),s}return t})(At);function nt(e){Cs(e)}function Is(e){throw e}var Zs={closed:!0,next:Un,error:Is,complete:Un},Rs=(function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"})();function Nr(e){return e}function Ns(e){return e.length===0?Nr:e.length===1?e[0]:function(n){return e.reduce(function(r,o){return o(r)},n)}}var bt=(function(){function e(t){t&&(this._subscribe=t)}return e.prototype.lift=function(t){var n=new e;return n.source=this,n.operator=t,n},e.prototype.subscribe=function(t,n,r){var o=this,s=Ms(t)?t:new rn(t,n,r);return lt(function(){var i=o,a=i.operator,l=i.source;s.add(a?a.call(s,l):l?o._subscribe(s):o._trySubscribe(s))}),s},e.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(n){t.error(n)}},e.prototype.forEach=function(t,n){var r=this;return n=Fn(n),new n(function(o,s){var i=new rn({next:function(a){try{t(a)}catch(l){s(l),i.unsubscribe()}},error:s,complete:o});r.subscribe(i)})},e.prototype._subscribe=function(t){var n;return(n=this.source)===null||n===void 0?void 0:n.subscribe(t)},e.prototype[Rs]=function(){return this},e.prototype.pipe=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return Ns(t)(this)},e.prototype.toPromise=function(t){var n=this;return t=Fn(t),new t(function(r,o){var s;n.subscribe(function(i){return s=i},function(i){return o(i)},function(){return r(s)})})},e.create=function(t){return new e(t)},e})();function Fn(e){var t;return(t=e??Os.Promise)!==null&&t!==void 0?t:Promise}function js(e){return e&&ae(e.next)&&ae(e.error)&&ae(e.complete)}function Ms(e){return e&&e instanceof At||js(e)&&Rr(e)}var Ls=Ir(function(e){return function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}}),vt=(function(e){Te(t,e);function t(){var n=e.call(this)||this;return n.closed=!1,n.currentObservers=null,n.observers=[],n.isStopped=!1,n.hasError=!1,n.thrownError=null,n}return t.prototype.lift=function(n){var r=new on(this,this);return r.operator=n,r},t.prototype._throwIfClosed=function(){if(this.closed)throw new Ls},t.prototype.next=function(n){var r=this;lt(function(){var o,s;if(r._throwIfClosed(),!r.isStopped){r.currentObservers||(r.currentObservers=Array.from(r.observers));try{for(var i=Qt(r.currentObservers),a=i.next();!a.done;a=i.next()){var l=a.value;l.next(n)}}catch(c){o={error:c}}finally{try{a&&!a.done&&(s=i.return)&&s.call(i)}finally{if(o)throw o.error}}}})},t.prototype.error=function(n){var r=this;lt(function(){if(r._throwIfClosed(),!r.isStopped){r.hasError=r.isStopped=!0,r.thrownError=n;for(var o=r.observers;o.length;)o.shift().error(n)}})},t.prototype.complete=function(){var n=this;lt(function(){if(n._throwIfClosed(),!n.isStopped){n.isStopped=!0;for(var r=n.observers;r.length;)r.shift().complete()}})},t.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(t.prototype,"observed",{get:function(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0},enumerable:!1,configurable:!0}),t.prototype._trySubscribe=function(n){return this._throwIfClosed(),e.prototype._trySubscribe.call(this,n)},t.prototype._subscribe=function(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)},t.prototype._innerSubscribe=function(n){var r=this,o=this,s=o.hasError,i=o.isStopped,a=o.observers;return s||i?Zr:(this.currentObservers=null,a.push(n),new Xe(function(){r.currentObservers=null,nn(a,n)}))},t.prototype._checkFinalizedStatuses=function(n){var r=this,o=r.hasError,s=r.thrownError,i=r.isStopped;o?n.error(s):i&&n.complete()},t.prototype.asObservable=function(){var n=new bt;return n.source=this,n},t.create=function(n,r){return new on(n,r)},t})(bt),on=(function(e){Te(t,e);function t(n,r){var o=e.call(this)||this;return o.destination=n,o.source=r,o}return t.prototype.next=function(n){var r,o;(o=(r=this.destination)===null||r===void 0?void 0:r.next)===null||o===void 0||o.call(r,n)},t.prototype.error=function(n){var r,o;(o=(r=this.destination)===null||r===void 0?void 0:r.error)===null||o===void 0||o.call(r,n)},t.prototype.complete=function(){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.complete)===null||r===void 0||r.call(n)},t.prototype._subscribe=function(n){var r,o;return(o=(r=this.source)===null||r===void 0?void 0:r.subscribe(n))!==null&&o!==void 0?o:Zr},t})(vt),jr={now:function(){return(jr.delegate||Date).now()},delegate:void 0},Ft=(function(e){Te(t,e);function t(n,r,o){n===void 0&&(n=1/0),r===void 0&&(r=1/0),o===void 0&&(o=jr);var s=e.call(this)||this;return s._bufferSize=n,s._windowTime=r,s._timestampProvider=o,s._buffer=[],s._infiniteTimeWindow=!0,s._infiniteTimeWindow=r===1/0,s._bufferSize=Math.max(1,n),s._windowTime=Math.max(1,r),s}return t.prototype.next=function(n){var r=this,o=r.isStopped,s=r._buffer,i=r._infiniteTimeWindow,a=r._timestampProvider,l=r._windowTime;o||(s.push(n),!i&&s.push(a.now()+l)),this._trimBuffer(),e.prototype.next.call(this,n)},t.prototype._subscribe=function(n){this._throwIfClosed(),this._trimBuffer();for(var r=this._innerSubscribe(n),o=this,s=o._infiniteTimeWindow,i=o._buffer,a=i.slice(),l=0;l<a.length&&!n.closed;l+=s?1:2)n.next(a[l]);return this._checkFinalizedStatuses(n),r},t.prototype._trimBuffer=function(){var n=this,r=n._bufferSize,o=n._timestampProvider,s=n._buffer,i=n._infiniteTimeWindow,a=(i?1:2)*r;if(r<1/0&&a<s.length&&s.splice(0,s.length-a),!i){for(var l=o.now(),c=0,u=1;u<s.length&&s[u]<=l;u+=2)c=u;c&&s.splice(0,c+1)}},t})(vt),Ds={url:"",deserializer:function(e){return JSON.parse(e.data)},serializer:function(e){return JSON.stringify(e)}},Us="WebSocketSubject.error must be called with an object with an error code, and an optional reason: { code: number, reason: string }",Fs=(function(e){Te(t,e);function t(n,r){var o=e.call(this)||this;if(o._socket=null,n instanceof bt)o.destination=r,o.source=n;else{var s=o._config=Xt({},Ds);if(o._output=new vt,typeof n=="string")s.url=n;else for(var i in n)n.hasOwnProperty(i)&&(s[i]=n[i]);if(!s.WebSocketCtor&&WebSocket)s.WebSocketCtor=WebSocket;else if(!s.WebSocketCtor)throw new Error("no WebSocket constructor can be found");o.destination=new Ft}return o}return t.prototype.lift=function(n){var r=new t(this._config,this.destination);return r.operator=n,r.source=this,r},t.prototype._resetState=function(){this._socket=null,this.source||(this.destination=new Ft),this._output=new vt},t.prototype.multiplex=function(n,r,o){var s=this;return new bt(function(i){try{s.next(n())}catch(l){i.error(l)}var a=s.subscribe({next:function(l){try{o(l)&&i.next(l)}catch(c){i.error(c)}},error:function(l){return i.error(l)},complete:function(){return i.complete()}});return function(){try{s.next(r())}catch(l){i.error(l)}a.unsubscribe()}})},t.prototype._connectSocket=function(){var n=this,r=this._config,o=r.WebSocketCtor,s=r.protocol,i=r.url,a=r.binaryType,l=this._output,c=null;try{c=s?new o(i,s):new o(i),this._socket=c,a&&(this._socket.binaryType=a)}catch(f){l.error(f);return}var u=new Xe(function(){n._socket=null,c&&c.readyState===1&&c.close()});c.onopen=function(f){var h=n._socket;if(!h){c.close(),n._resetState();return}var d=n._config.openObserver;d&&d.next(f);var p=n.destination;n.destination=At.create(function(m){if(c.readyState===1)try{var y=n._config.serializer;c.send(y(m))}catch(S){n.destination.error(S)}},function(m){var y=n._config.closingObserver;y&&y.next(void 0),m&&m.code?c.close(m.code,m.reason):l.error(new TypeError(Us)),n._resetState()},function(){var m=n._config.closingObserver;m&&m.next(void 0),c.close(),n._resetState()}),p&&p instanceof Ft&&u.add(p.subscribe(n.destination))},c.onerror=function(f){n._resetState(),l.error(f)},c.onclose=function(f){c===n._socket&&n._resetState();var h=n._config.closeObserver;h&&h.next(f),f.wasClean?l.complete():l.error(f)},c.onmessage=function(f){try{var h=n._config.deserializer;l.next(h(f))}catch(d){l.error(d)}}},t.prototype._subscribe=function(n){var r=this,o=this.source;return o?o.subscribe(n):(this._socket||this._connectSocket(),this._output.subscribe(n),n.add(function(){var s=r._socket;r._output.observers.length===0&&(s&&(s.readyState===1||s.readyState===0)&&s.close(),r._resetState())}),n)},t.prototype.unsubscribe=function(){var n=this._socket;n&&(n.readyState===1||n.readyState===0)&&n.close(),this._resetState(),e.prototype.unsubscribe.call(this)},t})(on);function Bs(e){return new Fs(e)}function Js(e){return ae(e?.lift)}function mn(e){return function(t){if(Js(t))return t.lift(function(n){try{return e(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function bn(e,t,n,r,o){return new Vs(e,t,n,r,o)}var Vs=(function(e){Te(t,e);function t(n,r,o,s,i,a){var l=e.call(this,n)||this;return l.onFinalize=i,l.shouldUnsubscribe=a,l._next=r?function(c){try{r(c)}catch(u){n.error(u)}}:e.prototype._next,l._error=s?function(c){try{s(c)}catch(u){n.error(u)}finally{this.unsubscribe()}}:e.prototype._error,l._complete=o?function(){try{o()}catch(c){n.error(c)}finally{this.unsubscribe()}}:e.prototype._complete,l}return t.prototype.unsubscribe=function(){var n;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var r=this.closed;e.prototype.unsubscribe.call(this),!r&&((n=this.onFinalize)===null||n===void 0||n.call(this))}},t})(At);function qs(e,t){return mn(function(n,r){var o=0;n.subscribe(bn(r,function(s){r.next(e.call(t,s,o++))}))})}function Bt(e,t){return mn(function(n,r){var o=0;n.subscribe(bn(r,function(s){return e.call(t,s,o++)&&r.next(s)}))})}function Ws(e,t,n){var r=ae(e)||t||n?{next:e,error:t,complete:n}:e;return r?mn(function(o,s){var i;(i=r.subscribe)===null||i===void 0||i.call(r);var a=!0;o.subscribe(bn(s,function(l){var c;(c=r.next)===null||c===void 0||c.call(r,l),s.next(l)},function(){var l;a=!1,(l=r.complete)===null||l===void 0||l.call(r),s.complete()},function(l){var c;a=!1,(c=r.error)===null||c===void 0||c.call(r,l),s.error(l)},function(){var l,c;a&&((l=r.unsubscribe)===null||l===void 0||l.call(r)),(c=r.finalize)===null||c===void 0||c.call(r)}))}):Nr}function g(e,t,n){function r(a,l){if(a._zod||Object.defineProperty(a,"_zod",{value:{def:l,constr:i,traits:new Set},enumerable:!1}),a._zod.traits.has(e))return;a._zod.traits.add(e),t(a,l);const c=i.prototype,u=Object.keys(c);for(let f=0;f<u.length;f++){const h=u[f];h in a||(a[h]=c[h].bind(a))}}const o=n?.Parent??Object;class s extends o{}Object.defineProperty(s,"name",{value:e});function i(a){var l;const c=n?.Parent?new s:this;r(c,a),(l=c._zod).deferred??(l.deferred=[]);for(const u of c._zod.deferred)u();return c}return Object.defineProperty(i,"init",{value:r}),Object.defineProperty(i,Symbol.hasInstance,{value:a=>n?.Parent&&a instanceof n.Parent?!0:a?._zod?.traits?.has(e)}),Object.defineProperty(i,"name",{value:e}),i}class Ie extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}class Mr extends Error{constructor(t){super(`Encountered unidirectional transform during encode: ${t}`),this.name="ZodEncodeError"}}const Lr={};function ke(e){return Lr}function Dr(e){const t=Object.values(e).filter(r=>typeof r=="number");return Object.entries(e).filter(([r,o])=>t.indexOf(+r)===-1).map(([r,o])=>o)}function sn(e,t){return typeof t=="bigint"?t.toString():t}function vn(e){return{get value(){{const t=e();return Object.defineProperty(this,"value",{value:t}),t}}}}function yn(e){return e==null}function _n(e){const t=e.startsWith("^")?1:0,n=e.endsWith("$")?e.length-1:e.length;return e.slice(t,n)}function Hs(e,t){const n=(e.toString().split(".")[1]||"").length,r=t.toString();let o=(r.split(".")[1]||"").length;if(o===0&&/\d?e-\d?/.test(r)){const l=r.match(/\d?e-(\d?)/);l?.[1]&&(o=Number.parseInt(l[1]))}const s=n>o?n:o,i=Number.parseInt(e.toFixed(s).replace(".","")),a=Number.parseInt(t.toFixed(s).replace(".",""));return i%a/10**s}const Bn=Symbol("evaluating");function Z(e,t,n){let r;Object.defineProperty(e,t,{get(){if(r!==Bn)return r===void 0&&(r=Bn,r=n()),r},set(o){Object.defineProperty(e,t,{value:o})},configurable:!0})}function Ee(e,t,n){Object.defineProperty(e,t,{value:n,writable:!0,enumerable:!0,configurable:!0})}function xe(...e){const t={};for(const n of e){const r=Object.getOwnPropertyDescriptors(n);Object.assign(t,r)}return Object.defineProperties({},t)}function Jn(e){return JSON.stringify(e)}function Gs(e){return e.toLowerCase().trim().replace(/[^\w\s-]/g,"").replace(/[\s_-]+/g,"-").replace(/^-+|-+$/g,"")}const Ur="captureStackTrace"in Error?Error.captureStackTrace:(...e)=>{};function yt(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)}const Ks=vn(()=>{if(typeof navigator<"u"&&navigator?.userAgent?.includes("Cloudflare"))return!1;try{const e=Function;return new e(""),!0}catch{return!1}});function Ne(e){if(yt(e)===!1)return!1;const t=e.constructor;if(t===void 0||typeof t!="function")return!0;const n=t.prototype;return!(yt(n)===!1||Object.prototype.hasOwnProperty.call(n,"isPrototypeOf")===!1)}function Fr(e){return Ne(e)?{...e}:Array.isArray(e)?[...e]:e}const Ys=new Set(["string","number","symbol"]);function je(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function $e(e,t,n){const r=new e._zod.constr(t??e._zod.def);return(!t||n?.parent)&&(r._zod.parent=e),r}function _(e){const t=e;if(!t)return{};if(typeof t=="string")return{error:()=>t};if(t?.message!==void 0){if(t?.error!==void 0)throw new Error("Cannot specify both `message` and `error` params");t.error=t.message}return delete t.message,typeof t.error=="string"?{...t,error:()=>t.error}:t}function Xs(e){return Object.keys(e).filter(t=>e[t]._zod.optin==="optional"&&e[t]._zod.optout==="optional")}const Qs={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-2147483648,2147483647],uint32:[0,4294967295],float32:[-34028234663852886e22,34028234663852886e22],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]};function ei(e,t){const n=e._zod.def,r=n.checks;if(r&&r.length>0)throw new Error(".pick() cannot be used on object schemas containing refinements");const s=xe(e._zod.def,{get shape(){const i={};for(const a in t){if(!(a in n.shape))throw new Error(`Unrecognized key: "${a}"`);t[a]&&(i[a]=n.shape[a])}return Ee(this,"shape",i),i},checks:[]});return $e(e,s)}function ti(e,t){const n=e._zod.def,r=n.checks;if(r&&r.length>0)throw new Error(".omit() cannot be used on object schemas containing refinements");const s=xe(e._zod.def,{get shape(){const i={...e._zod.def.shape};for(const a in t){if(!(a in n.shape))throw new Error(`Unrecognized key: "${a}"`);t[a]&&delete i[a]}return Ee(this,"shape",i),i},checks:[]});return $e(e,s)}function ni(e,t){if(!Ne(t))throw new Error("Invalid input to extend: expected a plain object");const n=e._zod.def.checks;if(n&&n.length>0){const s=e._zod.def.shape;for(const i in t)if(Object.getOwnPropertyDescriptor(s,i)!==void 0)throw new Error("Cannot overwrite keys on object schemas containing refinements. Use `.safeExtend()` instead.")}const o=xe(e._zod.def,{get shape(){const s={...e._zod.def.shape,...t};return Ee(this,"shape",s),s}});return $e(e,o)}function ri(e,t){if(!Ne(t))throw new Error("Invalid input to safeExtend: expected a plain object");const n=xe(e._zod.def,{get shape(){const r={...e._zod.def.shape,...t};return Ee(this,"shape",r),r}});return $e(e,n)}function oi(e,t){const n=xe(e._zod.def,{get shape(){const r={...e._zod.def.shape,...t._zod.def.shape};return Ee(this,"shape",r),r},get catchall(){return t._zod.def.catchall},checks:[]});return $e(e,n)}function si(e,t,n){const o=t._zod.def.checks;if(o&&o.length>0)throw new Error(".partial() cannot be used on object schemas containing refinements");const i=xe(t._zod.def,{get shape(){const a=t._zod.def.shape,l={...a};if(n)for(const c in n){if(!(c in a))throw new Error(`Unrecognized key: "${c}"`);n[c]&&(l[c]=e?new e({type:"optional",innerType:a[c]}):a[c])}else for(const c in a)l[c]=e?new e({type:"optional",innerType:a[c]}):a[c];return Ee(this,"shape",l),l},checks:[]});return $e(t,i)}function ii(e,t,n){const r=xe(t._zod.def,{get shape(){const o=t._zod.def.shape,s={...o};if(n)for(const i in n){if(!(i in s))throw new Error(`Unrecognized key: "${i}"`);n[i]&&(s[i]=new e({type:"nonoptional",innerType:o[i]}))}else for(const i in o)s[i]=new e({type:"nonoptional",innerType:o[i]});return Ee(this,"shape",s),s}});return $e(t,r)}function Ce(e,t=0){if(e.aborted===!0)return!0;for(let n=t;n<e.issues.length;n++)if(e.issues[n]?.continue!==!0)return!0;return!1}function Pe(e,t){return t.map(n=>{var r;return(r=n).path??(r.path=[]),n.path.unshift(e),n})}function rt(e){return typeof e=="string"?e:e?.message}function we(e,t,n){const r={...e,path:e.path??[]};if(!e.message){const o=rt(e.inst?._zod.def?.error?.(e))??rt(t?.error?.(e))??rt(n.customError?.(e))??rt(n.localeError?.(e))??"Invalid input";r.message=o}return delete r.inst,delete r.continue,t?.reportInput||delete r.input,r}function kn(e){return Array.isArray(e)?"array":typeof e=="string"?"string":"unknown"}function He(...e){const[t,n,r]=e;return typeof t=="string"?{message:t,code:"custom",input:n,inst:r}:{...t}}const Br=(e,t)=>{e.name="$ZodError",Object.defineProperty(e,"_zod",{value:e._zod,enumerable:!1}),Object.defineProperty(e,"issues",{value:t,enumerable:!1}),e.message=JSON.stringify(t,sn,2),Object.defineProperty(e,"toString",{value:()=>e.message,enumerable:!1})},Jr=g("$ZodError",Br),Vr=g("$ZodError",Br,{Parent:Error});function ai(e,t=n=>n.message){const n={},r=[];for(const o of e.issues)o.path.length>0?(n[o.path[0]]=n[o.path[0]]||[],n[o.path[0]].push(t(o))):r.push(t(o));return{formErrors:r,fieldErrors:n}}function li(e,t=n=>n.message){const n={_errors:[]},r=o=>{for(const s of o.issues)if(s.code==="invalid_union"&&s.errors.length)s.errors.map(i=>r({issues:i}));else if(s.code==="invalid_key")r({issues:s.issues});else if(s.code==="invalid_element")r({issues:s.issues});else if(s.path.length===0)n._errors.push(t(s));else{let i=n,a=0;for(;a<s.path.length;){const l=s.path[a];a===s.path.length-1?(i[l]=i[l]||{_errors:[]},i[l]._errors.push(t(s))):i[l]=i[l]||{_errors:[]},i=i[l],a++}}};return r(e),n}const wn=e=>(t,n,r,o)=>{const s=r?Object.assign(r,{async:!1}):{async:!1},i=t._zod.run({value:n,issues:[]},s);if(i instanceof Promise)throw new Ie;if(i.issues.length){const a=new(o?.Err??e)(i.issues.map(l=>we(l,s,ke())));throw Ur(a,o?.callee),a}return i.value},xn=e=>async(t,n,r,o)=>{const s=r?Object.assign(r,{async:!0}):{async:!0};let i=t._zod.run({value:n,issues:[]},s);if(i instanceof Promise&&(i=await i),i.issues.length){const a=new(o?.Err??e)(i.issues.map(l=>we(l,s,ke())));throw Ur(a,o?.callee),a}return i.value},Ct=e=>(t,n,r)=>{const o=r?{...r,async:!1}:{async:!1},s=t._zod.run({value:n,issues:[]},o);if(s instanceof Promise)throw new Ie;return s.issues.length?{success:!1,error:new(e??Jr)(s.issues.map(i=>we(i,o,ke())))}:{success:!0,data:s.value}},ci=Ct(Vr),Pt=e=>async(t,n,r)=>{const o=r?Object.assign(r,{async:!0}):{async:!0};let s=t._zod.run({value:n,issues:[]},o);return s instanceof Promise&&(s=await s),s.issues.length?{success:!1,error:new e(s.issues.map(i=>we(i,o,ke())))}:{success:!0,data:s.value}},ui=Pt(Vr),fi=e=>(t,n,r)=>{const o=r?Object.assign(r,{direction:"backward"}):{direction:"backward"};return wn(e)(t,n,o)},di=e=>(t,n,r)=>wn(e)(t,n,r),hi=e=>async(t,n,r)=>{const o=r?Object.assign(r,{direction:"backward"}):{direction:"backward"};return xn(e)(t,n,o)},pi=e=>async(t,n,r)=>xn(e)(t,n,r),gi=e=>(t,n,r)=>{const o=r?Object.assign(r,{direction:"backward"}):{direction:"backward"};return Ct(e)(t,n,o)},mi=e=>(t,n,r)=>Ct(e)(t,n,r),bi=e=>async(t,n,r)=>{const o=r?Object.assign(r,{direction:"backward"}):{direction:"backward"};return Pt(e)(t,n,o)},vi=e=>async(t,n,r)=>Pt(e)(t,n,r),yi=/^[cC][^\s-]{8,}$/,_i=/^[0-9a-z]+$/,ki=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,wi=/^[0-9a-vA-V]{20}$/,xi=/^[A-Za-z0-9]{27}$/,$i=/^[a-zA-Z0-9_-]{21}$/,Si=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,zi=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,Vn=e=>e?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${e}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/,Ti=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,Ei="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";function Oi(){return new RegExp(Ei,"u")}const Ai=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,Ci=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:))$/,Pi=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,Ii=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,Zi=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,qr=/^[A-Za-z0-9_-]*$/,Ri=/^\+[1-9]\d{6,14}$/,Wr="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",Ni=new RegExp(`^${Wr}$`);function Hr(e){const t="(?:[01]\\d|2[0-3]):[0-5]\\d";return typeof e.precision=="number"?e.precision===-1?`${t}`:e.precision===0?`${t}:[0-5]\\d`:`${t}:[0-5]\\d\\.\\d{${e.precision}}`:`${t}(?::[0-5]\\d(?:\\.\\d+)?)?`}function ji(e){return new RegExp(`^${Hr(e)}$`)}function Mi(e){const t=Hr({precision:e.precision}),n=["Z"];e.local&&n.push(""),e.offset&&n.push("([+-](?:[01]\\d|2[0-3]):[0-5]\\d)");const r=`${t}(?:${n.join("|")})`;return new RegExp(`^${Wr}T(?:${r})$`)}const Li=e=>{const t=e?`[\\s\\S]{${e?.minimum??0},${e?.maximum??""}}`:"[\\s\\S]*";return new RegExp(`^${t}$`)},Di=/^-?\d+$/,Gr=/^-?\d+(?:\.\d+)?$/,Ui=/^[^A-Z]*$/,Fi=/^[^a-z]*$/,ee=g("$ZodCheck",(e,t)=>{var n;e._zod??(e._zod={}),e._zod.def=t,(n=e._zod).onattach??(n.onattach=[])}),Kr={number:"number",bigint:"bigint",object:"date"},Yr=g("$ZodCheckLessThan",(e,t)=>{ee.init(e,t);const n=Kr[typeof t.value];e._zod.onattach.push(r=>{const o=r._zod.bag,s=(t.inclusive?o.maximum:o.exclusiveMaximum)??Number.POSITIVE_INFINITY;t.value<s&&(t.inclusive?o.maximum=t.value:o.exclusiveMaximum=t.value)}),e._zod.check=r=>{(t.inclusive?r.value<=t.value:r.value<t.value)||r.issues.push({origin:n,code:"too_big",maximum:typeof t.value=="object"?t.value.getTime():t.value,input:r.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),Xr=g("$ZodCheckGreaterThan",(e,t)=>{ee.init(e,t);const n=Kr[typeof t.value];e._zod.onattach.push(r=>{const o=r._zod.bag,s=(t.inclusive?o.minimum:o.exclusiveMinimum)??Number.NEGATIVE_INFINITY;t.value>s&&(t.inclusive?o.minimum=t.value:o.exclusiveMinimum=t.value)}),e._zod.check=r=>{(t.inclusive?r.value>=t.value:r.value>t.value)||r.issues.push({origin:n,code:"too_small",minimum:typeof t.value=="object"?t.value.getTime():t.value,input:r.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),Bi=g("$ZodCheckMultipleOf",(e,t)=>{ee.init(e,t),e._zod.onattach.push(n=>{var r;(r=n._zod.bag).multipleOf??(r.multipleOf=t.value)}),e._zod.check=n=>{if(typeof n.value!=typeof t.value)throw new Error("Cannot mix number and bigint in multiple_of check.");(typeof n.value=="bigint"?n.value%t.value===BigInt(0):Hs(n.value,t.value)===0)||n.issues.push({origin:typeof n.value,code:"not_multiple_of",divisor:t.value,input:n.value,inst:e,continue:!t.abort})}}),Ji=g("$ZodCheckNumberFormat",(e,t)=>{ee.init(e,t),t.format=t.format||"float64";const n=t.format?.includes("int"),r=n?"int":"number",[o,s]=Qs[t.format];e._zod.onattach.push(i=>{const a=i._zod.bag;a.format=t.format,a.minimum=o,a.maximum=s,n&&(a.pattern=Di)}),e._zod.check=i=>{const a=i.value;if(n){if(!Number.isInteger(a)){i.issues.push({expected:r,format:t.format,code:"invalid_type",continue:!1,input:a,inst:e});return}if(!Number.isSafeInteger(a)){a>0?i.issues.push({input:a,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:r,inclusive:!0,continue:!t.abort}):i.issues.push({input:a,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:r,inclusive:!0,continue:!t.abort});return}}a<o&&i.issues.push({origin:"number",input:a,code:"too_small",minimum:o,inclusive:!0,inst:e,continue:!t.abort}),a>s&&i.issues.push({origin:"number",input:a,code:"too_big",maximum:s,inclusive:!0,inst:e,continue:!t.abort})}}),Vi=g("$ZodCheckMaxLength",(e,t)=>{var n;ee.init(e,t),(n=e._zod.def).when??(n.when=r=>{const o=r.value;return!yn(o)&&o.length!==void 0}),e._zod.onattach.push(r=>{const o=r._zod.bag.maximum??Number.POSITIVE_INFINITY;t.maximum<o&&(r._zod.bag.maximum=t.maximum)}),e._zod.check=r=>{const o=r.value;if(o.length<=t.maximum)return;const i=kn(o);r.issues.push({origin:i,code:"too_big",maximum:t.maximum,inclusive:!0,input:o,inst:e,continue:!t.abort})}}),qi=g("$ZodCheckMinLength",(e,t)=>{var n;ee.init(e,t),(n=e._zod.def).when??(n.when=r=>{const o=r.value;return!yn(o)&&o.length!==void 0}),e._zod.onattach.push(r=>{const o=r._zod.bag.minimum??Number.NEGATIVE_INFINITY;t.minimum>o&&(r._zod.bag.minimum=t.minimum)}),e._zod.check=r=>{const o=r.value;if(o.length>=t.minimum)return;const i=kn(o);r.issues.push({origin:i,code:"too_small",minimum:t.minimum,inclusive:!0,input:o,inst:e,continue:!t.abort})}}),Wi=g("$ZodCheckLengthEquals",(e,t)=>{var n;ee.init(e,t),(n=e._zod.def).when??(n.when=r=>{const o=r.value;return!yn(o)&&o.length!==void 0}),e._zod.onattach.push(r=>{const o=r._zod.bag;o.minimum=t.length,o.maximum=t.length,o.length=t.length}),e._zod.check=r=>{const o=r.value,s=o.length;if(s===t.length)return;const i=kn(o),a=s>t.length;r.issues.push({origin:i,...a?{code:"too_big",maximum:t.length}:{code:"too_small",minimum:t.length},inclusive:!0,exact:!0,input:r.value,inst:e,continue:!t.abort})}}),It=g("$ZodCheckStringFormat",(e,t)=>{var n,r;ee.init(e,t),e._zod.onattach.push(o=>{const s=o._zod.bag;s.format=t.format,t.pattern&&(s.patterns??(s.patterns=new Set),s.patterns.add(t.pattern))}),t.pattern?(n=e._zod).check??(n.check=o=>{t.pattern.lastIndex=0,!t.pattern.test(o.value)&&o.issues.push({origin:"string",code:"invalid_format",format:t.format,input:o.value,...t.pattern?{pattern:t.pattern.toString()}:{},inst:e,continue:!t.abort})}):(r=e._zod).check??(r.check=()=>{})}),Hi=g("$ZodCheckRegex",(e,t)=>{It.init(e,t),e._zod.check=n=>{t.pattern.lastIndex=0,!t.pattern.test(n.value)&&n.issues.push({origin:"string",code:"invalid_format",format:"regex",input:n.value,pattern:t.pattern.toString(),inst:e,continue:!t.abort})}}),Gi=g("$ZodCheckLowerCase",(e,t)=>{t.pattern??(t.pattern=Ui),It.init(e,t)}),Ki=g("$ZodCheckUpperCase",(e,t)=>{t.pattern??(t.pattern=Fi),It.init(e,t)}),Yi=g("$ZodCheckIncludes",(e,t)=>{ee.init(e,t);const n=je(t.includes),r=new RegExp(typeof t.position=="number"?`^.{${t.position}}${n}`:n);t.pattern=r,e._zod.onattach.push(o=>{const s=o._zod.bag;s.patterns??(s.patterns=new Set),s.patterns.add(r)}),e._zod.check=o=>{o.value.includes(t.includes,t.position)||o.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:t.includes,input:o.value,inst:e,continue:!t.abort})}}),Xi=g("$ZodCheckStartsWith",(e,t)=>{ee.init(e,t);const n=new RegExp(`^${je(t.prefix)}.*`);t.pattern??(t.pattern=n),e._zod.onattach.push(r=>{const o=r._zod.bag;o.patterns??(o.patterns=new Set),o.patterns.add(n)}),e._zod.check=r=>{r.value.startsWith(t.prefix)||r.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:t.prefix,input:r.value,inst:e,continue:!t.abort})}}),Qi=g("$ZodCheckEndsWith",(e,t)=>{ee.init(e,t);const n=new RegExp(`.*${je(t.suffix)}$`);t.pattern??(t.pattern=n),e._zod.onattach.push(r=>{const o=r._zod.bag;o.patterns??(o.patterns=new Set),o.patterns.add(n)}),e._zod.check=r=>{r.value.endsWith(t.suffix)||r.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:t.suffix,input:r.value,inst:e,continue:!t.abort})}}),ea=g("$ZodCheckOverwrite",(e,t)=>{ee.init(e,t),e._zod.check=n=>{n.value=t.tx(n.value)}});class ta{constructor(t=[]){this.content=[],this.indent=0,this&&(this.args=t)}indented(t){this.indent+=1,t(this),this.indent-=1}write(t){if(typeof t=="function"){t(this,{execution:"sync"}),t(this,{execution:"async"});return}const r=t.split(`
`).filter(i=>i),o=Math.min(...r.map(i=>i.length-i.trimStart().length)),s=r.map(i=>i.slice(o)).map(i=>" ".repeat(this.indent*2)+i);for(const i of s)this.content.push(i)}compile(){const t=Function,n=this?.args,o=[...(this?.content??[""]).map(s=>`  ${s}`)];return new t(...n,o.join(`
`))}}const na={major:4,minor:3,patch:5},U=g("$ZodType",(e,t)=>{var n;e??(e={}),e._zod.def=t,e._zod.bag=e._zod.bag||{},e._zod.version=na;const r=[...e._zod.def.checks??[]];e._zod.traits.has("$ZodCheck")&&r.unshift(e);for(const o of r)for(const s of o._zod.onattach)s(e);if(r.length===0)(n=e._zod).deferred??(n.deferred=[]),e._zod.deferred?.push(()=>{e._zod.run=e._zod.parse});else{const o=(i,a,l)=>{let c=Ce(i),u;for(const f of a){if(f._zod.def.when){if(!f._zod.def.when(i))continue}else if(c)continue;const h=i.issues.length,d=f._zod.check(i);if(d instanceof Promise&&l?.async===!1)throw new Ie;if(u||d instanceof Promise)u=(u??Promise.resolve()).then(async()=>{await d,i.issues.length!==h&&(c||(c=Ce(i,h)))});else{if(i.issues.length===h)continue;c||(c=Ce(i,h))}}return u?u.then(()=>i):i},s=(i,a,l)=>{if(Ce(i))return i.aborted=!0,i;const c=o(a,r,l);if(c instanceof Promise){if(l.async===!1)throw new Ie;return c.then(u=>e._zod.parse(u,l))}return e._zod.parse(c,l)};e._zod.run=(i,a)=>{if(a.skipChecks)return e._zod.parse(i,a);if(a.direction==="backward"){const c=e._zod.parse({value:i.value,issues:[]},{...a,skipChecks:!0});return c instanceof Promise?c.then(u=>s(u,i,a)):s(c,i,a)}const l=e._zod.parse(i,a);if(l instanceof Promise){if(a.async===!1)throw new Ie;return l.then(c=>o(c,r,a))}return o(l,r,a)}}Z(e,"~standard",()=>({validate:o=>{try{const s=ci(e,o);return s.success?{value:s.data}:{issues:s.error?.issues}}catch{return ui(e,o).then(i=>i.success?{value:i.data}:{issues:i.error?.issues})}},vendor:"zod",version:1}))}),$n=g("$ZodString",(e,t)=>{U.init(e,t),e._zod.pattern=[...e?._zod.bag?.patterns??[]].pop()??Li(e._zod.bag),e._zod.parse=(n,r)=>{if(t.coerce)try{n.value=String(n.value)}catch{}return typeof n.value=="string"||n.issues.push({expected:"string",code:"invalid_type",input:n.value,inst:e}),n}}),j=g("$ZodStringFormat",(e,t)=>{It.init(e,t),$n.init(e,t)}),ra=g("$ZodGUID",(e,t)=>{t.pattern??(t.pattern=zi),j.init(e,t)}),oa=g("$ZodUUID",(e,t)=>{if(t.version){const r={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[t.version];if(r===void 0)throw new Error(`Invalid UUID version: "${t.version}"`);t.pattern??(t.pattern=Vn(r))}else t.pattern??(t.pattern=Vn());j.init(e,t)}),sa=g("$ZodEmail",(e,t)=>{t.pattern??(t.pattern=Ti),j.init(e,t)}),ia=g("$ZodURL",(e,t)=>{j.init(e,t),e._zod.check=n=>{try{const r=n.value.trim(),o=new URL(r);t.hostname&&(t.hostname.lastIndex=0,t.hostname.test(o.hostname)||n.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:t.hostname.source,input:n.value,inst:e,continue:!t.abort})),t.protocol&&(t.protocol.lastIndex=0,t.protocol.test(o.protocol.endsWith(":")?o.protocol.slice(0,-1):o.protocol)||n.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:t.protocol.source,input:n.value,inst:e,continue:!t.abort})),t.normalize?n.value=o.href:n.value=r;return}catch{n.issues.push({code:"invalid_format",format:"url",input:n.value,inst:e,continue:!t.abort})}}}),aa=g("$ZodEmoji",(e,t)=>{t.pattern??(t.pattern=Oi()),j.init(e,t)}),la=g("$ZodNanoID",(e,t)=>{t.pattern??(t.pattern=$i),j.init(e,t)}),ca=g("$ZodCUID",(e,t)=>{t.pattern??(t.pattern=yi),j.init(e,t)}),ua=g("$ZodCUID2",(e,t)=>{t.pattern??(t.pattern=_i),j.init(e,t)}),fa=g("$ZodULID",(e,t)=>{t.pattern??(t.pattern=ki),j.init(e,t)}),da=g("$ZodXID",(e,t)=>{t.pattern??(t.pattern=wi),j.init(e,t)}),ha=g("$ZodKSUID",(e,t)=>{t.pattern??(t.pattern=xi),j.init(e,t)}),pa=g("$ZodISODateTime",(e,t)=>{t.pattern??(t.pattern=Mi(t)),j.init(e,t)}),ga=g("$ZodISODate",(e,t)=>{t.pattern??(t.pattern=Ni),j.init(e,t)}),ma=g("$ZodISOTime",(e,t)=>{t.pattern??(t.pattern=ji(t)),j.init(e,t)}),ba=g("$ZodISODuration",(e,t)=>{t.pattern??(t.pattern=Si),j.init(e,t)}),va=g("$ZodIPv4",(e,t)=>{t.pattern??(t.pattern=Ai),j.init(e,t),e._zod.bag.format="ipv4"}),ya=g("$ZodIPv6",(e,t)=>{t.pattern??(t.pattern=Ci),j.init(e,t),e._zod.bag.format="ipv6",e._zod.check=n=>{try{new URL(`http://[${n.value}]`)}catch{n.issues.push({code:"invalid_format",format:"ipv6",input:n.value,inst:e,continue:!t.abort})}}}),_a=g("$ZodCIDRv4",(e,t)=>{t.pattern??(t.pattern=Pi),j.init(e,t)}),ka=g("$ZodCIDRv6",(e,t)=>{t.pattern??(t.pattern=Ii),j.init(e,t),e._zod.check=n=>{const r=n.value.split("/");try{if(r.length!==2)throw new Error;const[o,s]=r;if(!s)throw new Error;const i=Number(s);if(`${i}`!==s)throw new Error;if(i<0||i>128)throw new Error;new URL(`http://[${o}]`)}catch{n.issues.push({code:"invalid_format",format:"cidrv6",input:n.value,inst:e,continue:!t.abort})}}});function Qr(e){if(e==="")return!0;if(e.length%4!==0)return!1;try{return atob(e),!0}catch{return!1}}const wa=g("$ZodBase64",(e,t)=>{t.pattern??(t.pattern=Zi),j.init(e,t),e._zod.bag.contentEncoding="base64",e._zod.check=n=>{Qr(n.value)||n.issues.push({code:"invalid_format",format:"base64",input:n.value,inst:e,continue:!t.abort})}});function xa(e){if(!qr.test(e))return!1;const t=e.replace(/[-_]/g,r=>r==="-"?"+":"/"),n=t.padEnd(Math.ceil(t.length/4)*4,"=");return Qr(n)}const $a=g("$ZodBase64URL",(e,t)=>{t.pattern??(t.pattern=qr),j.init(e,t),e._zod.bag.contentEncoding="base64url",e._zod.check=n=>{xa(n.value)||n.issues.push({code:"invalid_format",format:"base64url",input:n.value,inst:e,continue:!t.abort})}}),Sa=g("$ZodE164",(e,t)=>{t.pattern??(t.pattern=Ri),j.init(e,t)});function za(e,t=null){try{const n=e.split(".");if(n.length!==3)return!1;const[r]=n;if(!r)return!1;const o=JSON.parse(atob(r));return!("typ"in o&&o?.typ!=="JWT"||!o.alg||t&&(!("alg"in o)||o.alg!==t))}catch{return!1}}const Ta=g("$ZodJWT",(e,t)=>{j.init(e,t),e._zod.check=n=>{za(n.value,t.alg)||n.issues.push({code:"invalid_format",format:"jwt",input:n.value,inst:e,continue:!t.abort})}}),eo=g("$ZodNumber",(e,t)=>{U.init(e,t),e._zod.pattern=e._zod.bag.pattern??Gr,e._zod.parse=(n,r)=>{if(t.coerce)try{n.value=Number(n.value)}catch{}const o=n.value;if(typeof o=="number"&&!Number.isNaN(o)&&Number.isFinite(o))return n;const s=typeof o=="number"?Number.isNaN(o)?"NaN":Number.isFinite(o)?void 0:"Infinity":void 0;return n.issues.push({expected:"number",code:"invalid_type",input:o,inst:e,...s?{received:s}:{}}),n}}),Ea=g("$ZodNumberFormat",(e,t)=>{Ji.init(e,t),eo.init(e,t)}),Oa=g("$ZodUnknown",(e,t)=>{U.init(e,t),e._zod.parse=n=>n}),Aa=g("$ZodNever",(e,t)=>{U.init(e,t),e._zod.parse=(n,r)=>(n.issues.push({expected:"never",code:"invalid_type",input:n.value,inst:e}),n)});function qn(e,t,n){e.issues.length&&t.issues.push(...Pe(n,e.issues)),t.value[n]=e.value}const Ca=g("$ZodArray",(e,t)=>{U.init(e,t),e._zod.parse=(n,r)=>{const o=n.value;if(!Array.isArray(o))return n.issues.push({expected:"array",code:"invalid_type",input:o,inst:e}),n;n.value=Array(o.length);const s=[];for(let i=0;i<o.length;i++){const a=o[i],l=t.element._zod.run({value:a,issues:[]},r);l instanceof Promise?s.push(l.then(c=>qn(c,n,i))):qn(l,n,i)}return s.length?Promise.all(s).then(()=>n):n}});function _t(e,t,n,r,o){if(e.issues.length){if(o&&!(n in r))return;t.issues.push(...Pe(n,e.issues))}e.value===void 0?n in r&&(t.value[n]=void 0):t.value[n]=e.value}function to(e){const t=Object.keys(e.shape);for(const r of t)if(!e.shape?.[r]?._zod?.traits?.has("$ZodType"))throw new Error(`Invalid element at key "${r}": expected a Zod schema`);const n=Xs(e.shape);return{...e,keys:t,keySet:new Set(t),numKeys:t.length,optionalKeys:new Set(n)}}function no(e,t,n,r,o,s){const i=[],a=o.keySet,l=o.catchall._zod,c=l.def.type,u=l.optout==="optional";for(const f in t){if(a.has(f))continue;if(c==="never"){i.push(f);continue}const h=l.run({value:t[f],issues:[]},r);h instanceof Promise?e.push(h.then(d=>_t(d,n,f,t,u))):_t(h,n,f,t,u)}return i.length&&n.issues.push({code:"unrecognized_keys",keys:i,input:t,inst:s}),e.length?Promise.all(e).then(()=>n):n}const Pa=g("$ZodObject",(e,t)=>{if(U.init(e,t),!Object.getOwnPropertyDescriptor(t,"shape")?.get){const a=t.shape;Object.defineProperty(t,"shape",{get:()=>{const l={...a};return Object.defineProperty(t,"shape",{value:l}),l}})}const r=vn(()=>to(t));Z(e._zod,"propValues",()=>{const a=t.shape,l={};for(const c in a){const u=a[c]._zod;if(u.values){l[c]??(l[c]=new Set);for(const f of u.values)l[c].add(f)}}return l});const o=yt,s=t.catchall;let i;e._zod.parse=(a,l)=>{i??(i=r.value);const c=a.value;if(!o(c))return a.issues.push({expected:"object",code:"invalid_type",input:c,inst:e}),a;a.value={};const u=[],f=i.shape;for(const h of i.keys){const d=f[h],p=d._zod.optout==="optional",m=d._zod.run({value:c[h],issues:[]},l);m instanceof Promise?u.push(m.then(y=>_t(y,a,h,c,p))):_t(m,a,h,c,p)}return s?no(u,c,a,l,r.value,e):u.length?Promise.all(u).then(()=>a):a}}),Ia=g("$ZodObjectJIT",(e,t)=>{Pa.init(e,t);const n=e._zod.parse,r=vn(()=>to(t)),o=h=>{const d=new ta(["shape","payload","ctx"]),p=r.value,m=$=>{const x=Jn($);return`shape[${x}]._zod.run({ value: input[${x}], issues: [] }, ctx)`};d.write("const input = payload.value;");const y=Object.create(null);let S=0;for(const $ of p.keys)y[$]=`key_${S++}`;d.write("const newResult = {};");for(const $ of p.keys){const x=y[$],z=Jn($),Se=h[$]?._zod?.optout==="optional";d.write(`const ${x} = ${m($)};`),Se?d.write(`
        if (${x}.issues.length) {
          if (${z} in input) {
            payload.issues = payload.issues.concat(${x}.issues.map(iss => ({
              ...iss,
              path: iss.path ? [${z}, ...iss.path] : [${z}]
            })));
          }
        }
        
        if (${x}.value === undefined) {
          if (${z} in input) {
            newResult[${z}] = undefined;
          }
        } else {
          newResult[${z}] = ${x}.value;
        }
        
      `):d.write(`
        if (${x}.issues.length) {
          payload.issues = payload.issues.concat(${x}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${z}, ...iss.path] : [${z}]
          })));
        }
        
        if (${x}.value === undefined) {
          if (${z} in input) {
            newResult[${z}] = undefined;
          }
        } else {
          newResult[${z}] = ${x}.value;
        }
        
      `)}d.write("payload.value = newResult;"),d.write("return payload;");const C=d.compile();return($,x)=>C(h,$,x)};let s;const i=yt,a=!Lr.jitless,c=a&&Ks.value,u=t.catchall;let f;e._zod.parse=(h,d)=>{f??(f=r.value);const p=h.value;return i(p)?a&&c&&d?.async===!1&&d.jitless!==!0?(s||(s=o(t.shape)),h=s(h,d),u?no([],p,h,d,f,e):h):n(h,d):(h.issues.push({expected:"object",code:"invalid_type",input:p,inst:e}),h)}});function Wn(e,t,n,r){for(const s of e)if(s.issues.length===0)return t.value=s.value,t;const o=e.filter(s=>!Ce(s));return o.length===1?(t.value=o[0].value,o[0]):(t.issues.push({code:"invalid_union",input:t.value,inst:n,errors:e.map(s=>s.issues.map(i=>we(i,r,ke())))}),t)}const Za=g("$ZodUnion",(e,t)=>{U.init(e,t),Z(e._zod,"optin",()=>t.options.some(o=>o._zod.optin==="optional")?"optional":void 0),Z(e._zod,"optout",()=>t.options.some(o=>o._zod.optout==="optional")?"optional":void 0),Z(e._zod,"values",()=>{if(t.options.every(o=>o._zod.values))return new Set(t.options.flatMap(o=>Array.from(o._zod.values)))}),Z(e._zod,"pattern",()=>{if(t.options.every(o=>o._zod.pattern)){const o=t.options.map(s=>s._zod.pattern);return new RegExp(`^(${o.map(s=>_n(s.source)).join("|")})$`)}});const n=t.options.length===1,r=t.options[0]._zod.run;e._zod.parse=(o,s)=>{if(n)return r(o,s);let i=!1;const a=[];for(const l of t.options){const c=l._zod.run({value:o.value,issues:[]},s);if(c instanceof Promise)a.push(c),i=!0;else{if(c.issues.length===0)return c;a.push(c)}}return i?Promise.all(a).then(l=>Wn(l,o,e,s)):Wn(a,o,e,s)}}),Ra=g("$ZodIntersection",(e,t)=>{U.init(e,t),e._zod.parse=(n,r)=>{const o=n.value,s=t.left._zod.run({value:o,issues:[]},r),i=t.right._zod.run({value:o,issues:[]},r);return s instanceof Promise||i instanceof Promise?Promise.all([s,i]).then(([l,c])=>Hn(n,l,c)):Hn(n,s,i)}});function an(e,t){if(e===t)return{valid:!0,data:e};if(e instanceof Date&&t instanceof Date&&+e==+t)return{valid:!0,data:e};if(Ne(e)&&Ne(t)){const n=Object.keys(t),r=Object.keys(e).filter(s=>n.indexOf(s)!==-1),o={...e,...t};for(const s of r){const i=an(e[s],t[s]);if(!i.valid)return{valid:!1,mergeErrorPath:[s,...i.mergeErrorPath]};o[s]=i.data}return{valid:!0,data:o}}if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return{valid:!1,mergeErrorPath:[]};const n=[];for(let r=0;r<e.length;r++){const o=e[r],s=t[r],i=an(o,s);if(!i.valid)return{valid:!1,mergeErrorPath:[r,...i.mergeErrorPath]};n.push(i.data)}return{valid:!0,data:n}}return{valid:!1,mergeErrorPath:[]}}function Hn(e,t,n){const r=new Map;let o;for(const a of t.issues)if(a.code==="unrecognized_keys"){o??(o=a);for(const l of a.keys)r.has(l)||r.set(l,{}),r.get(l).l=!0}else e.issues.push(a);for(const a of n.issues)if(a.code==="unrecognized_keys")for(const l of a.keys)r.has(l)||r.set(l,{}),r.get(l).r=!0;else e.issues.push(a);const s=[...r].filter(([,a])=>a.l&&a.r).map(([a])=>a);if(s.length&&o&&e.issues.push({...o,keys:s}),Ce(e))return e;const i=an(t.value,n.value);if(!i.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(i.mergeErrorPath)}`);return e.value=i.data,e}const Na=g("$ZodRecord",(e,t)=>{U.init(e,t),e._zod.parse=(n,r)=>{const o=n.value;if(!Ne(o))return n.issues.push({expected:"record",code:"invalid_type",input:o,inst:e}),n;const s=[],i=t.keyType._zod.values;if(i){n.value={};const a=new Set;for(const c of i)if(typeof c=="string"||typeof c=="number"||typeof c=="symbol"){a.add(typeof c=="number"?c.toString():c);const u=t.valueType._zod.run({value:o[c],issues:[]},r);u instanceof Promise?s.push(u.then(f=>{f.issues.length&&n.issues.push(...Pe(c,f.issues)),n.value[c]=f.value})):(u.issues.length&&n.issues.push(...Pe(c,u.issues)),n.value[c]=u.value)}let l;for(const c in o)a.has(c)||(l=l??[],l.push(c));l&&l.length>0&&n.issues.push({code:"unrecognized_keys",input:o,inst:e,keys:l})}else{n.value={};for(const a of Reflect.ownKeys(o)){if(a==="__proto__")continue;let l=t.keyType._zod.run({value:a,issues:[]},r);if(l instanceof Promise)throw new Error("Async schemas not supported in object keys currently");if(typeof a=="string"&&Gr.test(a)&&l.issues.length&&l.issues.some(f=>f.code==="invalid_type"&&f.expected==="number")){const f=t.keyType._zod.run({value:Number(a),issues:[]},r);if(f instanceof Promise)throw new Error("Async schemas not supported in object keys currently");f.issues.length===0&&(l=f)}if(l.issues.length){t.mode==="loose"?n.value[a]=o[a]:n.issues.push({code:"invalid_key",origin:"record",issues:l.issues.map(f=>we(f,r,ke())),input:a,path:[a],inst:e});continue}const u=t.valueType._zod.run({value:o[a],issues:[]},r);u instanceof Promise?s.push(u.then(f=>{f.issues.length&&n.issues.push(...Pe(a,f.issues)),n.value[l.value]=f.value})):(u.issues.length&&n.issues.push(...Pe(a,u.issues)),n.value[l.value]=u.value)}}return s.length?Promise.all(s).then(()=>n):n}}),ja=g("$ZodEnum",(e,t)=>{U.init(e,t);const n=Dr(t.entries),r=new Set(n);e._zod.values=r,e._zod.pattern=new RegExp(`^(${n.filter(o=>Ys.has(typeof o)).map(o=>typeof o=="string"?je(o):o.toString()).join("|")})$`),e._zod.parse=(o,s)=>{const i=o.value;return r.has(i)||o.issues.push({code:"invalid_value",values:n,input:i,inst:e}),o}}),Ma=g("$ZodLiteral",(e,t)=>{if(U.init(e,t),t.values.length===0)throw new Error("Cannot create literal schema with no valid values");const n=new Set(t.values);e._zod.values=n,e._zod.pattern=new RegExp(`^(${t.values.map(r=>typeof r=="string"?je(r):r?je(r.toString()):String(r)).join("|")})$`),e._zod.parse=(r,o)=>{const s=r.value;return n.has(s)||r.issues.push({code:"invalid_value",values:t.values,input:s,inst:e}),r}}),La=g("$ZodTransform",(e,t)=>{U.init(e,t),e._zod.parse=(n,r)=>{if(r.direction==="backward")throw new Mr(e.constructor.name);const o=t.transform(n.value,n);if(r.async)return(o instanceof Promise?o:Promise.resolve(o)).then(i=>(n.value=i,n));if(o instanceof Promise)throw new Ie;return n.value=o,n}});function Gn(e,t){return e.issues.length&&t===void 0?{issues:[],value:void 0}:e}const ro=g("$ZodOptional",(e,t)=>{U.init(e,t),e._zod.optin="optional",e._zod.optout="optional",Z(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,void 0]):void 0),Z(e._zod,"pattern",()=>{const n=t.innerType._zod.pattern;return n?new RegExp(`^(${_n(n.source)})?$`):void 0}),e._zod.parse=(n,r)=>{if(t.innerType._zod.optin==="optional"){const o=t.innerType._zod.run(n,r);return o instanceof Promise?o.then(s=>Gn(s,n.value)):Gn(o,n.value)}return n.value===void 0?n:t.innerType._zod.run(n,r)}}),Da=g("$ZodExactOptional",(e,t)=>{ro.init(e,t),Z(e._zod,"values",()=>t.innerType._zod.values),Z(e._zod,"pattern",()=>t.innerType._zod.pattern),e._zod.parse=(n,r)=>t.innerType._zod.run(n,r)}),Ua=g("$ZodNullable",(e,t)=>{U.init(e,t),Z(e._zod,"optin",()=>t.innerType._zod.optin),Z(e._zod,"optout",()=>t.innerType._zod.optout),Z(e._zod,"pattern",()=>{const n=t.innerType._zod.pattern;return n?new RegExp(`^(${_n(n.source)}|null)$`):void 0}),Z(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,null]):void 0),e._zod.parse=(n,r)=>n.value===null?n:t.innerType._zod.run(n,r)}),Fa=g("$ZodDefault",(e,t)=>{U.init(e,t),e._zod.optin="optional",Z(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(n,r)=>{if(r.direction==="backward")return t.innerType._zod.run(n,r);if(n.value===void 0)return n.value=t.defaultValue,n;const o=t.innerType._zod.run(n,r);return o instanceof Promise?o.then(s=>Kn(s,t)):Kn(o,t)}});function Kn(e,t){return e.value===void 0&&(e.value=t.defaultValue),e}const Ba=g("$ZodPrefault",(e,t)=>{U.init(e,t),e._zod.optin="optional",Z(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(n,r)=>(r.direction==="backward"||n.value===void 0&&(n.value=t.defaultValue),t.innerType._zod.run(n,r))}),Ja=g("$ZodNonOptional",(e,t)=>{U.init(e,t),Z(e._zod,"values",()=>{const n=t.innerType._zod.values;return n?new Set([...n].filter(r=>r!==void 0)):void 0}),e._zod.parse=(n,r)=>{const o=t.innerType._zod.run(n,r);return o instanceof Promise?o.then(s=>Yn(s,e)):Yn(o,e)}});function Yn(e,t){return!e.issues.length&&e.value===void 0&&e.issues.push({code:"invalid_type",expected:"nonoptional",input:e.value,inst:t}),e}const Va=g("$ZodCatch",(e,t)=>{U.init(e,t),Z(e._zod,"optin",()=>t.innerType._zod.optin),Z(e._zod,"optout",()=>t.innerType._zod.optout),Z(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(n,r)=>{if(r.direction==="backward")return t.innerType._zod.run(n,r);const o=t.innerType._zod.run(n,r);return o instanceof Promise?o.then(s=>(n.value=s.value,s.issues.length&&(n.value=t.catchValue({...n,error:{issues:s.issues.map(i=>we(i,r,ke()))},input:n.value}),n.issues=[]),n)):(n.value=o.value,o.issues.length&&(n.value=t.catchValue({...n,error:{issues:o.issues.map(s=>we(s,r,ke()))},input:n.value}),n.issues=[]),n)}}),qa=g("$ZodPipe",(e,t)=>{U.init(e,t),Z(e._zod,"values",()=>t.in._zod.values),Z(e._zod,"optin",()=>t.in._zod.optin),Z(e._zod,"optout",()=>t.out._zod.optout),Z(e._zod,"propValues",()=>t.in._zod.propValues),e._zod.parse=(n,r)=>{if(r.direction==="backward"){const s=t.out._zod.run(n,r);return s instanceof Promise?s.then(i=>ot(i,t.in,r)):ot(s,t.in,r)}const o=t.in._zod.run(n,r);return o instanceof Promise?o.then(s=>ot(s,t.out,r)):ot(o,t.out,r)}});function ot(e,t,n){return e.issues.length?(e.aborted=!0,e):t._zod.run({value:e.value,issues:e.issues},n)}const Wa=g("$ZodReadonly",(e,t)=>{U.init(e,t),Z(e._zod,"propValues",()=>t.innerType._zod.propValues),Z(e._zod,"values",()=>t.innerType._zod.values),Z(e._zod,"optin",()=>t.innerType?._zod?.optin),Z(e._zod,"optout",()=>t.innerType?._zod?.optout),e._zod.parse=(n,r)=>{if(r.direction==="backward")return t.innerType._zod.run(n,r);const o=t.innerType._zod.run(n,r);return o instanceof Promise?o.then(Xn):Xn(o)}});function Xn(e){return e.value=Object.freeze(e.value),e}const Ha=g("$ZodCustom",(e,t)=>{ee.init(e,t),U.init(e,t),e._zod.parse=(n,r)=>n,e._zod.check=n=>{const r=n.value,o=t.fn(r);if(o instanceof Promise)return o.then(s=>Qn(s,n,r,e));Qn(o,n,r,e)}});function Qn(e,t,n,r){if(!e){const o={code:"custom",input:n,inst:r,path:[...r._zod.def.path??[]],continue:!r._zod.def.abort};r._zod.def.params&&(o.params=r._zod.def.params),t.issues.push(He(o))}}var er;class Ga{constructor(){this._map=new WeakMap,this._idmap=new Map}add(t,...n){const r=n[0];return this._map.set(t,r),r&&typeof r=="object"&&"id"in r&&this._idmap.set(r.id,t),this}clear(){return this._map=new WeakMap,this._idmap=new Map,this}remove(t){const n=this._map.get(t);return n&&typeof n=="object"&&"id"in n&&this._idmap.delete(n.id),this._map.delete(t),this}get(t){const n=t._zod.parent;if(n){const r={...this.get(n)??{}};delete r.id;const o={...r,...this._map.get(t)};return Object.keys(o).length?o:void 0}return this._map.get(t)}has(t){return this._map.has(t)}}function Ka(){return new Ga}(er=globalThis).__zod_globalRegistry??(er.__zod_globalRegistry=Ka());const Je=globalThis.__zod_globalRegistry;function Ya(e,t){return new e({type:"string",..._(t)})}function Xa(e,t){return new e({type:"string",format:"email",check:"string_format",abort:!1,..._(t)})}function tr(e,t){return new e({type:"string",format:"guid",check:"string_format",abort:!1,..._(t)})}function Qa(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,..._(t)})}function el(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",..._(t)})}function tl(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",..._(t)})}function nl(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",..._(t)})}function rl(e,t){return new e({type:"string",format:"url",check:"string_format",abort:!1,..._(t)})}function ol(e,t){return new e({type:"string",format:"emoji",check:"string_format",abort:!1,..._(t)})}function sl(e,t){return new e({type:"string",format:"nanoid",check:"string_format",abort:!1,..._(t)})}function il(e,t){return new e({type:"string",format:"cuid",check:"string_format",abort:!1,..._(t)})}function al(e,t){return new e({type:"string",format:"cuid2",check:"string_format",abort:!1,..._(t)})}function ll(e,t){return new e({type:"string",format:"ulid",check:"string_format",abort:!1,..._(t)})}function cl(e,t){return new e({type:"string",format:"xid",check:"string_format",abort:!1,..._(t)})}function ul(e,t){return new e({type:"string",format:"ksuid",check:"string_format",abort:!1,..._(t)})}function fl(e,t){return new e({type:"string",format:"ipv4",check:"string_format",abort:!1,..._(t)})}function dl(e,t){return new e({type:"string",format:"ipv6",check:"string_format",abort:!1,..._(t)})}function hl(e,t){return new e({type:"string",format:"cidrv4",check:"string_format",abort:!1,..._(t)})}function pl(e,t){return new e({type:"string",format:"cidrv6",check:"string_format",abort:!1,..._(t)})}function gl(e,t){return new e({type:"string",format:"base64",check:"string_format",abort:!1,..._(t)})}function ml(e,t){return new e({type:"string",format:"base64url",check:"string_format",abort:!1,..._(t)})}function bl(e,t){return new e({type:"string",format:"e164",check:"string_format",abort:!1,..._(t)})}function vl(e,t){return new e({type:"string",format:"jwt",check:"string_format",abort:!1,..._(t)})}function yl(e,t){return new e({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,..._(t)})}function _l(e,t){return new e({type:"string",format:"date",check:"string_format",..._(t)})}function kl(e,t){return new e({type:"string",format:"time",check:"string_format",precision:null,..._(t)})}function wl(e,t){return new e({type:"string",format:"duration",check:"string_format",..._(t)})}function xl(e,t){return new e({type:"number",checks:[],..._(t)})}function $l(e,t){return new e({type:"number",check:"number_format",abort:!1,format:"safeint",..._(t)})}function Sl(e){return new e({type:"unknown"})}function zl(e,t){return new e({type:"never",..._(t)})}function nr(e,t){return new Yr({check:"less_than",..._(t),value:e,inclusive:!1})}function Jt(e,t){return new Yr({check:"less_than",..._(t),value:e,inclusive:!0})}function rr(e,t){return new Xr({check:"greater_than",..._(t),value:e,inclusive:!1})}function Vt(e,t){return new Xr({check:"greater_than",..._(t),value:e,inclusive:!0})}function or(e,t){return new Bi({check:"multiple_of",..._(t),value:e})}function oo(e,t){return new Vi({check:"max_length",..._(t),maximum:e})}function kt(e,t){return new qi({check:"min_length",..._(t),minimum:e})}function so(e,t){return new Wi({check:"length_equals",..._(t),length:e})}function Tl(e,t){return new Hi({check:"string_format",format:"regex",..._(t),pattern:e})}function El(e){return new Gi({check:"string_format",format:"lowercase",..._(e)})}function Ol(e){return new Ki({check:"string_format",format:"uppercase",..._(e)})}function Al(e,t){return new Yi({check:"string_format",format:"includes",..._(t),includes:e})}function Cl(e,t){return new Xi({check:"string_format",format:"starts_with",..._(t),prefix:e})}function Pl(e,t){return new Qi({check:"string_format",format:"ends_with",..._(t),suffix:e})}function Le(e){return new ea({check:"overwrite",tx:e})}function Il(e){return Le(t=>t.normalize(e))}function Zl(){return Le(e=>e.trim())}function Rl(){return Le(e=>e.toLowerCase())}function Nl(){return Le(e=>e.toUpperCase())}function jl(){return Le(e=>Gs(e))}function Ml(e,t,n){return new e({type:"array",element:t,..._(n)})}function Ll(e,t,n){return new e({type:"custom",check:"custom",fn:t,..._(n)})}function Dl(e){const t=Ul(n=>(n.addIssue=r=>{if(typeof r=="string")n.issues.push(He(r,n.value,t._zod.def));else{const o=r;o.fatal&&(o.continue=!1),o.code??(o.code="custom"),o.input??(o.input=n.value),o.inst??(o.inst=t),o.continue??(o.continue=!t._zod.def.abort),n.issues.push(He(o))}},e(n.value,n)));return t}function Ul(e,t){const n=new ee({check:"custom",..._(t)});return n._zod.check=e,n}function io(e){let t=e?.target??"draft-2020-12";return t==="draft-4"&&(t="draft-04"),t==="draft-7"&&(t="draft-07"),{processors:e.processors??{},metadataRegistry:e?.metadata??Je,target:t,unrepresentable:e?.unrepresentable??"throw",override:e?.override??(()=>{}),io:e?.io??"output",counter:0,seen:new Map,cycles:e?.cycles??"ref",reused:e?.reused??"inline",external:e?.external??void 0}}function V(e,t,n={path:[],schemaPath:[]}){var r;const o=e._zod.def,s=t.seen.get(e);if(s)return s.count++,n.schemaPath.includes(e)&&(s.cycle=n.path),s.schema;const i={schema:{},count:1,cycle:void 0,path:n.path};t.seen.set(e,i);const a=e._zod.toJSONSchema?.();if(a)i.schema=a;else{const u={...n,schemaPath:[...n.schemaPath,e],path:n.path};if(e._zod.processJSONSchema)e._zod.processJSONSchema(t,i.schema,u);else{const h=i.schema,d=t.processors[o.type];if(!d)throw new Error(`[toJSONSchema]: Non-representable type encountered: ${o.type}`);d(e,t,h,u)}const f=e._zod.parent;f&&(i.ref||(i.ref=f),V(f,t,u),t.seen.get(f).isParent=!0)}const l=t.metadataRegistry.get(e);return l&&Object.assign(i.schema,l),t.io==="input"&&Y(e)&&(delete i.schema.examples,delete i.schema.default),t.io==="input"&&i.schema._prefault&&((r=i.schema).default??(r.default=i.schema._prefault)),delete i.schema._prefault,t.seen.get(e).schema}function ao(e,t){const n=e.seen.get(t);if(!n)throw new Error("Unprocessed schema. This is a bug in Zod.");const r=new Map;for(const i of e.seen.entries()){const a=e.metadataRegistry.get(i[0])?.id;if(a){const l=r.get(a);if(l&&l!==i[0])throw new Error(`Duplicate schema id "${a}" detected during JSON Schema conversion. Two different schemas cannot share the same id when converted together.`);r.set(a,i[0])}}const o=i=>{const a=e.target==="draft-2020-12"?"$defs":"definitions";if(e.external){const f=e.external.registry.get(i[0])?.id,h=e.external.uri??(p=>p);if(f)return{ref:h(f)};const d=i[1].defId??i[1].schema.id??`schema${e.counter++}`;return i[1].defId=d,{defId:d,ref:`${h("__shared")}#/${a}/${d}`}}if(i[1]===n)return{ref:"#"};const c=`#/${a}/`,u=i[1].schema.id??`__schema${e.counter++}`;return{defId:u,ref:c+u}},s=i=>{if(i[1].schema.$ref)return;const a=i[1],{ref:l,defId:c}=o(i);a.def={...a.schema},c&&(a.defId=c);const u=a.schema;for(const f in u)delete u[f];u.$ref=l};if(e.cycles==="throw")for(const i of e.seen.entries()){const a=i[1];if(a.cycle)throw new Error(`Cycle detected: #/${a.cycle?.join("/")}/<root>

Set the \`cycles\` parameter to \`"ref"\` to resolve cyclical schemas with defs.`)}for(const i of e.seen.entries()){const a=i[1];if(t===i[0]){s(i);continue}if(e.external){const c=e.external.registry.get(i[0])?.id;if(t!==i[0]&&c){s(i);continue}}if(e.metadataRegistry.get(i[0])?.id){s(i);continue}if(a.cycle){s(i);continue}if(a.count>1&&e.reused==="ref"){s(i);continue}}}function lo(e,t){const n=e.seen.get(t);if(!n)throw new Error("Unprocessed schema. This is a bug in Zod.");const r=i=>{const a=e.seen.get(i);if(a.ref===null)return;const l=a.def??a.schema,c={...l},u=a.ref;if(a.ref=null,u){r(u);const h=e.seen.get(u),d=h.schema;if(d.$ref&&(e.target==="draft-07"||e.target==="draft-04"||e.target==="openapi-3.0")?(l.allOf=l.allOf??[],l.allOf.push(d)):Object.assign(l,d),Object.assign(l,c),i._zod.parent===u)for(const m in l)m==="$ref"||m==="allOf"||m in c||delete l[m];if(d.$ref)for(const m in l)m==="$ref"||m==="allOf"||m in h.def&&JSON.stringify(l[m])===JSON.stringify(h.def[m])&&delete l[m]}const f=i._zod.parent;if(f&&f!==u){r(f);const h=e.seen.get(f);if(h?.schema.$ref&&(l.$ref=h.schema.$ref,h.def))for(const d in l)d==="$ref"||d==="allOf"||d in h.def&&JSON.stringify(l[d])===JSON.stringify(h.def[d])&&delete l[d]}e.override({zodSchema:i,jsonSchema:l,path:a.path??[]})};for(const i of[...e.seen.entries()].reverse())r(i[0]);const o={};if(e.target==="draft-2020-12"?o.$schema="https://json-schema.org/draft/2020-12/schema":e.target==="draft-07"?o.$schema="http://json-schema.org/draft-07/schema#":e.target==="draft-04"?o.$schema="http://json-schema.org/draft-04/schema#":e.target,e.external?.uri){const i=e.external.registry.get(t)?.id;if(!i)throw new Error("Schema is missing an `id` property");o.$id=e.external.uri(i)}Object.assign(o,n.def??n.schema);const s=e.external?.defs??{};for(const i of e.seen.entries()){const a=i[1];a.def&&a.defId&&(s[a.defId]=a.def)}e.external||Object.keys(s).length>0&&(e.target==="draft-2020-12"?o.$defs=s:o.definitions=s);try{const i=JSON.parse(JSON.stringify(o));return Object.defineProperty(i,"~standard",{value:{...t["~standard"],jsonSchema:{input:wt(t,"input",e.processors),output:wt(t,"output",e.processors)}},enumerable:!1,writable:!1}),i}catch{throw new Error("Error converting schema to JSON.")}}function Y(e,t){const n=t??{seen:new Set};if(n.seen.has(e))return!1;n.seen.add(e);const r=e._zod.def;if(r.type==="transform")return!0;if(r.type==="array")return Y(r.element,n);if(r.type==="set")return Y(r.valueType,n);if(r.type==="lazy")return Y(r.getter(),n);if(r.type==="promise"||r.type==="optional"||r.type==="nonoptional"||r.type==="nullable"||r.type==="readonly"||r.type==="default"||r.type==="prefault")return Y(r.innerType,n);if(r.type==="intersection")return Y(r.left,n)||Y(r.right,n);if(r.type==="record"||r.type==="map")return Y(r.keyType,n)||Y(r.valueType,n);if(r.type==="pipe")return Y(r.in,n)||Y(r.out,n);if(r.type==="object"){for(const o in r.shape)if(Y(r.shape[o],n))return!0;return!1}if(r.type==="union"){for(const o of r.options)if(Y(o,n))return!0;return!1}if(r.type==="tuple"){for(const o of r.items)if(Y(o,n))return!0;return!!(r.rest&&Y(r.rest,n))}return!1}const Fl=(e,t={})=>n=>{const r=io({...n,processors:t});return V(e,r),ao(r,e),lo(r,e)},wt=(e,t,n={})=>r=>{const{libraryOptions:o,target:s}=r??{},i=io({...o??{},target:s,io:t,processors:n});return V(e,i),ao(i,e),lo(i,e)},Bl={guid:"uuid",url:"uri",datetime:"date-time",json_string:"json-string",regex:""},Jl=(e,t,n,r)=>{const o=n;o.type="string";const{minimum:s,maximum:i,format:a,patterns:l,contentEncoding:c}=e._zod.bag;if(typeof s=="number"&&(o.minLength=s),typeof i=="number"&&(o.maxLength=i),a&&(o.format=Bl[a]??a,o.format===""&&delete o.format,a==="time"&&delete o.format),c&&(o.contentEncoding=c),l&&l.size>0){const u=[...l];u.length===1?o.pattern=u[0].source:u.length>1&&(o.allOf=[...u.map(f=>({...t.target==="draft-07"||t.target==="draft-04"||t.target==="openapi-3.0"?{type:"string"}:{},pattern:f.source}))])}},Vl=(e,t,n,r)=>{const o=n,{minimum:s,maximum:i,format:a,multipleOf:l,exclusiveMaximum:c,exclusiveMinimum:u}=e._zod.bag;typeof a=="string"&&a.includes("int")?o.type="integer":o.type="number",typeof u=="number"&&(t.target==="draft-04"||t.target==="openapi-3.0"?(o.minimum=u,o.exclusiveMinimum=!0):o.exclusiveMinimum=u),typeof s=="number"&&(o.minimum=s,typeof u=="number"&&t.target!=="draft-04"&&(u>=s?delete o.minimum:delete o.exclusiveMinimum)),typeof c=="number"&&(t.target==="draft-04"||t.target==="openapi-3.0"?(o.maximum=c,o.exclusiveMaximum=!0):o.exclusiveMaximum=c),typeof i=="number"&&(o.maximum=i,typeof c=="number"&&t.target!=="draft-04"&&(c<=i?delete o.maximum:delete o.exclusiveMaximum)),typeof l=="number"&&(o.multipleOf=l)},ql=(e,t,n,r)=>{n.not={}},Wl=(e,t,n,r)=>{},Hl=(e,t,n,r)=>{const o=e._zod.def,s=Dr(o.entries);s.every(i=>typeof i=="number")&&(n.type="number"),s.every(i=>typeof i=="string")&&(n.type="string"),n.enum=s},Gl=(e,t,n,r)=>{const o=e._zod.def,s=[];for(const i of o.values)if(i===void 0){if(t.unrepresentable==="throw")throw new Error("Literal `undefined` cannot be represented in JSON Schema")}else if(typeof i=="bigint"){if(t.unrepresentable==="throw")throw new Error("BigInt literals cannot be represented in JSON Schema");s.push(Number(i))}else s.push(i);if(s.length!==0)if(s.length===1){const i=s[0];n.type=i===null?"null":typeof i,t.target==="draft-04"||t.target==="openapi-3.0"?n.enum=[i]:n.const=i}else s.every(i=>typeof i=="number")&&(n.type="number"),s.every(i=>typeof i=="string")&&(n.type="string"),s.every(i=>typeof i=="boolean")&&(n.type="boolean"),s.every(i=>i===null)&&(n.type="null"),n.enum=s},Kl=(e,t,n,r)=>{if(t.unrepresentable==="throw")throw new Error("Custom types cannot be represented in JSON Schema")},Yl=(e,t,n,r)=>{if(t.unrepresentable==="throw")throw new Error("Transforms cannot be represented in JSON Schema")},Xl=(e,t,n,r)=>{const o=n,s=e._zod.def,{minimum:i,maximum:a}=e._zod.bag;typeof i=="number"&&(o.minItems=i),typeof a=="number"&&(o.maxItems=a),o.type="array",o.items=V(s.element,t,{...r,path:[...r.path,"items"]})},Ql=(e,t,n,r)=>{const o=n,s=e._zod.def;o.type="object",o.properties={};const i=s.shape;for(const c in i)o.properties[c]=V(i[c],t,{...r,path:[...r.path,"properties",c]});const a=new Set(Object.keys(i)),l=new Set([...a].filter(c=>{const u=s.shape[c]._zod;return t.io==="input"?u.optin===void 0:u.optout===void 0}));l.size>0&&(o.required=Array.from(l)),s.catchall?._zod.def.type==="never"?o.additionalProperties=!1:s.catchall?s.catchall&&(o.additionalProperties=V(s.catchall,t,{...r,path:[...r.path,"additionalProperties"]})):t.io==="output"&&(o.additionalProperties=!1)},ec=(e,t,n,r)=>{const o=e._zod.def,s=o.inclusive===!1,i=o.options.map((a,l)=>V(a,t,{...r,path:[...r.path,s?"oneOf":"anyOf",l]}));s?n.oneOf=i:n.anyOf=i},tc=(e,t,n,r)=>{const o=e._zod.def,s=V(o.left,t,{...r,path:[...r.path,"allOf",0]}),i=V(o.right,t,{...r,path:[...r.path,"allOf",1]}),a=c=>"allOf"in c&&Object.keys(c).length===1,l=[...a(s)?s.allOf:[s],...a(i)?i.allOf:[i]];n.allOf=l},nc=(e,t,n,r)=>{const o=n,s=e._zod.def;o.type="object";const i=s.keyType,l=i._zod.bag?.patterns;if(s.mode==="loose"&&l&&l.size>0){const u=V(s.valueType,t,{...r,path:[...r.path,"patternProperties","*"]});o.patternProperties={};for(const f of l)o.patternProperties[f.source]=u}else(t.target==="draft-07"||t.target==="draft-2020-12")&&(o.propertyNames=V(s.keyType,t,{...r,path:[...r.path,"propertyNames"]})),o.additionalProperties=V(s.valueType,t,{...r,path:[...r.path,"additionalProperties"]});const c=i._zod.values;if(c){const u=[...c].filter(f=>typeof f=="string"||typeof f=="number");u.length>0&&(o.required=u)}},rc=(e,t,n,r)=>{const o=e._zod.def,s=V(o.innerType,t,r),i=t.seen.get(e);t.target==="openapi-3.0"?(i.ref=o.innerType,n.nullable=!0):n.anyOf=[s,{type:"null"}]},oc=(e,t,n,r)=>{const o=e._zod.def;V(o.innerType,t,r);const s=t.seen.get(e);s.ref=o.innerType},sc=(e,t,n,r)=>{const o=e._zod.def;V(o.innerType,t,r);const s=t.seen.get(e);s.ref=o.innerType,n.default=JSON.parse(JSON.stringify(o.defaultValue))},ic=(e,t,n,r)=>{const o=e._zod.def;V(o.innerType,t,r);const s=t.seen.get(e);s.ref=o.innerType,t.io==="input"&&(n._prefault=JSON.parse(JSON.stringify(o.defaultValue)))},ac=(e,t,n,r)=>{const o=e._zod.def;V(o.innerType,t,r);const s=t.seen.get(e);s.ref=o.innerType;let i;try{i=o.catchValue(void 0)}catch{throw new Error("Dynamic catch values are not supported in JSON Schema")}n.default=i},lc=(e,t,n,r)=>{const o=e._zod.def,s=t.io==="input"?o.in._zod.def.type==="transform"?o.out:o.in:o.out;V(s,t,r);const i=t.seen.get(e);i.ref=s},cc=(e,t,n,r)=>{const o=e._zod.def;V(o.innerType,t,r);const s=t.seen.get(e);s.ref=o.innerType,n.readOnly=!0},co=(e,t,n,r)=>{const o=e._zod.def;V(o.innerType,t,r);const s=t.seen.get(e);s.ref=o.innerType},uc=g("ZodISODateTime",(e,t)=>{pa.init(e,t),L.init(e,t)});function fc(e){return yl(uc,e)}const dc=g("ZodISODate",(e,t)=>{ga.init(e,t),L.init(e,t)});function hc(e){return _l(dc,e)}const pc=g("ZodISOTime",(e,t)=>{ma.init(e,t),L.init(e,t)});function gc(e){return kl(pc,e)}const mc=g("ZodISODuration",(e,t)=>{ba.init(e,t),L.init(e,t)});function bc(e){return wl(mc,e)}const vc=(e,t)=>{Jr.init(e,t),e.name="ZodError",Object.defineProperties(e,{format:{value:n=>li(e,n)},flatten:{value:n=>ai(e,n)},addIssue:{value:n=>{e.issues.push(n),e.message=JSON.stringify(e.issues,sn,2)}},addIssues:{value:n=>{e.issues.push(...n),e.message=JSON.stringify(e.issues,sn,2)}},isEmpty:{get(){return e.issues.length===0}}})},oe=g("ZodError",vc,{Parent:Error}),yc=wn(oe),_c=xn(oe),kc=Ct(oe),wc=Pt(oe),xc=fi(oe),$c=di(oe),Sc=hi(oe),zc=pi(oe),Tc=gi(oe),Ec=mi(oe),Oc=bi(oe),Ac=vi(oe),F=g("ZodType",(e,t)=>(U.init(e,t),Object.assign(e["~standard"],{jsonSchema:{input:wt(e,"input"),output:wt(e,"output")}}),e.toJSONSchema=Fl(e,{}),e.def=t,e.type=t.type,Object.defineProperty(e,"_def",{value:t}),e.check=(...n)=>e.clone(xe(t,{checks:[...t.checks??[],...n.map(r=>typeof r=="function"?{_zod:{check:r,def:{check:"custom"},onattach:[]}}:r)]}),{parent:!0}),e.with=e.check,e.clone=(n,r)=>$e(e,n,r),e.brand=()=>e,e.register=((n,r)=>(n.add(e,r),e)),e.parse=(n,r)=>yc(e,n,r,{callee:e.parse}),e.safeParse=(n,r)=>kc(e,n,r),e.parseAsync=async(n,r)=>_c(e,n,r,{callee:e.parseAsync}),e.safeParseAsync=async(n,r)=>wc(e,n,r),e.spa=e.safeParseAsync,e.encode=(n,r)=>xc(e,n,r),e.decode=(n,r)=>$c(e,n,r),e.encodeAsync=async(n,r)=>Sc(e,n,r),e.decodeAsync=async(n,r)=>zc(e,n,r),e.safeEncode=(n,r)=>Tc(e,n,r),e.safeDecode=(n,r)=>Ec(e,n,r),e.safeEncodeAsync=async(n,r)=>Oc(e,n,r),e.safeDecodeAsync=async(n,r)=>Ac(e,n,r),e.refine=(n,r)=>e.check(Tu(n,r)),e.superRefine=n=>e.check(Eu(n)),e.overwrite=n=>e.check(Le(n)),e.optional=()=>ar(e),e.exactOptional=()=>pu(e),e.nullable=()=>lr(e),e.nullish=()=>ar(lr(e)),e.nonoptional=n=>_u(e,n),e.array=()=>tu(e),e.or=n=>ou([e,n]),e.and=n=>iu(e,n),e.transform=n=>cr(e,du(n)),e.default=n=>bu(e,n),e.prefault=n=>yu(e,n),e.catch=n=>wu(e,n),e.pipe=n=>cr(e,n),e.readonly=()=>Su(e),e.describe=n=>{const r=e.clone();return Je.add(r,{description:n}),r},Object.defineProperty(e,"description",{get(){return Je.get(e)?.description},configurable:!0}),e.meta=(...n)=>{if(n.length===0)return Je.get(e);const r=e.clone();return Je.add(r,n[0]),r},e.isOptional=()=>e.safeParse(void 0).success,e.isNullable=()=>e.safeParse(null).success,e.apply=n=>n(e),e)),uo=g("_ZodString",(e,t)=>{$n.init(e,t),F.init(e,t),e._zod.processJSONSchema=(r,o,s)=>Jl(e,r,o);const n=e._zod.bag;e.format=n.format??null,e.minLength=n.minimum??null,e.maxLength=n.maximum??null,e.regex=(...r)=>e.check(Tl(...r)),e.includes=(...r)=>e.check(Al(...r)),e.startsWith=(...r)=>e.check(Cl(...r)),e.endsWith=(...r)=>e.check(Pl(...r)),e.min=(...r)=>e.check(kt(...r)),e.max=(...r)=>e.check(oo(...r)),e.length=(...r)=>e.check(so(...r)),e.nonempty=(...r)=>e.check(kt(1,...r)),e.lowercase=r=>e.check(El(r)),e.uppercase=r=>e.check(Ol(r)),e.trim=()=>e.check(Zl()),e.normalize=(...r)=>e.check(Il(...r)),e.toLowerCase=()=>e.check(Rl()),e.toUpperCase=()=>e.check(Nl()),e.slugify=()=>e.check(jl())}),Cc=g("ZodString",(e,t)=>{$n.init(e,t),uo.init(e,t),e.email=n=>e.check(Xa(Pc,n)),e.url=n=>e.check(rl(Ic,n)),e.jwt=n=>e.check(vl(Hc,n)),e.emoji=n=>e.check(ol(Zc,n)),e.guid=n=>e.check(tr(sr,n)),e.uuid=n=>e.check(Qa(st,n)),e.uuidv4=n=>e.check(el(st,n)),e.uuidv6=n=>e.check(tl(st,n)),e.uuidv7=n=>e.check(nl(st,n)),e.nanoid=n=>e.check(sl(Rc,n)),e.guid=n=>e.check(tr(sr,n)),e.cuid=n=>e.check(il(Nc,n)),e.cuid2=n=>e.check(al(jc,n)),e.ulid=n=>e.check(ll(Mc,n)),e.base64=n=>e.check(gl(Vc,n)),e.base64url=n=>e.check(ml(qc,n)),e.xid=n=>e.check(cl(Lc,n)),e.ksuid=n=>e.check(ul(Dc,n)),e.ipv4=n=>e.check(fl(Uc,n)),e.ipv6=n=>e.check(dl(Fc,n)),e.cidrv4=n=>e.check(hl(Bc,n)),e.cidrv6=n=>e.check(pl(Jc,n)),e.e164=n=>e.check(bl(Wc,n)),e.datetime=n=>e.check(fc(n)),e.date=n=>e.check(hc(n)),e.time=n=>e.check(gc(n)),e.duration=n=>e.check(bc(n))});function Ue(e){return Ya(Cc,e)}const L=g("ZodStringFormat",(e,t)=>{j.init(e,t),uo.init(e,t)}),Pc=g("ZodEmail",(e,t)=>{sa.init(e,t),L.init(e,t)}),sr=g("ZodGUID",(e,t)=>{ra.init(e,t),L.init(e,t)}),st=g("ZodUUID",(e,t)=>{oa.init(e,t),L.init(e,t)}),Ic=g("ZodURL",(e,t)=>{ia.init(e,t),L.init(e,t)}),Zc=g("ZodEmoji",(e,t)=>{aa.init(e,t),L.init(e,t)}),Rc=g("ZodNanoID",(e,t)=>{la.init(e,t),L.init(e,t)}),Nc=g("ZodCUID",(e,t)=>{ca.init(e,t),L.init(e,t)}),jc=g("ZodCUID2",(e,t)=>{ua.init(e,t),L.init(e,t)}),Mc=g("ZodULID",(e,t)=>{fa.init(e,t),L.init(e,t)}),Lc=g("ZodXID",(e,t)=>{da.init(e,t),L.init(e,t)}),Dc=g("ZodKSUID",(e,t)=>{ha.init(e,t),L.init(e,t)}),Uc=g("ZodIPv4",(e,t)=>{va.init(e,t),L.init(e,t)}),Fc=g("ZodIPv6",(e,t)=>{ya.init(e,t),L.init(e,t)}),Bc=g("ZodCIDRv4",(e,t)=>{_a.init(e,t),L.init(e,t)}),Jc=g("ZodCIDRv6",(e,t)=>{ka.init(e,t),L.init(e,t)}),Vc=g("ZodBase64",(e,t)=>{wa.init(e,t),L.init(e,t)}),qc=g("ZodBase64URL",(e,t)=>{$a.init(e,t),L.init(e,t)}),Wc=g("ZodE164",(e,t)=>{Sa.init(e,t),L.init(e,t)}),Hc=g("ZodJWT",(e,t)=>{Ta.init(e,t),L.init(e,t)}),fo=g("ZodNumber",(e,t)=>{eo.init(e,t),F.init(e,t),e._zod.processJSONSchema=(r,o,s)=>Vl(e,r,o),e.gt=(r,o)=>e.check(rr(r,o)),e.gte=(r,o)=>e.check(Vt(r,o)),e.min=(r,o)=>e.check(Vt(r,o)),e.lt=(r,o)=>e.check(nr(r,o)),e.lte=(r,o)=>e.check(Jt(r,o)),e.max=(r,o)=>e.check(Jt(r,o)),e.int=r=>e.check(ir(r)),e.safe=r=>e.check(ir(r)),e.positive=r=>e.check(rr(0,r)),e.nonnegative=r=>e.check(Vt(0,r)),e.negative=r=>e.check(nr(0,r)),e.nonpositive=r=>e.check(Jt(0,r)),e.multipleOf=(r,o)=>e.check(or(r,o)),e.step=(r,o)=>e.check(or(r,o)),e.finite=()=>e;const n=e._zod.bag;e.minValue=Math.max(n.minimum??Number.NEGATIVE_INFINITY,n.exclusiveMinimum??Number.NEGATIVE_INFINITY)??null,e.maxValue=Math.min(n.maximum??Number.POSITIVE_INFINITY,n.exclusiveMaximum??Number.POSITIVE_INFINITY)??null,e.isInt=(n.format??"").includes("int")||Number.isSafeInteger(n.multipleOf??.5),e.isFinite=!0,e.format=n.format??null});function Gc(e){return xl(fo,e)}const Kc=g("ZodNumberFormat",(e,t)=>{Ea.init(e,t),fo.init(e,t)});function ir(e){return $l(Kc,e)}const Yc=g("ZodUnknown",(e,t)=>{Oa.init(e,t),F.init(e,t),e._zod.processJSONSchema=(n,r,o)=>Wl()});function ln(){return Sl(Yc)}const Xc=g("ZodNever",(e,t)=>{Aa.init(e,t),F.init(e,t),e._zod.processJSONSchema=(n,r,o)=>ql(e,n,r)});function Qc(e){return zl(Xc,e)}const eu=g("ZodArray",(e,t)=>{Ca.init(e,t),F.init(e,t),e._zod.processJSONSchema=(n,r,o)=>Xl(e,n,r,o),e.element=t.element,e.min=(n,r)=>e.check(kt(n,r)),e.nonempty=n=>e.check(kt(1,n)),e.max=(n,r)=>e.check(oo(n,r)),e.length=(n,r)=>e.check(so(n,r)),e.unwrap=()=>e.element});function tu(e,t){return Ml(eu,e,t)}const nu=g("ZodObject",(e,t)=>{Ia.init(e,t),F.init(e,t),e._zod.processJSONSchema=(n,r,o)=>Ql(e,n,r,o),Z(e,"shape",()=>t.shape),e.keyof=()=>ct(Object.keys(e._zod.def.shape)),e.catchall=n=>e.clone({...e._zod.def,catchall:n}),e.passthrough=()=>e.clone({...e._zod.def,catchall:ln()}),e.loose=()=>e.clone({...e._zod.def,catchall:ln()}),e.strict=()=>e.clone({...e._zod.def,catchall:Qc()}),e.strip=()=>e.clone({...e._zod.def,catchall:void 0}),e.extend=n=>ni(e,n),e.safeExtend=n=>ri(e,n),e.merge=n=>oi(e,n),e.pick=n=>ei(e,n),e.omit=n=>ti(e,n),e.partial=(...n)=>si(po,e,n[0]),e.required=(...n)=>ii(go,e,n[0])});function ho(e,t){const n={type:"object",shape:e??{},..._(t)};return new nu(n)}const ru=g("ZodUnion",(e,t)=>{Za.init(e,t),F.init(e,t),e._zod.processJSONSchema=(n,r,o)=>ec(e,n,r,o),e.options=t.options});function ou(e,t){return new ru({type:"union",options:e,..._(t)})}const su=g("ZodIntersection",(e,t)=>{Ra.init(e,t),F.init(e,t),e._zod.processJSONSchema=(n,r,o)=>tc(e,n,r,o)});function iu(e,t){return new su({type:"intersection",left:e,right:t})}const au=g("ZodRecord",(e,t)=>{Na.init(e,t),F.init(e,t),e._zod.processJSONSchema=(n,r,o)=>nc(e,n,r,o),e.keyType=t.keyType,e.valueType=t.valueType});function lu(e,t,n){return new au({type:"record",keyType:e,valueType:t,..._(n)})}const cn=g("ZodEnum",(e,t)=>{ja.init(e,t),F.init(e,t),e._zod.processJSONSchema=(r,o,s)=>Hl(e,r,o),e.enum=t.entries,e.options=Object.values(t.entries);const n=new Set(Object.keys(t.entries));e.extract=(r,o)=>{const s={};for(const i of r)if(n.has(i))s[i]=t.entries[i];else throw new Error(`Key ${i} not found in enum`);return new cn({...t,checks:[],..._(o),entries:s})},e.exclude=(r,o)=>{const s={...t.entries};for(const i of r)if(n.has(i))delete s[i];else throw new Error(`Key ${i} not found in enum`);return new cn({...t,checks:[],..._(o),entries:s})}});function ct(e,t){const n=Array.isArray(e)?Object.fromEntries(e.map(r=>[r,r])):e;return new cn({type:"enum",entries:n,..._(t)})}const cu=g("ZodLiteral",(e,t)=>{Ma.init(e,t),F.init(e,t),e._zod.processJSONSchema=(n,r,o)=>Gl(e,n,r),e.values=new Set(t.values),Object.defineProperty(e,"value",{get(){if(t.values.length>1)throw new Error("This schema contains multiple valid literal values. Use `.values` instead.");return t.values[0]}})});function uu(e,t){return new cu({type:"literal",values:Array.isArray(e)?e:[e],..._(t)})}const fu=g("ZodTransform",(e,t)=>{La.init(e,t),F.init(e,t),e._zod.processJSONSchema=(n,r,o)=>Yl(e,n),e._zod.parse=(n,r)=>{if(r.direction==="backward")throw new Mr(e.constructor.name);n.addIssue=s=>{if(typeof s=="string")n.issues.push(He(s,n.value,t));else{const i=s;i.fatal&&(i.continue=!1),i.code??(i.code="custom"),i.input??(i.input=n.value),i.inst??(i.inst=e),n.issues.push(He(i))}};const o=t.transform(n.value,n);return o instanceof Promise?o.then(s=>(n.value=s,n)):(n.value=o,n)}});function du(e){return new fu({type:"transform",transform:e})}const po=g("ZodOptional",(e,t)=>{ro.init(e,t),F.init(e,t),e._zod.processJSONSchema=(n,r,o)=>co(e,n,r,o),e.unwrap=()=>e._zod.def.innerType});function ar(e){return new po({type:"optional",innerType:e})}const hu=g("ZodExactOptional",(e,t)=>{Da.init(e,t),F.init(e,t),e._zod.processJSONSchema=(n,r,o)=>co(e,n,r,o),e.unwrap=()=>e._zod.def.innerType});function pu(e){return new hu({type:"optional",innerType:e})}const gu=g("ZodNullable",(e,t)=>{Ua.init(e,t),F.init(e,t),e._zod.processJSONSchema=(n,r,o)=>rc(e,n,r,o),e.unwrap=()=>e._zod.def.innerType});function lr(e){return new gu({type:"nullable",innerType:e})}const mu=g("ZodDefault",(e,t)=>{Fa.init(e,t),F.init(e,t),e._zod.processJSONSchema=(n,r,o)=>sc(e,n,r,o),e.unwrap=()=>e._zod.def.innerType,e.removeDefault=e.unwrap});function bu(e,t){return new mu({type:"default",innerType:e,get defaultValue(){return typeof t=="function"?t():Fr(t)}})}const vu=g("ZodPrefault",(e,t)=>{Ba.init(e,t),F.init(e,t),e._zod.processJSONSchema=(n,r,o)=>ic(e,n,r,o),e.unwrap=()=>e._zod.def.innerType});function yu(e,t){return new vu({type:"prefault",innerType:e,get defaultValue(){return typeof t=="function"?t():Fr(t)}})}const go=g("ZodNonOptional",(e,t)=>{Ja.init(e,t),F.init(e,t),e._zod.processJSONSchema=(n,r,o)=>oc(e,n,r,o),e.unwrap=()=>e._zod.def.innerType});function _u(e,t){return new go({type:"nonoptional",innerType:e,..._(t)})}const ku=g("ZodCatch",(e,t)=>{Va.init(e,t),F.init(e,t),e._zod.processJSONSchema=(n,r,o)=>ac(e,n,r,o),e.unwrap=()=>e._zod.def.innerType,e.removeCatch=e.unwrap});function wu(e,t){return new ku({type:"catch",innerType:e,catchValue:typeof t=="function"?t:()=>t})}const xu=g("ZodPipe",(e,t)=>{qa.init(e,t),F.init(e,t),e._zod.processJSONSchema=(n,r,o)=>lc(e,n,r,o),e.in=t.in,e.out=t.out});function cr(e,t){return new xu({type:"pipe",in:e,out:t})}const $u=g("ZodReadonly",(e,t)=>{Wa.init(e,t),F.init(e,t),e._zod.processJSONSchema=(n,r,o)=>cc(e,n,r,o),e.unwrap=()=>e._zod.def.innerType});function Su(e){return new $u({type:"readonly",innerType:e})}const zu=g("ZodCustom",(e,t)=>{Ha.init(e,t),F.init(e,t),e._zod.processJSONSchema=(n,r,o)=>Kl(e,n)});function Tu(e,t={}){return Ll(zu,e,t)}function Eu(e){return Dl(e)}const Ou=ho({address:ct(["session","user"]),target:ct(["user","agent"]),handler:ct(["system","agent"])}),Au=ho({type:uu("notification"),id:Ue(),session_id:Ue().nullable().optional(),content:Ue(),routing:Ou,owner_lease:Gc(),metadata:lu(Ue(),ln()).nullable().optional(),timestamp:Ue().nullable().optional()});function Cu(){const[e,t]=O(0),n=new BroadcastChannel("mmcp_lease_fence");return n.onmessage=o=>{o.data.type==="LEASE_UPDATE"&&o.data.lease>e()&&t(o.data.lease)},{activeLease:e,updateLease:o=>{o>e()&&(t(o),n.postMessage({type:"LEASE_UPDATE",lease:o}))}}}const un=ce(Cu);function Pu(){const[e,t]=O(null);return{sessionActivity:e,triggerSessionActivity:r=>{t(r),setTimeout(()=>t(null),0)}}}const mo=ce(Pu),Iu=window.location.protocol==="https:"?"wss:":"ws:",Zu=window.location.port==="3000"?"localhost:3000":window.location.host,Ru=`${Iu}//${Zu}/api/v1/notifications/ws`,Nu=Bs(Ru),ju=Nu.pipe(Bt(e=>e.type==="notification"),qs(e=>{const t=Au.safeParse(e);return t.success?t.data:null}),Bt(e=>e!==null),Bt(e=>e.owner_lease>un.activeLease()),Ws(e=>{un.updateLease(e.owner_lease),e.session_id&&mo.triggerSessionActivity(e.session_id)})),Mu=(e,t)=>{fetch("/api/v1/notifications/ack",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e,lease_id:t,type:"ack"})})};var Lu=k("<button>");function ue(e){const[t,n]=Qo(e,["children","class","highlight"]);return(()=>{var r=Lu();return Cr(r,Ar(n,{get class(){return`cursor-pointer border-none bg-transparent outline-none select-none transition-colors text-[var(--color-primary)] hover:text-[var(--color-primary-highlight)] ${t.highlight?"text-[var(--color-primary-highlight)]":""} ${t.class||""}`}}),!1),b(r,()=>t.children),r})()}var Du=k('<div class="px-6 py-4 flex justify-end gap-3">'),Uu=k('<div><div><div class="px-6 py-4"><h3 class="text-lg font-semibold text-zinc-100"></h3></div><div class="px-6 py-4">');function ur(e){const t=r=>{r.target===r.currentTarget&&e.onClose()},n=r=>{r.key==="Escape"&&e.onClose()};return Ke(()=>{e.isOpen&&document.addEventListener("keydown",n)}),ye(()=>{document.removeEventListener("keydown",n)}),(()=>{var r=Uu(),o=r.firstChild,s=o.firstChild,i=s.firstChild,a=s.nextSibling;return r.$$click=t,o.$$click=l=>l.stopPropagation(),b(i,()=>e.title),b(a,()=>e.children),b(o,v(G,{get when(){return e.actions},get children(){var l=Du();return b(l,()=>e.actions),l}}),null),D(l=>{var c=`fixed inset-0 z-50 flex items-center justify-center transition-opacity duration-300 ease-out ${e.isOpen?"bg-black/20 opacity-100":"bg-black/0 opacity-0 pointer-events-none"}`,u=`bg-[var(--bg-tertiary)] rounded-lg shadow-lg max-w-md w-full mx-4 transition-all duration-300 ease-out ${e.isOpen?"scale-100 opacity-100":"scale-95 opacity-0"}`;return c!==l.e&&Q(r,l.e=c),u!==l.t&&Q(o,l.t=u),l},{e:void 0,t:void 0}),r})()}Ye(["click"]);var Fu=k("<div>");function bo(e){const[t,n]=O(!1),[r,o]=O(!1);let s,i;const a=d=>{s=d,e.ref&&e.ref(d)},l=()=>{n(!0),i&&clearTimeout(i),i=window.setTimeout(()=>{n(!1)},3e3)},c=d=>{if(!s)return;const p=s.getBoundingClientRect(),m=e.orientation!=="horizontal",y=17;let S=!1;m?S=d.clientX>=p.right-y&&d.clientX<=p.right&&d.clientY>=p.top&&d.clientY<=p.bottom:S=d.clientY>=p.bottom-y&&d.clientY<=p.bottom&&d.clientX>=p.left&&d.clientX<=p.right,o(S)},u=()=>{o(!1)};Ke(()=>{s&&(s.addEventListener("scroll",l,{passive:!0}),s.addEventListener("mousemove",c),s.addEventListener("mouseleave",u))}),ye(()=>{i&&clearTimeout(i),s&&(s.removeEventListener("scroll",l),s.removeEventListener("mousemove",c),s.removeEventListener("mouseleave",u))});const f=()=>{const d="mmcp-scrollbar",p=e.orientation==="horizontal"?"overflow-x-auto overflow-y-hidden":e.orientation==="vertical"?"overflow-y-auto overflow-x-hidden":"overflow-auto";return`${d} ${p} ${e.class||""}`.trim()},h=()=>t()||r();return(()=>{var d=Fu();return Ot(a,d),b(d,()=>e.children),D(p=>{var m=f(),y=h()?"1":"0",S=h()?"#151515":"transparent";return m!==p.e&&Q(d,p.e=m),y!==p.t&&le(d,"--scrollbar-opacity",p.t=y),S!==p.a&&le(d,"--scrollbar-bg",p.a=S),p},{e:void 0,t:void 0,a:void 0}),d})()}var Bu=k('<svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M9 5l7 7-7 7">'),Ju=k('<svg class="w-5 h-5 flex-shrink-0"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M12 4v16m8-8H4">'),Vu=k('<span class="text-white text-sm font-mono transition-opacity duration-300 truncate w-[120px]">New chat'),qu=k('<div data-menu-dropdown class="fixed z-[100] w-48 bg-[var(--bg-tertiary)] border border-[var(--border-primary)] rounded-md"><button class="w-full px-4 py-2 text-left text-sm text-zinc-100 hover:bg-zinc-700 transition-colors first:rounded-t-md">Rename</button><button class="w-full px-4 py-2 text-left text-sm text-red-400 hover:bg-zinc-700 transition-colors last:rounded-b-md">Delete'),Wu=k('<p class="text-zinc-300 text-sm">Are you sure you want to delete this session? This action cannot be undone.'),Hu=k('<div class=space-y-4><input type=text class="w-full px-3 py-2 bg-[var(--bg-secondary)] border border-[var(--border-primary)] rounded-md text-zinc-100 placeholder-zinc-500 focus:outline-none"placeholder="Enter new session name"autofocus>'),Gu=k('<div class="h-full flex flex-col min-h-0 relative overflow-hidden select-none"><div class="border-b border-[var(--border-secondary)] flex flex-col gap-3 h-[120px] py-4"style=padding-left:22px;padding-right:22px></div><div>'),Ku=k('<svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"stroke-width=2 stroke-linecap=round stroke-linejoin=round><path d="M15 19l-7-7 7-7">'),Yu=k('<div class="p-4 text-zinc-500 text-sm">Loading sessions...'),Xu=k('<div class="p-4 text-zinc-500 text-sm">No sessions yet'),Qu=k('<div class="group relative"><div><div class="text-sm text-zinc-100 truncate whitespace-nowrap max-w-[240px] group-hover:max-w-[calc(100%)] flex-1 text-left min-w-0 overflow-hidden"></div><div class="relative flex-shrink-0 flex items-center justify-center transition-all z-10"data-menu-container><button class="p-0 text-zinc-400 hover:text-zinc-100 transition-colors relative z-10 cursor-pointer"><svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z">'),fr=k('<button class="px-4 py-2 text-sm text-zinc-300 hover:text-zinc-100 transition-colors cursor-pointer">Cancel'),ef=k('<button class="px-4 py-2 text-sm bg-red-600 text-white hover:bg-red-700 transition-colors rounded cursor-pointer">Delete'),tf=k('<button class="px-4 py-2 text-sm font-bold bg-[var(--color-primary)] hover:bg-[var(--color-primary-highlight)] text-black transition-colors rounded cursor-pointer">Rename');function nf(e){const[t,{refetch:n,mutate:r}]=Jo(()=>ys()),[o,s]=O(null),[i,a]=O(null),[l,c]=O(!1),[u,f]=O(null),[h,d]=O(!1),[p,m]=O(null),[y,S]=O(""),C=re.currentSessionId,$=()=>{re.clearSession()},x=(w,P)=>{s(null),a(null),m({id:w,title:P}),S(P),d(!0)},z=async()=>{const w=p(),P=y().trim();if(!(!w||!P||P===w.title)){d(!1),m(null),S("");try{await _s(w.id,P),n()}catch(H){alert(`Failed to rename session: ${H}`)}}},de=()=>{d(!1),m(null),S("")},Se=async w=>{s(null),a(null),f(w),c(!0)},et=async()=>{const w=u();if(!w)return;c(!1),f(null);const P=t();if(P)try{await ks(w),C()===w&&re.clearSession();const H=P.filter(T=>T.id!==w);r(H)}catch(H){console.error("Delete failed",H),alert(`Failed to delete session: ${H}`),n()}},B=()=>{c(!1),f(null)};let M=null;Ze(()=>{const w=C(),P=t();if(w&&!M&&P&&!P.some(T=>T.id===w)){const T=re.pendingSessionTitle(),q=[{id:w,title:T||"New Chat",updated_at:new Date().toISOString()},...P];r(q)}M=w});const te=w=>{const P=t();if(!P)return;const H=P.findIndex(J=>J.id===w);if(H<=0)return;const T=P[H],W=P.filter(J=>J.id!==w),q=[T,...W];r(q)};return Ze(()=>{const w=mo.sessionActivity();w&&te(w)}),Ke(()=>{const w=P=>{const H=P.target;!H.closest("[data-menu-container]")&&!H.closest("[data-menu-dropdown]")&&(s(null),a(null))};document.addEventListener("click",w),ye(()=>document.removeEventListener("click",w))}),(()=>{var w=Gu(),P=w.firstChild,H=P.nextSibling;return b(P,v(ue,{get onClick(){return e.onToggle},class:"self-start h-[36px] flex items-center justify-center",get children(){return v(G,{get when(){return e.isCollapsed},get fallback(){return Ku()},get children(){return Bu()}})}}),null),b(P,v(ue,{onClick:$,class:"flex items-center gap-2 self-start h-[36px]",get children(){return[Ju(),(()=>{var T=Vu();return D(W=>{var q=!!e.isCollapsed,J=!e.isCollapsed;return q!==W.e&&T.classList.toggle("opacity-0",W.e=q),J!==W.t&&T.classList.toggle("opacity-100",W.t=J),W},{e:void 0,t:void 0}),T})()]}}),null),b(H,v(bo,{class:"flex-1",get children(){return v(G,{get when(){return!t.loading},get fallback(){return Yu()},get children(){return v(G,{get when(){return Gt(()=>!!t())()&&t().length>0},get fallback(){return Xu()},get children(){return v(Et,{get each(){return t()},children:T=>{const W=()=>{const q=C();return q===T.id&&q!==null};return(()=>{var q=Qu(),J=q.firstChild,ne=J.firstChild,be=ne.nextSibling,Nt=be.firstChild;return J.$$click=()=>{re.loadSession(T.id)},b(ne,()=>T.title||"New Chat"),Nt.$$click=ve=>{ve.stopPropagation();const De=ve.currentTarget.getBoundingClientRect();if(o()===T.id)s(null),a(null);else{s(T.id);const No=192,jo=De.left+De.width/2;a({top:De.bottom+4,left:jo-No/2})}},D(ve=>{var jt=`flex items-center w-full hover:bg-[var(--bg-tertiary)] transition-colors px-4 py-3 ${W()?"bg-[var(--bg-tertiary)] border-l-2 border-l-[var(--color-primary)]":""}`,De={"w-0 overflow-hidden opacity-0 group-hover:w-auto group-hover:opacity-100":o()!==T.id,"w-auto opacity-100":o()===T.id};return jt!==ve.e&&Q(J,ve.e=jt),ve.t=gn(be,De,ve.t),ve},{e:void 0,t:void 0}),q})()}})}})}})}})),b(w,v(vs,{get children(){return v(G,{get when(){return Gt(()=>!!o())()&&i()},get children(){var T=qu(),W=T.firstChild,q=W.nextSibling;return W.$$click=J=>{J.stopPropagation();const ne=o();if(ne){const be=t()?.find(Nt=>Nt.id===ne);be&&x(ne,be.title||"New Chat")}},q.$$click=J=>{J.stopPropagation();const ne=o();ne&&Se(ne)},D(J=>{var ne=`${i().top}px`,be=`${i().left}px`;return ne!==J.e&&le(T,"top",J.e=ne),be!==J.t&&le(T,"left",J.t=be),J},{e:void 0,t:void 0}),T}})}}),null),b(w,v(ur,{get isOpen(){return l()},onClose:B,title:"Delete Session",get actions(){return[(()=>{var T=fr();return T.$$click=B,T})(),(()=>{var T=ef();return T.$$click=et,T})()]},get children(){return Wu()}}),null),b(w,v(ur,{get isOpen(){return h()},onClose:de,title:"Rename Session",get actions(){return[(()=>{var T=fr();return T.$$click=de,T})(),(()=>{var T=tf();return T.$$click=z,D(()=>T.disabled=!y().trim()||y().trim()===p()?.title),T})()]},get children(){var T=Hu(),W=T.firstChild;return W.$$keydown=q=>{q.key==="Enter"&&z()},W.$$input=q=>S(q.currentTarget.value),D(()=>W.value=y()),T}}),null),D(()=>Q(H,`flex-1 flex flex-col min-h-0 transition-opacity duration-300 w-[280px] ${e.isCollapsed?"opacity-0 pointer-events-none":"opacity-100"}`)),w})()}Ye(["click","input","keydown"]);var rf=k('<div class="flex h-screen bg-[var(--bg-primary)] text-zinc-100"><aside></aside><main class="flex-1 overflow-auto"><div class="max-w-4xl mx-auto h-full">');function of(e){const[t,n]=O(!1);return(()=>{var r=rf(),o=r.firstChild,s=o.nextSibling,i=s.firstChild;return b(o,v(nf,{get isCollapsed(){return t()},onToggle:()=>n(!t())})),b(i,()=>e.children),D(()=>Q(o,`bg-[var(--bg-secondary)] border-r border-[var(--border-primary)] flex-shrink-0 transition-all duration-300 overflow-hidden ${t()?"w-[64px]":"w-[280px]"}`)),r})()}class sf{historyEffectInitialized=!1;async sendMessage(t){if(!t||Re.isBusy())return;const n=crypto.randomUUID();E.addMessage({id:n,sender:"user",content:t,isPersistent:!1});const r=crypto.randomUUID();try{let o=null;for await(const s of $s(t,re.currentSessionId()))s.session_id&&!o&&(o=s.session_id),this.handleStreamChunk(s,r);if(o&&o!==re.currentSessionId()){const s=t.split(`
`)[0].trim()||t.trim();re.setPendingTitle(s),re.setSessionId(o)}this.finalizeStreamingResponse(r)}catch(o){console.error("Chat streaming failed:",o),E.updateStreamingContent("Error: Failed to send message")}}async resolveAction(t,n){const o=E.messages().find(l=>l.type==="action_request"&&l.approval_id===n);if(!o||!o.approval_id){console.warn(`Action request with approval_id ${n} not found`);return}const s=t?"approved":"denied";E.updateMessage(o.id,{action_status:s});const i=t?"approve":"deny",a=re.currentSessionId();if(!a){console.warn("Global-scope action resolution not yet implemented");return}try{const l=crypto.randomUUID();for await(const c of Ss(a,n,i))this.handleStreamChunk(c,l);this.finalizeStreamingResponse(l)}catch(l){console.error("Action resolution failed:",l),E.updateStreamingContent("Error: Failed to resolve action")}}handleStreamChunk(t,n){if(t.type==="action_request")E.addMessage({id:n,sender:"agent",content:t.explanation||t.response||"Action requires approval",handler:"agent",isPersistent:!1,type:"action_request",approval_id:t.approval_id,tool_name:t.tool_name,tool_args:t.tool_args,explanation:t.explanation,action_status:"pending"}),E.clearStreamingContent(),E.setIsThinking(!1);else if(t.type==="tool_use"){const r=crypto.randomUUID();E.addMessage({id:r,sender:"system",content:t.content||"",handler:"system",isPersistent:!1}),E.setIsThinking(!1)}else E.updateStreamingContent(t.response||""),t.response&&t.response.trim().length>0&&E.setIsThinking(!1)}finalizeStreamingResponse(t){const n=E.streamingContent();n&&E.addMessage({id:t,sender:"agent",content:n,isPersistent:!1}),E.clearStreamingContent()}initHistoryLoading(){this.historyEffectInitialized||(this.historyEffectInitialized=!0,Ze(()=>{const t=re.currentSessionId();t?Pr.loadHistory(t).then(n=>{n&&(E.clearMessages(),E.setMessagesList(n))}):E.clearMessages()}))}}const qt=new sf;class af{subscription=null;observer=null;pendingAcks=new Set;debounceTimer;initialize(){this.setupObserver(),this.setupNotifications()}cleanup(){this.subscription&&this.subscription.unsubscribe(),this.observer&&this.observer.disconnect(),this.debounceTimer&&clearTimeout(this.debounceTimer)}observeNotification(t,n){this.observer&&this.observer.observe(t)}setupObserver(){this.observer=new IntersectionObserver(t=>{t.forEach(n=>{if(n.isIntersecting){const r=n.target.getAttribute("data-notification-id");r&&this.pendingAcks.add(r)}}),this.debounceTimer&&clearTimeout(this.debounceTimer),this.debounceTimer=window.setTimeout(()=>{if(this.pendingAcks.size>0){const n=un.activeLease();this.pendingAcks.forEach(r=>{Mu(r,n)}),this.pendingAcks.clear()}},500)},{threshold:.5})}setupNotifications(){this.subscription=ju.subscribe(t=>{if(E.messages().find(o=>o.id===t.id))return;const r={id:t.id,sender:t.routing.handler==="system"?"system":"agent",content:t.content,handler:t.routing.handler,isPersistent:!0};E.addMessage(r)})}}const Wt=new af;var dr=k("<div class=block><span>:</span> "),vo=k("<div class=block>"),yo=k('<span class="text-xs font-mono">'),lf=k('<div class="flex items-center gap-2"><span class="text-[var(--json-key-color)] font-medium ">'),_o=k('<div class="font-mono text-xs mt-1">'),ko=k("<div class=ml-4>"),wo=k("<div><div class=mb-1>"),xo=k('<span class="font-mono text-xs">'),$o=k("<div class=space-y-3>"),hr=k('<div class=block><span class="text-[var(--color-primary)]/60 ">.</span> '),cf=k('<div class="flex items-center gap-2"><span class="text-[var(--color-primary)]/60 flex-shrink-0">'),uf=k('<span class="text-gray-500 italic font-mono">null'),ff=k('<span class="text-[var(--color-primary-highlight)] font-mono">"<!>"'),df=k("<span>"),pr=k('<span class="text-[var(--color-primary)] font-mono">');const Sn=e=>{const t=()=>e.depth??0;return Array.isArray(e.value)?v(mf,{get value(){return e.value},get depth(){return t()},get onCollapse(){return e.onCollapse}}):typeof e.value=="object"&&e.value!==null?v(pf,{get value(){return e.value},get depth(){return t()},get onCollapse(){return e.onCollapse}}):v(Ge,{get value(){return e.value}})},hf=e=>{const t=()=>Array.isArray(e.value)||typeof e.value=="object"&&e.value!==null,n=()=>Array.isArray(e.value);if(!t())return e.onCollapse?(()=>{var s=vo();return b(s,v(ue,{onClick:()=>e.onCollapse?.(),get children(){var i=dr(),a=i.firstChild,l=a.firstChild;return a.nextSibling,b(a,()=>e.key,l),b(i,v(Ge,{get value(){return e.value}}),null),D(()=>Q(a,`${t()?"text-[var(--json-key-color)]":"text-[var(--color-primary)]"} font-medium `)),i}})),s})():(()=>{var s=dr(),i=s.firstChild,a=i.firstChild;return i.nextSibling,b(i,()=>e.key,a),b(s,v(Ge,{get value(){return e.value}}),null),D(()=>Q(i,`${t()?"text-[var(--json-key-color)]":"text-[var(--color-primary)]"} font-medium `)),s})();const[r,o]=O(!1);return(()=>{var s=wo(),i=s.firstChild;return b(i,v(ue,{onClick:()=>o(!r()),get children(){var a=lf(),l=a.firstChild;return b(l,()=>e.key),b(a,v(G,{get when(){return!r()},get fallback(){return(()=>{var c=xo();return b(c,()=>n()?"[":"{"),c})()},get children(){var c=yo();return b(c,()=>n()?"[ ... ]":"{ ... }"),c}}),null),a}})),b(s,v(G,{get when(){return r()},get children(){var a=ko();return b(a,v(Sn,{get value(){return e.value},get depth(){return e.depth+1},onCollapse:()=>o(!1)}),null),b(a,v(ue,{onClick:()=>o(!1),get children(){var l=_o();return b(l,()=>n()?"]":"}"),l}}),null),a}}),null),s})()},pf=e=>{const t=()=>Object.entries(e.value);return(()=>{var n=$o();return b(n,v(Et,{get each(){return t()},children:([r,o])=>v(hf,{key:r,value:o,get depth(){return e.depth},get onCollapse(){return e.onCollapse}})})),n})()},gf=e=>{const t=()=>Array.isArray(e.item)||typeof e.item=="object"&&e.item!==null,n=()=>Array.isArray(e.item);if(!t())return e.onCollapse?(()=>{var s=vo();return b(s,v(ue,{onClick:()=>e.onCollapse?.(),get children(){var i=hr(),a=i.firstChild,l=a.firstChild;return a.nextSibling,b(a,()=>e.index,l),b(i,v(Ge,{get value(){return e.item}}),null),i}})),s})():(()=>{var s=hr(),i=s.firstChild,a=i.firstChild;return i.nextSibling,b(i,()=>e.index,a),b(s,v(Ge,{get value(){return e.item}}),null),s})();const[r,o]=O(!1);return(()=>{var s=wo(),i=s.firstChild;return b(i,v(ue,{onClick:()=>o(!r()),get children(){var a=cf(),l=a.firstChild;return b(l,()=>e.index),b(a,v(G,{get when(){return!r()},get fallback(){return(()=>{var c=xo();return b(c,()=>n()?"[":"{"),c})()},get children(){var c=yo();return b(c,()=>n()?"[ ... ]":"{ ... }"),c}}),null),a}})),b(s,v(G,{get when(){return r()},get children(){var a=ko();return b(a,v(Sn,{get value(){return e.item},get depth(){return e.depth+1},onCollapse:()=>o(!1)}),null),b(a,v(ue,{onClick:()=>o(!1),get children(){var l=_o();return b(l,()=>n()?"]":"}"),l}}),null),a}}),null),s})()},mf=e=>(()=>{var t=$o();return b(t,v(Et,{get each(){return e.value},children:(n,r)=>v(gf,{item:n,get index(){return r()},get depth(){return e.depth},get onCollapse(){return e.onCollapse}})})),t})(),Ge=e=>e.value===null?uf():typeof e.value=="string"?(()=>{var t=ff(),n=t.firstChild,r=n.nextSibling;return r.nextSibling,b(t,()=>e.value,r),t})():typeof e.value=="boolean"?(()=>{var t=df();return b(t,()=>String(e.value)),D(()=>Q(t,`${e.value?"text-green-300":"text-red-300"} font-mono`)),t})():typeof e.value=="number"?(()=>{var t=pr();return b(t,()=>e.value),t})():(()=>{var t=pr();return b(t,()=>String(e.value)),t})();var bf=k('<div class="w-full px-1 sm:px-2"style=user-select:none;-webkit-user-select:none;-moz-user-select:none><div class="border border-[var(--border-secondary)] bg-[var(--bg-secondary)] rounded-md p-4"><div class="text-[var(--color-primary-highlight)] text-xs uppercase tracking-wide font-semibold">Action <!>: '),vf=k('<div class="w-full px-1 sm:px-2"style=user-select:none;-webkit-user-select:none;-moz-user-select:none><div class="mmcp-border-trail border border-[var(--border-secondary)] bg-[var(--bg-secondary)] rounded-md p-4 space-y-4"><div class="text-[var(--color-primary-highlight)] text-xs mb-2 uppercase tracking-wide font-semibold">Action Request: </div><p class="text-[var(--color-primary)] text-sm"></p><div class="flex gap-2"><button class="bg-[var(--color-primary-highlight)] hover:brightness-110 text-[var(--bg-primary)] px-4 py-2 font-medium transition-all rounded cursor-pointer">APPROVE</button><button class="border border-[var(--border-secondary)] hover:bg-[var(--bg-tertiary)] text-[var(--color-primary)] px-4 py-2 transition-colors rounded cursor-pointer">DENY'),yf=k('<div class="bg-[var(--bg-primary)] p-3 border border-[var(--border-secondary)] rounded">');const _f=e=>{const[t,n]=O(!1),r=()=>e.status||"pending";return r()!=="pending"?(()=>{var s=bf(),i=s.firstChild,a=i.firstChild,l=a.firstChild,c=l.nextSibling;return c.nextSibling,b(a,()=>r()==="approved"?"Approved":"Denied",c),b(a,()=>e.toolName,null),s})():(()=>{var s=vf(),i=s.firstChild,a=i.firstChild;a.firstChild;var l=a.nextSibling,c=l.nextSibling,u=c.firstChild,f=u.nextSibling;return b(a,()=>e.toolName,null),b(l,()=>e.explanation),u.$$click=()=>e.onResolve(!0,e.approvalId),f.$$click=()=>e.onResolve(!1,e.approvalId),b(c,v(ue,{onClick:()=>n(!t()),class:"ml-auto",get children(){return t()?"Hide action details":"Show action details"}}),null),b(i,(()=>{var h=Gt(()=>!!t());return()=>h()&&(()=>{var d=yf();return b(d,v(Sn,{get value(){return e.toolArgs}})),d})()})(),null),s})()};Ye(["click"]);var kf=k('<div class="relative w-full max-w-2xl pointer-events-auto"><textarea rows=1 class="w-full bg-[var(--bg-secondary)] border border-[var(--border-primary)] rounded-2xl px-4 py-3 pr-12 focus:outline-none disabled:cursor-not-allowed text-zinc-100 placeholder-zinc-500 resize-none overflow-hidden break-words select-none"style=min-height:48px;max-height:200px></textarea><button class="absolute right-2 top-1/2 -translate-y-1/2 flex items-center justify-center w-9 h-9 text-zinc-400 disabled:opacity-30 transition-colors cursor-pointer disabled:cursor-default"><svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"stroke-width=2 stroke-linecap=round stroke-linejoin=round><path d="M18 15l-6-6-6 6">');function wf(e){const[t,n]=O("");let r;const o=()=>e.disabled||!t().trim(),s=()=>{if(r){r.style.height="auto";const c=Math.min(r.scrollHeight,200);r.style.height=`${c}px`}},i=c=>{const u=c.currentTarget;n(u.value),s()},a=()=>{const c=t().trim();!c||e.disabled||(e.onSend(c),n(""),r&&(r.style.height="auto"))},l=c=>{c.key==="Enter"&&!c.shiftKey&&(c.preventDefault(),a())};return Ke(()=>{r&&s()}),(()=>{var c=kf(),u=c.firstChild,f=u.nextSibling;u.addEventListener("keypress",l),u.$$input=i;var h=r;return typeof h=="function"?Ot(h,u):r=u,f.$$click=a,D(d=>{var p=e.placeholder||"",m=e.disabled,y=o(),S={"hover:text-zinc-100":!o()};return p!==d.e&&gt(u,"placeholder",d.e=p),m!==d.t&&(u.disabled=d.t=m),y!==d.a&&(f.disabled=d.a=y),d.o=gn(f,S,d.o),d},{e:void 0,t:void 0,a:void 0,o:void 0}),D(()=>u.value=t()),c})()}Ye(["input","click"]);function zn(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}var Oe=zn();function So(e){Oe=e}var qe={exec:()=>null};function A(e,t=""){let n=typeof e=="string"?e:e.source,r={replace:(o,s)=>{let i=typeof s=="string"?s:s.source;return i=i.replace(X.caret,"$1"),n=n.replace(o,i),r},getRegex:()=>new RegExp(n,t)};return r}var xf=(()=>{try{return!!new RegExp("(?<=1)(?<!1)")}catch{return!1}})(),X={codeRemoveIndent:/^(?: {1,4}| {0,3}\t)/gm,outputLinkReplace:/\\([\[\]])/g,indentCodeCompensation:/^(\s+)(?:```)/,beginningSpace:/^\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\n/g,tabCharGlobal:/\t/g,multipleSpaceGlobal:/\s+/g,blankLine:/^[ \t]*$/,doubleBlankLine:/\n[ \t]*\n[ \t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \t]?/gm,listReplaceTabs:/^\t+/,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\[[ xX]\] +\S/,listReplaceTask:/^\[[ xX]\] +/,listTaskCheckbox:/\[[ xX]\]/,anyLine:/\n.*\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\||\| *$/g,tableRowBlankLine:/\n[ \t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\s|>)/i,endPreScriptTag:/^<\/(pre|code|kbd|script)(\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'"]*[^\s])\s+(['"])(.*)\2/,unicodeAlphaNumeric:/[\p{L}\p{N}]/u,escapeTest:/[&<>"']/,escapeReplace:/[&<>"']/g,escapeTestNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g,unescapeTest:/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig,caret:/(^|[^\[])\^/g,percentDecode:/%25/g,findPipe:/\|/g,splitPipe:/ \|/,slashPipe:/\\\|/g,carriageReturn:/\r\n|\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\S*/,endingNewline:/\n$/,listItemRegex:e=>new RegExp(`^( {0,3}${e})((?:[	 ][^\\n]*)?(?:\\n|$))`),nextBulletRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),hrRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),fencesBeginRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}(?:\`\`\`|~~~)`),headingBeginRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}#`),htmlBeginRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}<(?:[a-z].*>|!--)`,"i")},$f=/^(?:[ \t]*(?:\n|$))+/,Sf=/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,zf=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,Qe=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,Tf=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,Tn=/(?:[*+-]|\d{1,9}[.)])/,zo=/^(?!bull |blockCode|fences|blockquote|heading|html|table)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html|table))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,To=A(zo).replace(/bull/g,Tn).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/\|table/g,"").getRegex(),Ef=A(zo).replace(/bull/g,Tn).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/table/g,/ {0,3}\|?(?:[:\- ]*\|)+[\:\- ]*\n/).getRegex(),En=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,Of=/^[^\n]+/,On=/(?!\s*\])(?:\\[\s\S]|[^\[\]\\])+/,Af=A(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",On).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),Cf=A(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,Tn).getRegex(),Zt="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",An=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,Pf=A("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$))","i").replace("comment",An).replace("tag",Zt).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),Eo=A(En).replace("hr",Qe).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Zt).getRegex(),If=A(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",Eo).getRegex(),Cn={blockquote:If,code:Sf,def:Af,fences:zf,heading:Tf,hr:Qe,html:Pf,lheading:To,list:Cf,newline:$f,paragraph:Eo,table:qe,text:Of},gr=A("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",Qe).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}	)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Zt).getRegex(),Zf={...Cn,lheading:Ef,table:gr,paragraph:A(En).replace("hr",Qe).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",gr).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Zt).getRegex()},Rf={...Cn,html:A(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",An).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:qe,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:A(En).replace("hr",Qe).replace("heading",` *#{1,6} *[^
]`).replace("lheading",To).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},Nf=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,jf=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,Oo=/^( {2,}|\\)\n(?!\s*$)/,Mf=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,Rt=/[\p{P}\p{S}]/u,Pn=/[\s\p{P}\p{S}]/u,Ao=/[^\s\p{P}\p{S}]/u,Lf=A(/^((?![*_])punctSpace)/,"u").replace(/punctSpace/g,Pn).getRegex(),Co=/(?!~)[\p{P}\p{S}]/u,Df=/(?!~)[\s\p{P}\p{S}]/u,Uf=/(?:[^\s\p{P}\p{S}]|~)/u,Ff=A(/link|precode-code|html/,"g").replace("link",/\[(?:[^\[\]`]|(?<a>`+)[^`]+\k<a>(?!`))*?\]\((?:\\[\s\S]|[^\\\(\)]|\((?:\\[\s\S]|[^\\\(\)])*\))*\)/).replace("precode-",xf?"(?<!`)()":"(^^|[^`])").replace("code",/(?<b>`+)[^`]+\k<b>(?!`)/).replace("html",/<(?! )[^<>]*?>/).getRegex(),Po=/^(?:\*+(?:((?!\*)punct)|[^\s*]))|^_+(?:((?!_)punct)|([^\s_]))/,Bf=A(Po,"u").replace(/punct/g,Rt).getRegex(),Jf=A(Po,"u").replace(/punct/g,Co).getRegex(),Io="^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)punct(\\*+)(?=[\\s]|$)|notPunctSpace(\\*+)(?!\\*)(?=punctSpace|$)|(?!\\*)punctSpace(\\*+)(?=notPunctSpace)|[\\s](\\*+)(?!\\*)(?=punct)|(?!\\*)punct(\\*+)(?!\\*)(?=punct)|notPunctSpace(\\*+)(?=notPunctSpace)",Vf=A(Io,"gu").replace(/notPunctSpace/g,Ao).replace(/punctSpace/g,Pn).replace(/punct/g,Rt).getRegex(),qf=A(Io,"gu").replace(/notPunctSpace/g,Uf).replace(/punctSpace/g,Df).replace(/punct/g,Co).getRegex(),Wf=A("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)","gu").replace(/notPunctSpace/g,Ao).replace(/punctSpace/g,Pn).replace(/punct/g,Rt).getRegex(),Hf=A(/\\(punct)/,"gu").replace(/punct/g,Rt).getRegex(),Gf=A(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),Kf=A(An).replace("(?:-->|$)","-->").getRegex(),Yf=A("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",Kf).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),xt=/(?:\[(?:\\[\s\S]|[^\[\]\\])*\]|\\[\s\S]|`+[^`]*?`+(?!`)|[^\[\]\\`])*?/,Xf=A(/^!?\[(label)\]\(\s*(href)(?:(?:[ \t]*(?:\n[ \t]*)?)(title))?\s*\)/).replace("label",xt).replace("href",/<(?:\\.|[^\n<>\\])+>|[^ \t\n\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),Zo=A(/^!?\[(label)\]\[(ref)\]/).replace("label",xt).replace("ref",On).getRegex(),Ro=A(/^!?\[(ref)\](?:\[\])?/).replace("ref",On).getRegex(),Qf=A("reflink|nolink(?!\\()","g").replace("reflink",Zo).replace("nolink",Ro).getRegex(),mr=/[hH][tT][tT][pP][sS]?|[fF][tT][pP]/,In={_backpedal:qe,anyPunctuation:Hf,autolink:Gf,blockSkip:Ff,br:Oo,code:jf,del:qe,emStrongLDelim:Bf,emStrongRDelimAst:Vf,emStrongRDelimUnd:Wf,escape:Nf,link:Xf,nolink:Ro,punctuation:Lf,reflink:Zo,reflinkSearch:Qf,tag:Yf,text:Mf,url:qe},ed={...In,link:A(/^!?\[(label)\]\((.*?)\)/).replace("label",xt).getRegex(),reflink:A(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",xt).getRegex()},fn={...In,emStrongRDelimAst:qf,emStrongLDelim:Jf,url:A(/^((?:protocol):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/).replace("protocol",mr).replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\[\s\S]|[^\\])*?(?:\\[\s\S]|[^\s~\\]))\1(?=[^~]|$)/,text:A(/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|protocol:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/).replace("protocol",mr).getRegex()},td={...fn,br:A(Oo).replace("{2,}","*").getRegex(),text:A(fn.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},it={normal:Cn,gfm:Zf,pedantic:Rf},Fe={normal:In,gfm:fn,breaks:td,pedantic:ed},nd={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},br=e=>nd[e];function he(e,t){if(t){if(X.escapeTest.test(e))return e.replace(X.escapeReplace,br)}else if(X.escapeTestNoEncode.test(e))return e.replace(X.escapeReplaceNoEncode,br);return e}function vr(e){try{e=encodeURI(e).replace(X.percentDecode,"%")}catch{return null}return e}function yr(e,t){let n=e.replace(X.findPipe,(s,i,a)=>{let l=!1,c=i;for(;--c>=0&&a[c]==="\\";)l=!l;return l?"|":" |"}),r=n.split(X.splitPipe),o=0;if(r[0].trim()||r.shift(),r.length>0&&!r.at(-1)?.trim()&&r.pop(),t)if(r.length>t)r.splice(t);else for(;r.length<t;)r.push("");for(;o<r.length;o++)r[o]=r[o].trim().replace(X.slashPipe,"|");return r}function Be(e,t,n){let r=e.length;if(r===0)return"";let o=0;for(;o<r&&e.charAt(r-o-1)===t;)o++;return e.slice(0,r-o)}function rd(e,t){if(e.indexOf(t[1])===-1)return-1;let n=0;for(let r=0;r<e.length;r++)if(e[r]==="\\")r++;else if(e[r]===t[0])n++;else if(e[r]===t[1]&&(n--,n<0))return r;return n>0?-2:-1}function _r(e,t,n,r,o){let s=t.href,i=t.title||null,a=e[1].replace(o.other.outputLinkReplace,"$1");r.state.inLink=!0;let l={type:e[0].charAt(0)==="!"?"image":"link",raw:n,href:s,title:i,text:a,tokens:r.inlineTokens(a)};return r.state.inLink=!1,l}function od(e,t,n){let r=e.match(n.other.indentCodeCompensation);if(r===null)return t;let o=r[1];return t.split(`
`).map(s=>{let i=s.match(n.other.beginningSpace);if(i===null)return s;let[a]=i;return a.length>=o.length?s.slice(o.length):s}).join(`
`)}var $t=class{options;rules;lexer;constructor(e){this.options=e||Oe}space(e){let t=this.rules.block.newline.exec(e);if(t&&t[0].length>0)return{type:"space",raw:t[0]}}code(e){let t=this.rules.block.code.exec(e);if(t){let n=t[0].replace(this.rules.other.codeRemoveIndent,"");return{type:"code",raw:t[0],codeBlockStyle:"indented",text:this.options.pedantic?n:Be(n,`
`)}}}fences(e){let t=this.rules.block.fences.exec(e);if(t){let n=t[0],r=od(n,t[3]||"",this.rules);return{type:"code",raw:n,lang:t[2]?t[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):t[2],text:r}}}heading(e){let t=this.rules.block.heading.exec(e);if(t){let n=t[2].trim();if(this.rules.other.endingHash.test(n)){let r=Be(n,"#");(this.options.pedantic||!r||this.rules.other.endingSpaceChar.test(r))&&(n=r.trim())}return{type:"heading",raw:t[0],depth:t[1].length,text:n,tokens:this.lexer.inline(n)}}}hr(e){let t=this.rules.block.hr.exec(e);if(t)return{type:"hr",raw:Be(t[0],`
`)}}blockquote(e){let t=this.rules.block.blockquote.exec(e);if(t){let n=Be(t[0],`
`).split(`
`),r="",o="",s=[];for(;n.length>0;){let i=!1,a=[],l;for(l=0;l<n.length;l++)if(this.rules.other.blockquoteStart.test(n[l]))a.push(n[l]),i=!0;else if(!i)a.push(n[l]);else break;n=n.slice(l);let c=a.join(`
`),u=c.replace(this.rules.other.blockquoteSetextReplace,`
    $1`).replace(this.rules.other.blockquoteSetextReplace2,"");r=r?`${r}
${c}`:c,o=o?`${o}
${u}`:u;let f=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(u,s,!0),this.lexer.state.top=f,n.length===0)break;let h=s.at(-1);if(h?.type==="code")break;if(h?.type==="blockquote"){let d=h,p=d.raw+`
`+n.join(`
`),m=this.blockquote(p);s[s.length-1]=m,r=r.substring(0,r.length-d.raw.length)+m.raw,o=o.substring(0,o.length-d.text.length)+m.text;break}else if(h?.type==="list"){let d=h,p=d.raw+`
`+n.join(`
`),m=this.list(p);s[s.length-1]=m,r=r.substring(0,r.length-h.raw.length)+m.raw,o=o.substring(0,o.length-d.raw.length)+m.raw,n=p.substring(s.at(-1).raw.length).split(`
`);continue}}return{type:"blockquote",raw:r,tokens:s,text:o}}}list(e){let t=this.rules.block.list.exec(e);if(t){let n=t[1].trim(),r=n.length>1,o={type:"list",raw:"",ordered:r,start:r?+n.slice(0,-1):"",loose:!1,items:[]};n=r?`\\d{1,9}\\${n.slice(-1)}`:`\\${n}`,this.options.pedantic&&(n=r?n:"[*+-]");let s=this.rules.other.listItemRegex(n),i=!1;for(;e;){let l=!1,c="",u="";if(!(t=s.exec(e))||this.rules.block.hr.test(e))break;c=t[0],e=e.substring(c.length);let f=t[2].split(`
`,1)[0].replace(this.rules.other.listReplaceTabs,m=>" ".repeat(3*m.length)),h=e.split(`
`,1)[0],d=!f.trim(),p=0;if(this.options.pedantic?(p=2,u=f.trimStart()):d?p=t[1].length+1:(p=t[2].search(this.rules.other.nonSpaceChar),p=p>4?1:p,u=f.slice(p),p+=t[1].length),d&&this.rules.other.blankLine.test(h)&&(c+=h+`
`,e=e.substring(h.length+1),l=!0),!l){let m=this.rules.other.nextBulletRegex(p),y=this.rules.other.hrRegex(p),S=this.rules.other.fencesBeginRegex(p),C=this.rules.other.headingBeginRegex(p),$=this.rules.other.htmlBeginRegex(p);for(;e;){let x=e.split(`
`,1)[0],z;if(h=x,this.options.pedantic?(h=h.replace(this.rules.other.listReplaceNesting,"  "),z=h):z=h.replace(this.rules.other.tabCharGlobal,"    "),S.test(h)||C.test(h)||$.test(h)||m.test(h)||y.test(h))break;if(z.search(this.rules.other.nonSpaceChar)>=p||!h.trim())u+=`
`+z.slice(p);else{if(d||f.replace(this.rules.other.tabCharGlobal,"    ").search(this.rules.other.nonSpaceChar)>=4||S.test(f)||C.test(f)||y.test(f))break;u+=`
`+h}!d&&!h.trim()&&(d=!0),c+=x+`
`,e=e.substring(x.length+1),f=z.slice(p)}}o.loose||(i?o.loose=!0:this.rules.other.doubleBlankLine.test(c)&&(i=!0)),o.items.push({type:"list_item",raw:c,task:!!this.options.gfm&&this.rules.other.listIsTask.test(u),loose:!1,text:u,tokens:[]}),o.raw+=c}let a=o.items.at(-1);if(a)a.raw=a.raw.trimEnd(),a.text=a.text.trimEnd();else return;o.raw=o.raw.trimEnd();for(let l of o.items){if(this.lexer.state.top=!1,l.tokens=this.lexer.blockTokens(l.text,[]),l.task){if(l.text=l.text.replace(this.rules.other.listReplaceTask,""),l.tokens[0]?.type==="text"||l.tokens[0]?.type==="paragraph"){l.tokens[0].raw=l.tokens[0].raw.replace(this.rules.other.listReplaceTask,""),l.tokens[0].text=l.tokens[0].text.replace(this.rules.other.listReplaceTask,"");for(let u=this.lexer.inlineQueue.length-1;u>=0;u--)if(this.rules.other.listIsTask.test(this.lexer.inlineQueue[u].src)){this.lexer.inlineQueue[u].src=this.lexer.inlineQueue[u].src.replace(this.rules.other.listReplaceTask,"");break}}let c=this.rules.other.listTaskCheckbox.exec(l.raw);if(c){let u={type:"checkbox",raw:c[0]+" ",checked:c[0]!=="[ ]"};l.checked=u.checked,o.loose?l.tokens[0]&&["paragraph","text"].includes(l.tokens[0].type)&&"tokens"in l.tokens[0]&&l.tokens[0].tokens?(l.tokens[0].raw=u.raw+l.tokens[0].raw,l.tokens[0].text=u.raw+l.tokens[0].text,l.tokens[0].tokens.unshift(u)):l.tokens.unshift({type:"paragraph",raw:u.raw,text:u.raw,tokens:[u]}):l.tokens.unshift(u)}}if(!o.loose){let c=l.tokens.filter(f=>f.type==="space"),u=c.length>0&&c.some(f=>this.rules.other.anyLine.test(f.raw));o.loose=u}}if(o.loose)for(let l of o.items){l.loose=!0;for(let c of l.tokens)c.type==="text"&&(c.type="paragraph")}return o}}html(e){let t=this.rules.block.html.exec(e);if(t)return{type:"html",block:!0,raw:t[0],pre:t[1]==="pre"||t[1]==="script"||t[1]==="style",text:t[0]}}def(e){let t=this.rules.block.def.exec(e);if(t){let n=t[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal," "),r=t[2]?t[2].replace(this.rules.other.hrefBrackets,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",o=t[3]?t[3].substring(1,t[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):t[3];return{type:"def",tag:n,raw:t[0],href:r,title:o}}}table(e){let t=this.rules.block.table.exec(e);if(!t||!this.rules.other.tableDelimiter.test(t[2]))return;let n=yr(t[1]),r=t[2].replace(this.rules.other.tableAlignChars,"").split("|"),o=t[3]?.trim()?t[3].replace(this.rules.other.tableRowBlankLine,"").split(`
`):[],s={type:"table",raw:t[0],header:[],align:[],rows:[]};if(n.length===r.length){for(let i of r)this.rules.other.tableAlignRight.test(i)?s.align.push("right"):this.rules.other.tableAlignCenter.test(i)?s.align.push("center"):this.rules.other.tableAlignLeft.test(i)?s.align.push("left"):s.align.push(null);for(let i=0;i<n.length;i++)s.header.push({text:n[i],tokens:this.lexer.inline(n[i]),header:!0,align:s.align[i]});for(let i of o)s.rows.push(yr(i,s.header.length).map((a,l)=>({text:a,tokens:this.lexer.inline(a),header:!1,align:s.align[l]})));return s}}lheading(e){let t=this.rules.block.lheading.exec(e);if(t)return{type:"heading",raw:t[0],depth:t[2].charAt(0)==="="?1:2,text:t[1],tokens:this.lexer.inline(t[1])}}paragraph(e){let t=this.rules.block.paragraph.exec(e);if(t){let n=t[1].charAt(t[1].length-1)===`
`?t[1].slice(0,-1):t[1];return{type:"paragraph",raw:t[0],text:n,tokens:this.lexer.inline(n)}}}text(e){let t=this.rules.block.text.exec(e);if(t)return{type:"text",raw:t[0],text:t[0],tokens:this.lexer.inline(t[0])}}escape(e){let t=this.rules.inline.escape.exec(e);if(t)return{type:"escape",raw:t[0],text:t[1]}}tag(e){let t=this.rules.inline.tag.exec(e);if(t)return!this.lexer.state.inLink&&this.rules.other.startATag.test(t[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&this.rules.other.endATag.test(t[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(t[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(t[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:t[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:t[0]}}link(e){let t=this.rules.inline.link.exec(e);if(t){let n=t[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(n)){if(!this.rules.other.endAngleBracket.test(n))return;let s=Be(n.slice(0,-1),"\\");if((n.length-s.length)%2===0)return}else{let s=rd(t[2],"()");if(s===-2)return;if(s>-1){let i=(t[0].indexOf("!")===0?5:4)+t[1].length+s;t[2]=t[2].substring(0,s),t[0]=t[0].substring(0,i).trim(),t[3]=""}}let r=t[2],o="";if(this.options.pedantic){let s=this.rules.other.pedanticHrefTitle.exec(r);s&&(r=s[1],o=s[3])}else o=t[3]?t[3].slice(1,-1):"";return r=r.trim(),this.rules.other.startAngleBracket.test(r)&&(this.options.pedantic&&!this.rules.other.endAngleBracket.test(n)?r=r.slice(1):r=r.slice(1,-1)),_r(t,{href:r&&r.replace(this.rules.inline.anyPunctuation,"$1"),title:o&&o.replace(this.rules.inline.anyPunctuation,"$1")},t[0],this.lexer,this.rules)}}reflink(e,t){let n;if((n=this.rules.inline.reflink.exec(e))||(n=this.rules.inline.nolink.exec(e))){let r=(n[2]||n[1]).replace(this.rules.other.multipleSpaceGlobal," "),o=t[r.toLowerCase()];if(!o){let s=n[0].charAt(0);return{type:"text",raw:s,text:s}}return _r(n,o,n[0],this.lexer,this.rules)}}emStrong(e,t,n=""){let r=this.rules.inline.emStrongLDelim.exec(e);if(!(!r||r[3]&&n.match(this.rules.other.unicodeAlphaNumeric))&&(!(r[1]||r[2])||!n||this.rules.inline.punctuation.exec(n))){let o=[...r[0]].length-1,s,i,a=o,l=0,c=r[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(c.lastIndex=0,t=t.slice(-1*e.length+o);(r=c.exec(t))!=null;){if(s=r[1]||r[2]||r[3]||r[4]||r[5]||r[6],!s)continue;if(i=[...s].length,r[3]||r[4]){a+=i;continue}else if((r[5]||r[6])&&o%3&&!((o+i)%3)){l+=i;continue}if(a-=i,a>0)continue;i=Math.min(i,i+a+l);let u=[...r[0]][0].length,f=e.slice(0,o+r.index+u+i);if(Math.min(o,i)%2){let d=f.slice(1,-1);return{type:"em",raw:f,text:d,tokens:this.lexer.inlineTokens(d)}}let h=f.slice(2,-2);return{type:"strong",raw:f,text:h,tokens:this.lexer.inlineTokens(h)}}}}codespan(e){let t=this.rules.inline.code.exec(e);if(t){let n=t[2].replace(this.rules.other.newLineCharGlobal," "),r=this.rules.other.nonSpaceChar.test(n),o=this.rules.other.startingSpaceChar.test(n)&&this.rules.other.endingSpaceChar.test(n);return r&&o&&(n=n.substring(1,n.length-1)),{type:"codespan",raw:t[0],text:n}}}br(e){let t=this.rules.inline.br.exec(e);if(t)return{type:"br",raw:t[0]}}del(e){let t=this.rules.inline.del.exec(e);if(t)return{type:"del",raw:t[0],text:t[2],tokens:this.lexer.inlineTokens(t[2])}}autolink(e){let t=this.rules.inline.autolink.exec(e);if(t){let n,r;return t[2]==="@"?(n=t[1],r="mailto:"+n):(n=t[1],r=n),{type:"link",raw:t[0],text:n,href:r,tokens:[{type:"text",raw:n,text:n}]}}}url(e){let t;if(t=this.rules.inline.url.exec(e)){let n,r;if(t[2]==="@")n=t[0],r="mailto:"+n;else{let o;do o=t[0],t[0]=this.rules.inline._backpedal.exec(t[0])?.[0]??"";while(o!==t[0]);n=t[0],t[1]==="www."?r="http://"+t[0]:r=t[0]}return{type:"link",raw:t[0],text:n,href:r,tokens:[{type:"text",raw:n,text:n}]}}}inlineText(e){let t=this.rules.inline.text.exec(e);if(t){let n=this.lexer.state.inRawBlock;return{type:"text",raw:t[0],text:t[0],escaped:n}}}},se=class dn{tokens;options;state;inlineQueue;tokenizer;constructor(t){this.tokens=[],this.tokens.links=Object.create(null),this.options=t||Oe,this.options.tokenizer=this.options.tokenizer||new $t,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};let n={other:X,block:it.normal,inline:Fe.normal};this.options.pedantic?(n.block=it.pedantic,n.inline=Fe.pedantic):this.options.gfm&&(n.block=it.gfm,this.options.breaks?n.inline=Fe.breaks:n.inline=Fe.gfm),this.tokenizer.rules=n}static get rules(){return{block:it,inline:Fe}}static lex(t,n){return new dn(n).lex(t)}static lexInline(t,n){return new dn(n).inlineTokens(t)}lex(t){t=t.replace(X.carriageReturn,`
`),this.blockTokens(t,this.tokens);for(let n=0;n<this.inlineQueue.length;n++){let r=this.inlineQueue[n];this.inlineTokens(r.src,r.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(t,n=[],r=!1){for(this.options.pedantic&&(t=t.replace(X.tabCharGlobal,"    ").replace(X.spaceLine,""));t;){let o;if(this.options.extensions?.block?.some(i=>(o=i.call({lexer:this},t,n))?(t=t.substring(o.raw.length),n.push(o),!0):!1))continue;if(o=this.tokenizer.space(t)){t=t.substring(o.raw.length);let i=n.at(-1);o.raw.length===1&&i!==void 0?i.raw+=`
`:n.push(o);continue}if(o=this.tokenizer.code(t)){t=t.substring(o.raw.length);let i=n.at(-1);i?.type==="paragraph"||i?.type==="text"?(i.raw+=(i.raw.endsWith(`
`)?"":`
`)+o.raw,i.text+=`
`+o.text,this.inlineQueue.at(-1).src=i.text):n.push(o);continue}if(o=this.tokenizer.fences(t)){t=t.substring(o.raw.length),n.push(o);continue}if(o=this.tokenizer.heading(t)){t=t.substring(o.raw.length),n.push(o);continue}if(o=this.tokenizer.hr(t)){t=t.substring(o.raw.length),n.push(o);continue}if(o=this.tokenizer.blockquote(t)){t=t.substring(o.raw.length),n.push(o);continue}if(o=this.tokenizer.list(t)){t=t.substring(o.raw.length),n.push(o);continue}if(o=this.tokenizer.html(t)){t=t.substring(o.raw.length),n.push(o);continue}if(o=this.tokenizer.def(t)){t=t.substring(o.raw.length);let i=n.at(-1);i?.type==="paragraph"||i?.type==="text"?(i.raw+=(i.raw.endsWith(`
`)?"":`
`)+o.raw,i.text+=`
`+o.raw,this.inlineQueue.at(-1).src=i.text):this.tokens.links[o.tag]||(this.tokens.links[o.tag]={href:o.href,title:o.title},n.push(o));continue}if(o=this.tokenizer.table(t)){t=t.substring(o.raw.length),n.push(o);continue}if(o=this.tokenizer.lheading(t)){t=t.substring(o.raw.length),n.push(o);continue}let s=t;if(this.options.extensions?.startBlock){let i=1/0,a=t.slice(1),l;this.options.extensions.startBlock.forEach(c=>{l=c.call({lexer:this},a),typeof l=="number"&&l>=0&&(i=Math.min(i,l))}),i<1/0&&i>=0&&(s=t.substring(0,i+1))}if(this.state.top&&(o=this.tokenizer.paragraph(s))){let i=n.at(-1);r&&i?.type==="paragraph"?(i.raw+=(i.raw.endsWith(`
`)?"":`
`)+o.raw,i.text+=`
`+o.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=i.text):n.push(o),r=s.length!==t.length,t=t.substring(o.raw.length);continue}if(o=this.tokenizer.text(t)){t=t.substring(o.raw.length);let i=n.at(-1);i?.type==="text"?(i.raw+=(i.raw.endsWith(`
`)?"":`
`)+o.raw,i.text+=`
`+o.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=i.text):n.push(o);continue}if(t){let i="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(i);break}else throw new Error(i)}}return this.state.top=!0,n}inline(t,n=[]){return this.inlineQueue.push({src:t,tokens:n}),n}inlineTokens(t,n=[]){let r=t,o=null;if(this.tokens.links){let l=Object.keys(this.tokens.links);if(l.length>0)for(;(o=this.tokenizer.rules.inline.reflinkSearch.exec(r))!=null;)l.includes(o[0].slice(o[0].lastIndexOf("[")+1,-1))&&(r=r.slice(0,o.index)+"["+"a".repeat(o[0].length-2)+"]"+r.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(o=this.tokenizer.rules.inline.anyPunctuation.exec(r))!=null;)r=r.slice(0,o.index)+"++"+r.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);let s;for(;(o=this.tokenizer.rules.inline.blockSkip.exec(r))!=null;)s=o[2]?o[2].length:0,r=r.slice(0,o.index+s)+"["+"a".repeat(o[0].length-s-2)+"]"+r.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);r=this.options.hooks?.emStrongMask?.call({lexer:this},r)??r;let i=!1,a="";for(;t;){i||(a=""),i=!1;let l;if(this.options.extensions?.inline?.some(u=>(l=u.call({lexer:this},t,n))?(t=t.substring(l.raw.length),n.push(l),!0):!1))continue;if(l=this.tokenizer.escape(t)){t=t.substring(l.raw.length),n.push(l);continue}if(l=this.tokenizer.tag(t)){t=t.substring(l.raw.length),n.push(l);continue}if(l=this.tokenizer.link(t)){t=t.substring(l.raw.length),n.push(l);continue}if(l=this.tokenizer.reflink(t,this.tokens.links)){t=t.substring(l.raw.length);let u=n.at(-1);l.type==="text"&&u?.type==="text"?(u.raw+=l.raw,u.text+=l.text):n.push(l);continue}if(l=this.tokenizer.emStrong(t,r,a)){t=t.substring(l.raw.length),n.push(l);continue}if(l=this.tokenizer.codespan(t)){t=t.substring(l.raw.length),n.push(l);continue}if(l=this.tokenizer.br(t)){t=t.substring(l.raw.length),n.push(l);continue}if(l=this.tokenizer.del(t)){t=t.substring(l.raw.length),n.push(l);continue}if(l=this.tokenizer.autolink(t)){t=t.substring(l.raw.length),n.push(l);continue}if(!this.state.inLink&&(l=this.tokenizer.url(t))){t=t.substring(l.raw.length),n.push(l);continue}let c=t;if(this.options.extensions?.startInline){let u=1/0,f=t.slice(1),h;this.options.extensions.startInline.forEach(d=>{h=d.call({lexer:this},f),typeof h=="number"&&h>=0&&(u=Math.min(u,h))}),u<1/0&&u>=0&&(c=t.substring(0,u+1))}if(l=this.tokenizer.inlineText(c)){t=t.substring(l.raw.length),l.raw.slice(-1)!=="_"&&(a=l.raw.slice(-1)),i=!0;let u=n.at(-1);u?.type==="text"?(u.raw+=l.raw,u.text+=l.text):n.push(l);continue}if(t){let u="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(u);break}else throw new Error(u)}}return n}},St=class{options;parser;constructor(e){this.options=e||Oe}space(e){return""}code({text:e,lang:t,escaped:n}){let r=(t||"").match(X.notSpaceStart)?.[0],o=e.replace(X.endingNewline,"")+`
`;return r?'<pre><code class="language-'+he(r)+'">'+(n?o:he(o,!0))+`</code></pre>
`:"<pre><code>"+(n?o:he(o,!0))+`</code></pre>
`}blockquote({tokens:e}){return`<blockquote>
${this.parser.parse(e)}</blockquote>
`}html({text:e}){return e}def(e){return""}heading({tokens:e,depth:t}){return`<h${t}>${this.parser.parseInline(e)}</h${t}>
`}hr(e){return`<hr>
`}list(e){let t=e.ordered,n=e.start,r="";for(let i=0;i<e.items.length;i++){let a=e.items[i];r+=this.listitem(a)}let o=t?"ol":"ul",s=t&&n!==1?' start="'+n+'"':"";return"<"+o+s+`>
`+r+"</"+o+`>
`}listitem(e){return`<li>${this.parser.parse(e.tokens)}</li>
`}checkbox({checked:e}){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox"> '}paragraph({tokens:e}){return`<p>${this.parser.parseInline(e)}</p>
`}table(e){let t="",n="";for(let o=0;o<e.header.length;o++)n+=this.tablecell(e.header[o]);t+=this.tablerow({text:n});let r="";for(let o=0;o<e.rows.length;o++){let s=e.rows[o];n="";for(let i=0;i<s.length;i++)n+=this.tablecell(s[i]);r+=this.tablerow({text:n})}return r&&(r=`<tbody>${r}</tbody>`),`<table>
<thead>
`+t+`</thead>
`+r+`</table>
`}tablerow({text:e}){return`<tr>
${e}</tr>
`}tablecell(e){let t=this.parser.parseInline(e.tokens),n=e.header?"th":"td";return(e.align?`<${n} align="${e.align}">`:`<${n}>`)+t+`</${n}>
`}strong({tokens:e}){return`<strong>${this.parser.parseInline(e)}</strong>`}em({tokens:e}){return`<em>${this.parser.parseInline(e)}</em>`}codespan({text:e}){return`<code>${he(e,!0)}</code>`}br(e){return"<br>"}del({tokens:e}){return`<del>${this.parser.parseInline(e)}</del>`}link({href:e,title:t,tokens:n}){let r=this.parser.parseInline(n),o=vr(e);if(o===null)return r;e=o;let s='<a href="'+e+'"';return t&&(s+=' title="'+he(t)+'"'),s+=">"+r+"</a>",s}image({href:e,title:t,text:n,tokens:r}){r&&(n=this.parser.parseInline(r,this.parser.textRenderer));let o=vr(e);if(o===null)return he(n);e=o;let s=`<img src="${e}" alt="${n}"`;return t&&(s+=` title="${he(t)}"`),s+=">",s}text(e){return"tokens"in e&&e.tokens?this.parser.parseInline(e.tokens):"escaped"in e&&e.escaped?e.text:he(e.text)}},Zn=class{strong({text:e}){return e}em({text:e}){return e}codespan({text:e}){return e}del({text:e}){return e}html({text:e}){return e}text({text:e}){return e}link({text:e}){return""+e}image({text:e}){return""+e}br(){return""}checkbox({raw:e}){return e}},ie=class hn{options;renderer;textRenderer;constructor(t){this.options=t||Oe,this.options.renderer=this.options.renderer||new St,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new Zn}static parse(t,n){return new hn(n).parse(t)}static parseInline(t,n){return new hn(n).parseInline(t)}parse(t){let n="";for(let r=0;r<t.length;r++){let o=t[r];if(this.options.extensions?.renderers?.[o.type]){let i=o,a=this.options.extensions.renderers[i.type].call({parser:this},i);if(a!==!1||!["space","hr","heading","code","table","blockquote","list","html","def","paragraph","text"].includes(i.type)){n+=a||"";continue}}let s=o;switch(s.type){case"space":{n+=this.renderer.space(s);break}case"hr":{n+=this.renderer.hr(s);break}case"heading":{n+=this.renderer.heading(s);break}case"code":{n+=this.renderer.code(s);break}case"table":{n+=this.renderer.table(s);break}case"blockquote":{n+=this.renderer.blockquote(s);break}case"list":{n+=this.renderer.list(s);break}case"checkbox":{n+=this.renderer.checkbox(s);break}case"html":{n+=this.renderer.html(s);break}case"def":{n+=this.renderer.def(s);break}case"paragraph":{n+=this.renderer.paragraph(s);break}case"text":{n+=this.renderer.text(s);break}default:{let i='Token with "'+s.type+'" type was not found.';if(this.options.silent)return console.error(i),"";throw new Error(i)}}}return n}parseInline(t,n=this.renderer){let r="";for(let o=0;o<t.length;o++){let s=t[o];if(this.options.extensions?.renderers?.[s.type]){let a=this.options.extensions.renderers[s.type].call({parser:this},s);if(a!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(s.type)){r+=a||"";continue}}let i=s;switch(i.type){case"escape":{r+=n.text(i);break}case"html":{r+=n.html(i);break}case"link":{r+=n.link(i);break}case"image":{r+=n.image(i);break}case"checkbox":{r+=n.checkbox(i);break}case"strong":{r+=n.strong(i);break}case"em":{r+=n.em(i);break}case"codespan":{r+=n.codespan(i);break}case"br":{r+=n.br(i);break}case"del":{r+=n.del(i);break}case"text":{r+=n.text(i);break}default:{let a='Token with "'+i.type+'" type was not found.';if(this.options.silent)return console.error(a),"";throw new Error(a)}}}return r}},Ve=class{options;block;constructor(e){this.options=e||Oe}static passThroughHooks=new Set(["preprocess","postprocess","processAllTokens","emStrongMask"]);static passThroughHooksRespectAsync=new Set(["preprocess","postprocess","processAllTokens"]);preprocess(e){return e}postprocess(e){return e}processAllTokens(e){return e}emStrongMask(e){return e}provideLexer(){return this.block?se.lex:se.lexInline}provideParser(){return this.block?ie.parse:ie.parseInline}},sd=class{defaults=zn();options=this.setOptions;parse=this.parseMarkdown(!0);parseInline=this.parseMarkdown(!1);Parser=ie;Renderer=St;TextRenderer=Zn;Lexer=se;Tokenizer=$t;Hooks=Ve;constructor(...e){this.use(...e)}walkTokens(e,t){let n=[];for(let r of e)switch(n=n.concat(t.call(this,r)),r.type){case"table":{let o=r;for(let s of o.header)n=n.concat(this.walkTokens(s.tokens,t));for(let s of o.rows)for(let i of s)n=n.concat(this.walkTokens(i.tokens,t));break}case"list":{let o=r;n=n.concat(this.walkTokens(o.items,t));break}default:{let o=r;this.defaults.extensions?.childTokens?.[o.type]?this.defaults.extensions.childTokens[o.type].forEach(s=>{let i=o[s].flat(1/0);n=n.concat(this.walkTokens(i,t))}):o.tokens&&(n=n.concat(this.walkTokens(o.tokens,t)))}}return n}use(...e){let t=this.defaults.extensions||{renderers:{},childTokens:{}};return e.forEach(n=>{let r={...n};if(r.async=this.defaults.async||r.async||!1,n.extensions&&(n.extensions.forEach(o=>{if(!o.name)throw new Error("extension name required");if("renderer"in o){let s=t.renderers[o.name];s?t.renderers[o.name]=function(...i){let a=o.renderer.apply(this,i);return a===!1&&(a=s.apply(this,i)),a}:t.renderers[o.name]=o.renderer}if("tokenizer"in o){if(!o.level||o.level!=="block"&&o.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");let s=t[o.level];s?s.unshift(o.tokenizer):t[o.level]=[o.tokenizer],o.start&&(o.level==="block"?t.startBlock?t.startBlock.push(o.start):t.startBlock=[o.start]:o.level==="inline"&&(t.startInline?t.startInline.push(o.start):t.startInline=[o.start]))}"childTokens"in o&&o.childTokens&&(t.childTokens[o.name]=o.childTokens)}),r.extensions=t),n.renderer){let o=this.defaults.renderer||new St(this.defaults);for(let s in n.renderer){if(!(s in o))throw new Error(`renderer '${s}' does not exist`);if(["options","parser"].includes(s))continue;let i=s,a=n.renderer[i],l=o[i];o[i]=(...c)=>{let u=a.apply(o,c);return u===!1&&(u=l.apply(o,c)),u||""}}r.renderer=o}if(n.tokenizer){let o=this.defaults.tokenizer||new $t(this.defaults);for(let s in n.tokenizer){if(!(s in o))throw new Error(`tokenizer '${s}' does not exist`);if(["options","rules","lexer"].includes(s))continue;let i=s,a=n.tokenizer[i],l=o[i];o[i]=(...c)=>{let u=a.apply(o,c);return u===!1&&(u=l.apply(o,c)),u}}r.tokenizer=o}if(n.hooks){let o=this.defaults.hooks||new Ve;for(let s in n.hooks){if(!(s in o))throw new Error(`hook '${s}' does not exist`);if(["options","block"].includes(s))continue;let i=s,a=n.hooks[i],l=o[i];Ve.passThroughHooks.has(s)?o[i]=c=>{if(this.defaults.async&&Ve.passThroughHooksRespectAsync.has(s))return(async()=>{let f=await a.call(o,c);return l.call(o,f)})();let u=a.call(o,c);return l.call(o,u)}:o[i]=(...c)=>{if(this.defaults.async)return(async()=>{let f=await a.apply(o,c);return f===!1&&(f=await l.apply(o,c)),f})();let u=a.apply(o,c);return u===!1&&(u=l.apply(o,c)),u}}r.hooks=o}if(n.walkTokens){let o=this.defaults.walkTokens,s=n.walkTokens;r.walkTokens=function(i){let a=[];return a.push(s.call(this,i)),o&&(a=a.concat(o.call(this,i))),a}}this.defaults={...this.defaults,...r}}),this}setOptions(e){return this.defaults={...this.defaults,...e},this}lexer(e,t){return se.lex(e,t??this.defaults)}parser(e,t){return ie.parse(e,t??this.defaults)}parseMarkdown(e){return(t,n)=>{let r={...n},o={...this.defaults,...r},s=this.onError(!!o.silent,!!o.async);if(this.defaults.async===!0&&r.async===!1)return s(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof t>"u"||t===null)return s(new Error("marked(): input parameter is undefined or null"));if(typeof t!="string")return s(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(t)+", string expected"));if(o.hooks&&(o.hooks.options=o,o.hooks.block=e),o.async)return(async()=>{let i=o.hooks?await o.hooks.preprocess(t):t,a=await(o.hooks?await o.hooks.provideLexer():e?se.lex:se.lexInline)(i,o),l=o.hooks?await o.hooks.processAllTokens(a):a;o.walkTokens&&await Promise.all(this.walkTokens(l,o.walkTokens));let c=await(o.hooks?await o.hooks.provideParser():e?ie.parse:ie.parseInline)(l,o);return o.hooks?await o.hooks.postprocess(c):c})().catch(s);try{o.hooks&&(t=o.hooks.preprocess(t));let i=(o.hooks?o.hooks.provideLexer():e?se.lex:se.lexInline)(t,o);o.hooks&&(i=o.hooks.processAllTokens(i)),o.walkTokens&&this.walkTokens(i,o.walkTokens);let a=(o.hooks?o.hooks.provideParser():e?ie.parse:ie.parseInline)(i,o);return o.hooks&&(a=o.hooks.postprocess(a)),a}catch(i){return s(i)}}}onError(e,t){return n=>{if(n.message+=`
Please report this to https://github.com/markedjs/marked.`,e){let r="<p>An error occurred:</p><pre>"+he(n.message+"",!0)+"</pre>";return t?Promise.resolve(r):r}if(t)return Promise.reject(n);throw n}}},ze=new sd;function I(e,t){return ze.parse(e,t)}I.options=I.setOptions=function(e){return ze.setOptions(e),I.defaults=ze.defaults,So(I.defaults),I};I.getDefaults=zn;I.defaults=Oe;I.use=function(...e){return ze.use(...e),I.defaults=ze.defaults,So(I.defaults),I};I.walkTokens=function(e,t){return ze.walkTokens(e,t)};I.parseInline=ze.parseInline;I.Parser=ie;I.parser=ie.parse;I.Renderer=St;I.TextRenderer=Zn;I.Lexer=se;I.lexer=se.lex;I.Tokenizer=$t;I.Hooks=Ve;I.parse=I;I.options;I.setOptions;I.use;I.walkTokens;I.parseInline;ie.parse;se.lex;var id=k("<div>");const kr=e=>{const t=()=>e.content??"",n=ge(()=>I.parse(t(),{async:!1}));return(()=>{var r=id();return D(o=>{var s=`mmcp-markdown text-[15px] leading-relaxed ${e.class||""}`.trim(),i=n();return s!==o.e&&Q(r,o.e=s),i!==o.t&&(r.innerHTML=o.t=i),o},{e:void 0,t:void 0}),r})()};var ad=k('<div><div></div><div><div class="px-3 py-2 text-sm rounded-md shadow-lg whitespace-nowrap select-none"style=background:var(--bg-primary);color:var(--color-primary)>');function ld(e){const[t,n]=O(!1);let r,o;const s=()=>e.position||"top",i=()=>{o&&(clearTimeout(o),o=void 0),r=window.setTimeout(()=>{n(!0),r=void 0})},a=()=>{r&&(clearTimeout(r),r=void 0),o=window.setTimeout(()=>{n(!1),o=void 0})};ye(()=>{r&&clearTimeout(r),o&&clearTimeout(o)});const l=()=>{switch(s()){case"top":return"-top-1 left-1/2 transform -translate-x-1/2 -translate-y-full";case"bottom":return"-bottom-1 left-1/2 transform -translate-x-1/2 translate-y-full";case"left":return"-left-1 top-1/2 transform -translate-x-full -translate-y-1/2";case"right":return"-right-1 top-1/2 transform translate-x-full -translate-y-1/2";default:return""}};return(()=>{var c=ad(),u=c.firstChild,f=u.nextSibling,h=f.firstChild;return u.addEventListener("blur",a),u.addEventListener("focus",i),u.addEventListener("mouseleave",a),u.addEventListener("mouseenter",i),b(u,()=>e.children),b(h,()=>e.text),D(d=>{var p=`relative inline-block ${e.class||""}`,m=`absolute z-50 pointer-events-none transition-opacity duration-200 ease-in-out ${l()} ${t()?"opacity-100":"opacity-0"}`;return p!==d.e&&Q(c,d.e=p),m!==d.t&&Q(f,d.t=m),d},{e:void 0,t:void 0}),c})()}var cd=k('<div class="w-full flex justify-start"><div class="px-1 sm:px-2 text-[13px] tracking-wide text-[var(--color-primary-highlight)]/80 animate-pulse">Thinking...'),ud=k('<div class="w-full flex justify-start"><div class="w-full px-1 sm:px-2 text-[15px] text-[var(--color-primary-highlight)] text-left">'),fd=k('<div class="mx-auto w-full max-w-3xl space-y-3">'),dd=k('<div class="h-full flex flex-col bg-[var(--bg-primary)] font-sans"><div class="flex-1 relative overflow-hidden min-h-0"><div class="absolute inset-0 flex flex-col transition-all duration-200 ease-out"></div><div class="absolute left-0 right-0 p-8 flex justify-center transition-all duration-200 ease-out pointer-events-none">'),hd=k('<div class="mb-1 text-[10px] uppercase tracking-wide text-[var(--color-primary)]/70">'),pd=k("<div><div>"),gd=k('<div class="whitespace-pre-wrap break-words">'),md=k('<svg class="w-4.5 h-4.5"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M5 13l4 4L19 7">'),bd=k('<div class="mt-2 flex justify-start pl-2 py-1">'),vd=k('<svg class="w-4.5 h-4.5 transform scale-x-[-1]"fill=none stroke=currentColor viewBox="0 0 512 512"><rect width=336 height=336 x=128 y=128 fill=none stroke=currentColor stroke-linejoin=round stroke-width=32 rx=57 ry=57></rect><path fill=none stroke=currentColor stroke-linecap=round stroke-linejoin=round stroke-width=32 d="m383.5 128 .5-24a56.16 56.16 0 0 0-56-56H112a64.19 64.19 0 0 0-64 64v216a56.16 56.16 0 0 0 56 56h24">');function yd(){const e=()=>re.currentSessionId();let t,n=0;const[r,o]=O(new Set),s=new Map;Ke(()=>{qt.initHistoryLoading(),Wt.initialize()}),ye(()=>{Wt.cleanup(),s.forEach(u=>clearTimeout(u)),s.clear()}),Ze(()=>{const u=e(),f=E.messages(),h=E.streamingContent(),d=f.some(x=>x.type==="action_request"),p=t;if(!p)return;const m=f.length,y=m>0;if(u&&y&&n===0){setTimeout(()=>{t&&(t.scrollTop=t.scrollHeight)},0);return}p.scrollHeight-p.clientHeight-p.scrollTop>48||((y||h||d)&&setTimeout(()=>{t&&(t.scrollTop=t.scrollHeight)},0),n=m)});const i=async u=>{await qt.sendMessage(u)},a=async(u,f)=>{await qt.resolveAction(u,f)},l=async(u,f)=>{try{await navigator.clipboard.writeText(f),o(p=>new Set(p).add(u));const h=s.get(u);h&&clearTimeout(h);const d=setTimeout(()=>{o(p=>{const m=new Set(p);return m.delete(u),m}),s.delete(u)},3e3);s.set(u,d)}catch(h){console.error("Failed to copy message:",h)}},c=()=>{const u=e(),f=E.messages(),h=f.length>0,d=!!E.streamingContent(),p=f.some(m=>m.type==="action_request");return!!u||h||d||p};return(()=>{var u=dd(),f=u.firstChild,h=f.firstChild,d=h.nextSibling;return b(h,v(bo,{class:"flex-1 px-4 sm:px-8 pb-30 pt-6",ref:p=>t=p,get children(){var p=fd();return b(p,v(Et,{get each(){return E.messages()},children:m=>{const y=m.sender==="user",S=m.sender==="agent",C=!y&&!S;return(()=>{var $=pd(),x=$.firstChild;return Ot(z=>{m.handler==="system"&&m.isPersistent&&Wt.observeNotification(z,m.id)},$),Q($,`w-full flex ${y?"justify-start md:justify-end":"justify-start"}`),Cr($,Ar(()=>m.isPersistent?{"data-notification-id":m.id}:{}),!1),Q(x,y?"inline-block max-w-full md:max-w-[70%] rounded-tl-2xl rounded-tr-2xl rounded-bl-2xl rounded-br-lg px-4 py-2 bg-[var(--bg-tertiary)] border border-[var(--border-secondary)] text-[var(--color-primary-highlight)] shadow-sm text-[15px] text-left":S?"w-full px-1 sm:px-2 text-[15px] text-[var(--color-primary)] text-left":"inline-block max-w-full rounded-md px-3 py-2 bg-[var(--bg-secondary)] border border-[var(--border-secondary)] text-[var(--color-primary)] text-xs text-left"),b(x,v(G,{when:C,get children(){var z=hd();return b(z,()=>m.sender.toUpperCase()),z}}),null),b(x,v(G,{get when(){return m.type==="action_request"},get fallback(){return v(G,{when:y,get fallback(){return[v(kr,{get content(){return m.content},class:S?"mmcp-markdown":""}),v(G,{when:S,get children(){var z=bd();return b(z,v(ld,{get text(){return r().has(m.id)?"Copied":"Copy"},position:"bottom",get children(){return v(ue,{onClick:()=>l(m.id,m.content),class:"text-xs opacity-60 hover:opacity-100",get children(){return v(G,{get when(){return r().has(m.id)},get fallback(){return vd()},get children(){return md()}})}})}})),z}})]},get children(){var z=gd();return b(z,()=>m.content),z}})},get children(){return v(_f,{get toolName(){return m.tool_name||"unknown"},get toolArgs(){return m.tool_args||{}},get approvalId(){return m.approval_id||""},get explanation(){return m.explanation||"No explanation provided"},get status(){return m.action_status},onResolve:a})}}),null),$})()}}),null),b(p,v(G,{get when(){return E.isThinking()},get children(){return cd()}}),null),b(p,v(G,{get when(){return E.streamingContent()},get children(){var m=ud(),y=m.firstChild;return b(y,v(kr,{get content(){return E.streamingContent()||""}})),m}}),null),p}})),b(d,v(wf,{onSend:i,get disabled(){return Re.isBusy()||E.messages().some(p=>p.type==="action_request"&&(!p.action_status||p.action_status==="pending"))},get placeholder(){return c()?"":"Talk to MMCP"}})),D(p=>{var m=c()?"1":"0",y=c()?"translateY(0)":"translateY(8px)",S=c()?"auto":"none",C=c()?"auto":"50%",$=c()?"0":"auto",x=c()?"translateY(0)":"translateY(-50%)";return m!==p.e&&le(h,"opacity",p.e=m),y!==p.t&&le(h,"transform",p.t=y),S!==p.a&&le(h,"pointer-events",p.a=S),C!==p.o&&le(d,"top",p.o=C),$!==p.i&&le(d,"bottom",p.i=$),x!==p.n&&le(d,"transform",p.n=x),p},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0}),u})()}const _d=()=>v(of,{get children(){return v(yd,{})}}),kd=document.getElementById("root");cs(()=>v(_d,{}),kd);
