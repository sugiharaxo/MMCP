(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(o){if(o.ep)return;o.ep=!0;const s=n(o);fetch(o.href,s)}})();const Eo=!1,Oo=(e,t)=>e===t,ct=Symbol("solid-proxy"),br=typeof Proxy=="function",Po=Symbol("solid-track"),lt={equals:Oo};let vr=Sr;const ge=1,ut=2,yr={owned:null,cleanups:null,context:null,owner:null},Rt={};var N=null;let Nt=null,Ao=null,R=null,G=null,he=null,St=0;function le(e,t){const n=R,r=N,o=e.length===0,s=t===void 0?r:t,i=o?yr:{owned:null,cleanups:null,context:s?s.context:null,owner:s},a=o?e:()=>e(()=>ie(()=>qe(i)));N=i,R=null;try{return ve(a,!0)}finally{R=n,N=r}}function Z(e,t){t=t?Object.assign({},lt,t):lt;const n={value:e,observers:null,observerSlots:null,comparator:t.equals||void 0},r=o=>(typeof o=="function"&&(o=o(n.value)),xr(n,o));return[_r.bind(n),r]}function Io(e,t,n){const r=$t(e,t,!0,ge);Le(r)}function V(e,t,n){const r=$t(e,t,!1,ge);Le(r)}function Ce(e,t,n){vr=Lo;const r=$t(e,t,!1,ge);(!n||!n.render)&&(r.user=!0),he?he.push(r):Le(r)}function pe(e,t,n){n=n?Object.assign({},lt,n):lt;const r=$t(e,t,!0,0);return r.observers=null,r.observerSlots=null,r.comparator=n.equals||void 0,Le(r),_r.bind(r)}function Co(e){return e&&typeof e=="object"&&"then"in e}function Zo(e,t,n){let r,o,s;r=!0,o=e,s={};let i=null,a=Rt,c=!1,l="initialValue"in s,u=typeof r=="function"&&pe(r);const f=new Set,[d,h]=(s.storage||Z)(s.initialValue),[g,m]=Z(void 0),[y,x]=Z(void 0,{equals:!1}),[z,I]=Z(l?"ready":"unresolved");function w(F,L,Q,v){return i===F&&(i=null,v!==void 0&&(l=!0),(F===a||L===a)&&s.onHydrated&&queueMicrotask(()=>s.onHydrated(v,{value:L})),a=Rt,O(L,Q)),L}function O(F,L){ve(()=>{L===void 0&&h(()=>F),I(L!==void 0?"errored":l?"ready":"unresolved"),m(L);for(const Q of f.keys())Q.decrement();f.clear()},!1)}function fe(){const F=Ro,L=d(),Q=g();if(Q!==void 0&&!i)throw Q;return R&&R.user,L}function xe(F=!0){if(F!==!1&&c)return;c=!1;const L=u?u():r;if(L==null||L===!1){w(i,ie(d));return}let Q;const v=a!==Rt?a:ie(()=>{try{return o(L,{value:d(),refetching:F})}catch(T){Q=T}});if(Q!==void 0){w(i,void 0,st(Q),L);return}else if(!Co(v))return w(i,v,void 0,L),v;return i=v,"v"in v?(v.s===1?w(i,v.v,void 0,L):w(i,void 0,st(v.v),L),v):(c=!0,queueMicrotask(()=>c=!1),ve(()=>{I(l?"refreshing":"pending"),x()},!1),v.then(T=>w(v,T,void 0,L),T=>w(v,void 0,st(T),L)))}Object.defineProperties(fe,{state:{get:()=>z()},error:{get:()=>g()},loading:{get(){const F=z();return F==="pending"||F==="refreshing"}},latest:{get(){if(!l)return fe();const F=g();if(F&&!i)throw F;return d()}}});let Xe=N;return u?Io(()=>(Xe=N,xe(!1))):xe(!1),[fe,{refetch:F=>wr(Xe,()=>xe(F)),mutate:h}]}function ie(e){if(R===null)return e();const t=R;R=null;try{return e()}finally{R=t}}function je(e){Ce(()=>ie(e))}function Se(e){return N===null||(N.cleanups===null?N.cleanups=[e]:N.cleanups.push(e)),e}function kr(){return N}function wr(e,t){const n=N,r=R;N=e,R=null;try{return ve(t,!0)}catch(o){un(o)}finally{N=n,R=r}}const[Qf,ed]=Z(!1);let Ro;function _r(){if(this.sources&&this.state)if(this.state===ge)Le(this);else{const e=G;G=null,ve(()=>dt(this),!1),G=e}if(R){const e=this.observers?this.observers.length:0;R.sources?(R.sources.push(this),R.sourceSlots.push(e)):(R.sources=[this],R.sourceSlots=[e]),this.observers?(this.observers.push(R),this.observerSlots.push(R.sources.length-1)):(this.observers=[R],this.observerSlots=[R.sources.length-1])}return this.value}function xr(e,t,n){let r=e.value;return(!e.comparator||!e.comparator(r,t))&&(e.value=t,e.observers&&e.observers.length&&ve(()=>{for(let o=0;o<e.observers.length;o+=1){const s=e.observers[o],i=Nt&&Nt.running;i&&Nt.disposed.has(s),(i?!s.tState:!s.state)&&(s.pure?G.push(s):he.push(s),s.observers&&$r(s)),i||(s.state=ge)}if(G.length>1e6)throw G=[],new Error},!1)),t}function Le(e){if(!e.fn)return;qe(e);const t=St;No(e,e.value,t)}function No(e,t,n){let r;const o=N,s=R;R=N=e;try{r=e.fn(t)}catch(i){return e.pure&&(e.state=ge,e.owned&&e.owned.forEach(qe),e.owned=null),e.updatedAt=n+1,un(i)}finally{R=s,N=o}(!e.updatedAt||e.updatedAt<=n)&&(e.updatedAt!=null&&"observers"in e?xr(e,r):e.value=r,e.updatedAt=n)}function $t(e,t,n,r=ge,o){const s={fn:e,state:r,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:t,owner:N,context:N?N.context:null,pure:n};return N===null||N!==yr&&(N.owned?N.owned.push(s):N.owned=[s]),s}function ft(e){if(e.state===0)return;if(e.state===ut)return dt(e);if(e.suspense&&ie(e.suspense.inFallback))return e.suspense.effects.push(e);const t=[e];for(;(e=e.owner)&&(!e.updatedAt||e.updatedAt<St);)e.state&&t.push(e);for(let n=t.length-1;n>=0;n--)if(e=t[n],e.state===ge)Le(e);else if(e.state===ut){const r=G;G=null,ve(()=>dt(e,t[0]),!1),G=r}}function ve(e,t){if(G)return e();let n=!1;t||(G=[]),he?n=!0:he=[],St++;try{const r=e();return jo(n),r}catch(r){n||(he=null),G=null,un(r)}}function jo(e){if(G&&(Sr(G),G=null),e)return;const t=he;he=null,t.length&&ve(()=>vr(t),!1)}function Sr(e){for(let t=0;t<e.length;t++)ft(e[t])}function Lo(e){let t,n=0;for(t=0;t<e.length;t++){const r=e[t];r.user?e[n++]=r:ft(r)}for(t=0;t<n;t++)ft(e[t])}function dt(e,t){e.state=0;for(let n=0;n<e.sources.length;n+=1){const r=e.sources[n];if(r.sources){const o=r.state;o===ge?r!==t&&(!r.updatedAt||r.updatedAt<St)&&ft(r):o===ut&&dt(r,t)}}}function $r(e){for(let t=0;t<e.observers.length;t+=1){const n=e.observers[t];n.state||(n.state=ut,n.pure?G.push(n):he.push(n),n.observers&&$r(n))}}function qe(e){let t;if(e.sources)for(;e.sources.length;){const n=e.sources.pop(),r=e.sourceSlots.pop(),o=n.observers;if(o&&o.length){const s=o.pop(),i=n.observerSlots.pop();r<o.length&&(s.sourceSlots[i]=r,o[r]=s,n.observerSlots[r]=i)}}if(e.tOwned){for(t=e.tOwned.length-1;t>=0;t--)qe(e.tOwned[t]);delete e.tOwned}if(e.owned){for(t=e.owned.length-1;t>=0;t--)qe(e.owned[t]);e.owned=null}if(e.cleanups){for(t=e.cleanups.length-1;t>=0;t--)e.cleanups[t]();e.cleanups=null}e.state=0}function st(e){return e instanceof Error?e:new Error(typeof e=="string"?e:"Unknown error",{cause:e})}function un(e,t=N){throw st(e)}const Mo=Symbol("fallback");function Pn(e){for(let t=0;t<e.length;t++)e[t]()}function Do(e,t,n={}){let r=[],o=[],s=[],i=0,a=t.length>1?[]:null;return Se(()=>Pn(s)),()=>{let c=e()||[],l=c.length,u,f;return c[Po],ie(()=>{let h,g,m,y,x,z,I,w,O;if(l===0)i!==0&&(Pn(s),s=[],r=[],o=[],i=0,a&&(a=[])),n.fallback&&(r=[Mo],o[0]=le(fe=>(s[0]=fe,n.fallback())),i=1);else if(i===0){for(o=new Array(l),f=0;f<l;f++)r[f]=c[f],o[f]=le(d);i=l}else{for(m=new Array(l),y=new Array(l),a&&(x=new Array(l)),z=0,I=Math.min(i,l);z<I&&r[z]===c[z];z++);for(I=i-1,w=l-1;I>=z&&w>=z&&r[I]===c[w];I--,w--)m[w]=o[I],y[w]=s[I],a&&(x[w]=a[I]);for(h=new Map,g=new Array(w+1),f=w;f>=z;f--)O=c[f],u=h.get(O),g[f]=u===void 0?-1:u,h.set(O,f);for(u=z;u<=I;u++)O=r[u],f=h.get(O),f!==void 0&&f!==-1?(m[f]=o[u],y[f]=s[u],a&&(x[f]=a[u]),f=g[f],h.set(O,f)):s[u]();for(f=z;f<l;f++)f in m?(o[f]=m[f],s[f]=y[f],a&&(a[f]=x[f],a[f](f))):o[f]=le(d);o=o.slice(0,i=l),r=c.slice(0)}return o});function d(h){if(s[f]=h,a){const[g,m]=Z(f);return a[f]=m,t(c[f],g)}return t(c[f])}}}function C(e,t){return ie(()=>e(t||{}))}function Qe(){return!0}const Vt={get(e,t,n){return t===ct?n:e.get(t)},has(e,t){return t===ct?!0:e.has(t)},set:Qe,deleteProperty:Qe,getOwnPropertyDescriptor(e,t){return{configurable:!0,enumerable:!0,get(){return e.get(t)},set:Qe,deleteProperty:Qe}},ownKeys(e){return e.keys()}};function jt(e){return(e=typeof e=="function"?e():e)?e:{}}function Uo(){for(let e=0,t=this.length;e<t;++e){const n=this[e]();if(n!==void 0)return n}}function zr(...e){let t=!1;for(let i=0;i<e.length;i++){const a=e[i];t=t||!!a&&ct in a,e[i]=typeof a=="function"?(t=!0,pe(a)):a}if(br&&t)return new Proxy({get(i){for(let a=e.length-1;a>=0;a--){const c=jt(e[a])[i];if(c!==void 0)return c}},has(i){for(let a=e.length-1;a>=0;a--)if(i in jt(e[a]))return!0;return!1},keys(){const i=[];for(let a=0;a<e.length;a++)i.push(...Object.keys(jt(e[a])));return[...new Set(i)]}},Vt);const n={},r=Object.create(null);for(let i=e.length-1;i>=0;i--){const a=e[i];if(!a)continue;const c=Object.getOwnPropertyNames(a);for(let l=c.length-1;l>=0;l--){const u=c[l];if(u==="__proto__"||u==="constructor")continue;const f=Object.getOwnPropertyDescriptor(a,u);if(!r[u])r[u]=f.get?{enumerable:!0,configurable:!0,get:Uo.bind(n[u]=[f.get.bind(a)])}:f.value!==void 0?f:void 0;else{const d=n[u];d&&(f.get?d.push(f.get.bind(a)):f.value!==void 0&&d.push(()=>f.value))}}}const o={},s=Object.keys(r);for(let i=s.length-1;i>=0;i--){const a=s[i],c=r[a];c&&c.get?Object.defineProperty(o,a,c):o[a]=c?c.value:void 0}return o}function Fo(e,...t){const n=t.length;if(br&&ct in e){const o=n>1?t.flat():t[0],s=t.map(i=>new Proxy({get(a){return i.includes(a)?e[a]:void 0},has(a){return i.includes(a)&&a in e},keys(){return i.filter(a=>a in e)}},Vt));return s.push(new Proxy({get(i){return o.includes(i)?void 0:e[i]},has(i){return o.includes(i)?!1:i in e},keys(){return Object.keys(e).filter(i=>!o.includes(i))}},Vt)),s}const r=[];for(let o=0;o<=n;o++)r[o]={};for(const o of Object.getOwnPropertyNames(e)){let s=n;for(let c=0;c<t.length;c++)if(t[c].includes(o)){s=c;break}const i=Object.getOwnPropertyDescriptor(e,o);!i.get&&!i.set&&i.enumerable&&i.writable&&i.configurable?r[s][o]=i.value:Object.defineProperty(r[s],o,i)}return r}const Bo=e=>`Stale read from <${e}>.`;function Tr(e){const t="fallback"in e&&{fallback:()=>e.fallback};return pe(Do(()=>e.each,e.children,t||void 0))}function ce(e){const t=e.keyed,n=pe(()=>e.when,void 0,void 0),r=t?n:pe(n,void 0,{equals:(o,s)=>!o==!s});return pe(()=>{const o=r();if(o){const s=e.children;return typeof s=="function"&&s.length>0?ie(()=>s(t?o:()=>{if(!ie(r))throw Bo("Show");return n()})):s}return e.fallback},void 0,void 0)}const Jo=["allowfullscreen","async","alpha","autofocus","autoplay","checked","controls","default","disabled","formnovalidate","hidden","indeterminate","inert","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","seamless","selected","adauctionheaders","browsingtopics","credentialless","defaultchecked","defaultmuted","defaultselected","defer","disablepictureinpicture","disableremoteplayback","preservespitch","shadowrootclonable","shadowrootcustomelementregistry","shadowrootdelegatesfocus","shadowrootserializable","sharedstoragewritable"],Vo=new Set(["className","value","readOnly","noValidate","formNoValidate","isMap","noModule","playsInline","adAuctionHeaders","allowFullscreen","browsingTopics","defaultChecked","defaultMuted","defaultSelected","disablePictureInPicture","disableRemotePlayback","preservesPitch","shadowRootClonable","shadowRootCustomElementRegistry","shadowRootDelegatesFocus","shadowRootSerializable","sharedStorageWritable",...Jo]),Wo=new Set(["innerHTML","textContent","innerText","children"]),qo=Object.assign(Object.create(null),{className:"class",htmlFor:"for"}),Ho=Object.assign(Object.create(null),{class:"className",novalidate:{$:"noValidate",FORM:1},formnovalidate:{$:"formNoValidate",BUTTON:1,INPUT:1},ismap:{$:"isMap",IMG:1},nomodule:{$:"noModule",SCRIPT:1},playsinline:{$:"playsInline",VIDEO:1},readonly:{$:"readOnly",INPUT:1,TEXTAREA:1},adauctionheaders:{$:"adAuctionHeaders",IFRAME:1},allowfullscreen:{$:"allowFullscreen",IFRAME:1},browsingtopics:{$:"browsingTopics",IMG:1},defaultchecked:{$:"defaultChecked",INPUT:1},defaultmuted:{$:"defaultMuted",AUDIO:1,VIDEO:1},defaultselected:{$:"defaultSelected",OPTION:1},disablepictureinpicture:{$:"disablePictureInPicture",VIDEO:1},disableremoteplayback:{$:"disableRemotePlayback",AUDIO:1,VIDEO:1},preservespitch:{$:"preservesPitch",AUDIO:1,VIDEO:1},shadowrootclonable:{$:"shadowRootClonable",TEMPLATE:1},shadowrootdelegatesfocus:{$:"shadowRootDelegatesFocus",TEMPLATE:1},shadowrootserializable:{$:"shadowRootSerializable",TEMPLATE:1},sharedstoragewritable:{$:"sharedStorageWritable",IFRAME:1,IMG:1}});function Go(e,t){const n=Ho[e];return typeof n=="object"?n[t]?n.$:void 0:n}const Ko=new Set(["beforeinput","click","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"]),An=e=>pe(()=>e());function Yo(e,t,n){let r=n.length,o=t.length,s=r,i=0,a=0,c=t[o-1].nextSibling,l=null;for(;i<o||a<s;){if(t[i]===n[a]){i++,a++;continue}for(;t[o-1]===n[s-1];)o--,s--;if(o===i){const u=s<r?a?n[a-1].nextSibling:n[s-a]:c;for(;a<s;)e.insertBefore(n[a++],u)}else if(s===a)for(;i<o;)(!l||!l.has(t[i]))&&t[i].remove(),i++;else if(t[i]===n[s-1]&&n[a]===t[o-1]){const u=t[--o].nextSibling;e.insertBefore(n[a++],t[i++].nextSibling),e.insertBefore(n[--s],u),t[o]=n[s]}else{if(!l){l=new Map;let f=a;for(;f<s;)l.set(n[f],f++)}const u=l.get(t[i]);if(u!=null)if(a<u&&u<s){let f=i,d=1,h;for(;++f<o&&f<s&&!((h=l.get(t[f]))==null||h!==u+d);)d++;if(d>u-a){const g=t[i];for(;a<u;)e.insertBefore(n[a++],g)}else e.replaceChild(n[a++],t[i++])}else i++;else t[i++].remove()}}}const In="_$DX_DELEGATE";function Xo(e,t,n,r={}){let o;return le(s=>{o=s,t===document?e():S(t,e(),t.firstChild?null:void 0,n)},r.owner),()=>{o(),t.textContent=""}}function E(e,t,n,r){let o;const s=()=>{const a=r?document.createElementNS("http://www.w3.org/1998/Math/MathML","template"):document.createElement("template");return a.innerHTML=e,n?a.content.firstChild.firstChild:r?a.firstChild:a.content.firstChild},i=t?()=>ie(()=>document.importNode(o||(o=s()),!0)):()=>(o||(o=s())).cloneNode(!0);return i.cloneNode=i,i}function Ge(e,t=window.document){const n=t[In]||(t[In]=new Set);for(let r=0,o=e.length;r<o;r++){const s=e[r];n.has(s)||(n.add(s),t.addEventListener(s,os))}}function ht(e,t,n){n==null?e.removeAttribute(t):e.setAttribute(t,n)}function Qo(e,t,n){n?e.setAttribute(t,""):e.removeAttribute(t)}function ue(e,t){t==null?e.removeAttribute("class"):e.className=t}function es(e,t,n,r){if(r)Array.isArray(n)?(e[`$$${t}`]=n[0],e[`$$${t}Data`]=n[1]):e[`$$${t}`]=n;else if(Array.isArray(n)){const o=n[0];e.addEventListener(t,n[0]=s=>o.call(e,n[1],s))}else e.addEventListener(t,n,typeof n!="function"&&n)}function fn(e,t,n={}){const r=Object.keys(t||{}),o=Object.keys(n);let s,i;for(s=0,i=o.length;s<i;s++){const a=o[s];!a||a==="undefined"||t[a]||(Cn(e,a,!1),delete n[a])}for(s=0,i=r.length;s<i;s++){const a=r[s],c=!!t[a];!a||a==="undefined"||n[a]===c||!c||(Cn(e,a,!0),n[a]=c)}return n}function ts(e,t,n){if(!t)return n?ht(e,"style"):t;const r=e.style;if(typeof t=="string")return r.cssText=t;typeof n=="string"&&(r.cssText=n=void 0),n||(n={}),t||(t={});let o,s;for(s in n)t[s]==null&&r.removeProperty(s),delete n[s];for(s in t)o=t[s],o!==n[s]&&(r.setProperty(s,o),n[s]=o);return n}function ae(e,t,n){n!=null?e.style.setProperty(t,n):e.style.removeProperty(t)}function Er(e,t={},n,r){const o={};return V(()=>typeof t.ref=="function"&&zt(t.ref,e)),V(()=>ns(e,t,n,!0,o,!0)),o}function zt(e,t,n){return ie(()=>e(t,n))}function S(e,t,n,r){if(n!==void 0&&!r&&(r=[]),typeof t!="function")return pt(e,t,r,n);V(o=>pt(e,t(),o,n),r)}function ns(e,t,n,r,o={},s=!1){t||(t={});for(const i in o)if(!(i in t)){if(i==="children")continue;o[i]=Zn(e,i,null,o[i],n,s,t)}for(const i in t){if(i==="children")continue;const a=t[i];o[i]=Zn(e,i,a,o[i],n,s,t)}}function rs(e){return e.toLowerCase().replace(/-([a-z])/g,(t,n)=>n.toUpperCase())}function Cn(e,t,n){const r=t.trim().split(/\s+/);for(let o=0,s=r.length;o<s;o++)e.classList.toggle(r[o],n)}function Zn(e,t,n,r,o,s,i){let a,c,l,u,f;if(t==="style")return ts(e,n,r);if(t==="classList")return fn(e,n,r);if(n===r)return r;if(t==="ref")s||n(e);else if(t.slice(0,3)==="on:"){const d=t.slice(3);r&&e.removeEventListener(d,r,typeof r!="function"&&r),n&&e.addEventListener(d,n,typeof n!="function"&&n)}else if(t.slice(0,10)==="oncapture:"){const d=t.slice(10);r&&e.removeEventListener(d,r,!0),n&&e.addEventListener(d,n,!0)}else if(t.slice(0,2)==="on"){const d=t.slice(2).toLowerCase(),h=Ko.has(d);if(!h&&r){const g=Array.isArray(r)?r[0]:r;e.removeEventListener(d,g)}(h||n)&&(es(e,d,n,h),h&&Ge([d]))}else t.slice(0,5)==="attr:"?ht(e,t.slice(5),n):t.slice(0,5)==="bool:"?Qo(e,t.slice(5),n):(f=t.slice(0,5)==="prop:")||(l=Wo.has(t))||(u=Go(t,e.tagName))||(c=Vo.has(t))||(a=e.nodeName.includes("-")||"is"in i)?(f&&(t=t.slice(5),c=!0),t==="class"||t==="className"?ue(e,n):a&&!c&&!l?e[rs(t)]=n:e[u||t]=n):ht(e,qo[t]||t,n);return n}function os(e){let t=e.target;const n=`$$${e.type}`,r=e.target,o=e.currentTarget,s=c=>Object.defineProperty(e,"target",{configurable:!0,value:c}),i=()=>{const c=t[n];if(c&&!t.disabled){const l=t[`${n}Data`];if(l!==void 0?c.call(t,l,e):c.call(t,e),e.cancelBubble)return}return t.host&&typeof t.host!="string"&&!t.host._$host&&t.contains(e.target)&&s(t.host),!0},a=()=>{for(;i()&&(t=t._$host||t.parentNode||t.host););};if(Object.defineProperty(e,"currentTarget",{configurable:!0,get(){return t||document}}),e.composedPath){const c=e.composedPath();s(c[0]);for(let l=0;l<c.length-2&&(t=c[l],!!i());l++){if(t._$host){t=t._$host,a();break}if(t.parentNode===o)break}}else a();s(r)}function pt(e,t,n,r,o){for(;typeof n=="function";)n=n();if(t===n)return n;const s=typeof t,i=r!==void 0;if(e=i&&n[0]&&n[0].parentNode||e,s==="string"||s==="number"){if(s==="number"&&(t=t.toString(),t===n))return n;if(i){let a=n[0];a&&a.nodeType===3?a.data!==t&&(a.data=t):a=document.createTextNode(t),n=Oe(e,n,r,a)}else n!==""&&typeof n=="string"?n=e.firstChild.data=t:n=e.textContent=t}else if(t==null||s==="boolean")n=Oe(e,n,r);else{if(s==="function")return V(()=>{let a=t();for(;typeof a=="function";)a=a();n=pt(e,a,n,r)}),()=>n;if(Array.isArray(t)){const a=[],c=n&&Array.isArray(n);if(Wt(a,t,n,o))return V(()=>n=pt(e,a,n,r,!0)),()=>n;if(a.length===0){if(n=Oe(e,n,r),i)return n}else c?n.length===0?Rn(e,a,r):Yo(e,n,a):(n&&Oe(e),Rn(e,a));n=a}else if(t.nodeType){if(Array.isArray(n)){if(i)return n=Oe(e,n,r,t);Oe(e,n,null,t)}else n==null||n===""||!e.firstChild?e.appendChild(t):e.replaceChild(t,e.firstChild);n=t}}return n}function Wt(e,t,n,r){let o=!1;for(let s=0,i=t.length;s<i;s++){let a=t[s],c=n&&n[e.length],l;if(!(a==null||a===!0||a===!1))if((l=typeof a)=="object"&&a.nodeType)e.push(a);else if(Array.isArray(a))o=Wt(e,a,c)||o;else if(l==="function")if(r){for(;typeof a=="function";)a=a();o=Wt(e,Array.isArray(a)?a:[a],Array.isArray(c)?c:[c])||o}else e.push(a),o=!0;else{const u=String(a);c&&c.nodeType===3&&c.data===u?e.push(c):e.push(document.createTextNode(u))}}return o}function Rn(e,t,n=null){for(let r=0,o=t.length;r<o;r++)e.insertBefore(t[r],n)}function Oe(e,t,n,r){if(n===void 0)return e.textContent="";const o=r||document.createTextNode("");if(t.length){let s=!1;for(let i=t.length-1;i>=0;i--){const a=t[i];if(o!==a){const c=a.parentNode===e;!s&&!i?c?e.replaceChild(o,a):e.insertBefore(o,n):c&&a.remove()}else s=!0}}else e.insertBefore(o,n);return[o]}const ss="http://www.w3.org/2000/svg";function is(e,t=!1,n=void 0){return t?document.createElementNS(ss,e):document.createElement(e,{is:n})}function as(e){const{useShadow:t}=e,n=document.createTextNode(""),r=()=>e.mount||document.body,o=kr();let s;return Ce(()=>{s||(s=wr(o,()=>pe(()=>e.children)));const i=r();if(i instanceof HTMLHeadElement){const[a,c]=Z(!1),l=()=>c(!0);le(u=>S(i,()=>a()?u():s(),null)),Se(l)}else{const a=is(e.isSVG?"g":"div",e.isSVG),c=t&&a.attachShadow?a.attachShadow({mode:"open"}):a;Object.defineProperty(a,"_$host",{get(){return n.parentNode},configurable:!0}),S(c,s),i.appendChild(a),e.ref&&e.ref(a),Se(()=>i.removeChild(a))}},void 0,{render:!0}),n}async function cs(e=50,t){const n=new URLSearchParams;n.set("limit",e.toString());const r=await fetch(`/api/v1/sessions?${n.toString()}`);if(!r.ok)throw new Error(`Failed to fetch sessions: ${r.statusText}`);return r.json()}async function ls(e,t){const n=await fetch(`/api/v1/sessions/${e}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:t})});if(!n.ok)throw new Error(`Failed to rename session: ${n.statusText}`)}async function us(e){const t=await fetch(`/api/v1/sessions/${e}`,{method:"DELETE"});if(!t.ok)throw new Error(`Failed to delete session: ${t.statusText}`)}function fs(){const[e,t]=Z(!1);return{isBusy:e,setIsBusy:t}}const Ze=le(fs);function ds(){const[e,t]=Z([]),[n,r]=Z(""),[o,s]=Z(null),[i,a]=Z(!1);return{messages:e,streamingContent:n,pendingAction:o,isThinking:i,addMessage:m=>{t(y=>[...y,m])},clearMessages:()=>{t([]),r(""),s(null),a(!1)},setMessagesList:m=>{t(m)},updateStreamingContent:m=>{r(m)},clearStreamingContent:()=>{r(""),a(!1)},setPendingActionData:m=>{s(m)},setIsThinking:a,isEmpty:()=>e().length===0&&!n()&&!o()}}const _=le(ds);async function*hs(e,t=null){Ze.setIsBusy(!0),_.setIsThinking(!0);try{const n=await fetch("/api/v1/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:e,session_id:t})});if(!n.ok){const i=await n.json();console.error("Chat failed:",i);return}if(!n.body)return;const r=n.body.getReader(),o=new TextDecoder;let s="";for(;;){const{value:i,done:a}=await r.read();if(a)break;s+=o.decode(i,{stream:!0});const c=s.split(`
`);s=c.pop()||"";for(const l of c){const u=l.trim();if(u)try{yield JSON.parse(u)}catch(f){console.error("Failed to parse chunk:",f,u)}}}if(s.trim())try{yield JSON.parse(s.trim())}catch(i){console.error("Failed to parse final chunk:",i,s)}}catch(n){console.error("Chat streaming failed:",n)}finally{Ze.setIsBusy(!1),_.setIsThinking(!1)}}async function*ps(e,t,n){Ze.setIsBusy(!0),_.setIsThinking(!0);try{const r=await fetch("/api/v1/chat/respond",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({session_id:e,approval_id:t,decision:n})});if(!r.ok){const a=await r.json();console.error("Action response failed:",a);return}if(!r.body)return;const o=r.body.getReader(),s=new TextDecoder;let i="";for(;;){const{value:a,done:c}=await o.read();if(c)break;i+=s.decode(a,{stream:!0});const l=i.split(`
`);i=l.pop()||"";for(const u of l){const f=u.trim();if(f)try{yield JSON.parse(f)}catch(d){console.error("Failed to parse chunk:",d,f)}}}if(i.trim())try{yield JSON.parse(i.trim())}catch(a){console.error("Failed to parse final chunk:",a,i)}}catch(r){console.error("Action response streaming failed:",r)}finally{Ze.setIsBusy(!1),_.setIsThinking(!1)}}async function gs(e){const t=await fetch(`/api/v1/chat/history?session_id=${encodeURIComponent(e)}`);if(!t.ok){const r=await t.json();return console.error("Failed to fetch chat history:",r),[]}return(await t.json()).messages||[]}class ms{lastProcessedSessionId=null;async loadHistory(t){if(!t||t.startsWith("temp-")||this.lastProcessedSessionId===t)return null;this.lastProcessedSessionId=t;try{return(await gs(t)).map(o=>({id:o.id,sender:o.sender,content:o.content,handler:o.handler,isPersistent:!0}))}catch(n){return console.error("Failed to load chat history:",n),null}}reset(){this.lastProcessedSessionId=null}}const Or=new ms;function bs(){const[e,t]=Z(null),[n,r]=Z(null),o=new BroadcastChannel("mmcp_session_sync");o.onmessage=u=>{if(u.data.type==="SESSION_CHANGE"){if(u.data.isLocal)return;const f=u.data.sessionId;t(f)}};const s=(u,f=!1)=>{t(u),o.postMessage({type:"SESSION_CHANGE",sessionId:u,isLocal:f})};return{currentSessionId:e,pendingSessionTitle:n,loadSession:u=>{s(u,!0)},setSessionId:u=>{s(u,!0)},clearSession:()=>{s(null),r(null),Or.reset()},setPendingTitle:u=>{r(u)}}}const te=le(bs);var qt=function(e,t){return qt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o])},qt(e,t)};function ze(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");qt(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var Ht=function(){return Ht=Object.assign||function(t){for(var n,r=1,o=arguments.length;r<o;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},Ht.apply(this,arguments)};function Gt(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Kt(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),o,s=[],i;try{for(;(t===void 0||t-- >0)&&!(o=r.next()).done;)s.push(o.value)}catch(a){i={error:a}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(i)throw i.error}}return s}function Yt(e,t,n){if(n||arguments.length===2)for(var r=0,o=t.length,s;r<o;r++)(s||!(r in t))&&(s||(s=Array.prototype.slice.call(t,0,r)),s[r]=t[r]);return e.concat(s||Array.prototype.slice.call(t))}function se(e){return typeof e=="function"}function Pr(e){var t=function(r){Error.call(r),r.stack=new Error().stack},n=e(t);return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var Lt=Pr(function(e){return function(n){e(this),this.message=n?n.length+` errors occurred during unsubscription:
`+n.map(function(r,o){return o+1+") "+r.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=n}});function Xt(e,t){if(e){var n=e.indexOf(t);0<=n&&e.splice(n,1)}}var Ke=(function(){function e(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}return e.prototype.unsubscribe=function(){var t,n,r,o,s;if(!this.closed){this.closed=!0;var i=this._parentage;if(i)if(this._parentage=null,Array.isArray(i))try{for(var a=Gt(i),c=a.next();!c.done;c=a.next()){var l=c.value;l.remove(this)}}catch(m){t={error:m}}finally{try{c&&!c.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}else i.remove(this);var u=this.initialTeardown;if(se(u))try{u()}catch(m){s=m instanceof Lt?m.errors:[m]}var f=this._finalizers;if(f){this._finalizers=null;try{for(var d=Gt(f),h=d.next();!h.done;h=d.next()){var g=h.value;try{Nn(g)}catch(m){s=s??[],m instanceof Lt?s=Yt(Yt([],Kt(s)),Kt(m.errors)):s.push(m)}}}catch(m){r={error:m}}finally{try{h&&!h.done&&(o=d.return)&&o.call(d)}finally{if(r)throw r.error}}}if(s)throw new Lt(s)}},e.prototype.add=function(t){var n;if(t&&t!==this)if(this.closed)Nn(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(t)}},e.prototype._hasParent=function(t){var n=this._parentage;return n===t||Array.isArray(n)&&n.includes(t)},e.prototype._addParent=function(t){var n=this._parentage;this._parentage=Array.isArray(n)?(n.push(t),n):n?[n,t]:t},e.prototype._removeParent=function(t){var n=this._parentage;n===t?this._parentage=null:Array.isArray(n)&&Xt(n,t)},e.prototype.remove=function(t){var n=this._finalizers;n&&Xt(n,t),t instanceof e&&t._removeParent(this)},e.EMPTY=(function(){var t=new e;return t.closed=!0,t})(),e})(),Ar=Ke.EMPTY;function Ir(e){return e instanceof Ke||e&&"closed"in e&&se(e.remove)&&se(e.add)&&se(e.unsubscribe)}function Nn(e){se(e)?e():e.unsubscribe()}var vs={Promise:void 0},ys={setTimeout:function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];return setTimeout.apply(void 0,Yt([e,t],Kt(n)))},clearTimeout:function(e){return clearTimeout(e)},delegate:void 0};function ks(e){ys.setTimeout(function(){throw e})}function jn(){}function it(e){e()}var Tt=(function(e){ze(t,e);function t(n){var r=e.call(this)||this;return r.isStopped=!1,n?(r.destination=n,Ir(n)&&n.add(r)):r.destination=xs,r}return t.create=function(n,r,o){return new Qt(n,r,o)},t.prototype.next=function(n){this.isStopped||this._next(n)},t.prototype.error=function(n){this.isStopped||(this.isStopped=!0,this._error(n))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this),this.destination=null)},t.prototype._next=function(n){this.destination.next(n)},t.prototype._error=function(n){try{this.destination.error(n)}finally{this.unsubscribe()}},t.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},t})(Ke),ws=(function(){function e(t){this.partialObserver=t}return e.prototype.next=function(t){var n=this.partialObserver;if(n.next)try{n.next(t)}catch(r){et(r)}},e.prototype.error=function(t){var n=this.partialObserver;if(n.error)try{n.error(t)}catch(r){et(r)}else et(t)},e.prototype.complete=function(){var t=this.partialObserver;if(t.complete)try{t.complete()}catch(n){et(n)}},e})(),Qt=(function(e){ze(t,e);function t(n,r,o){var s=e.call(this)||this,i;return se(n)||!n?i={next:n??void 0,error:r??void 0,complete:o??void 0}:i=n,s.destination=new ws(i),s}return t})(Tt);function et(e){ks(e)}function _s(e){throw e}var xs={closed:!0,next:jn,error:_s,complete:jn},Ss=(function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"})();function Cr(e){return e}function $s(e){return e.length===0?Cr:e.length===1?e[0]:function(n){return e.reduce(function(r,o){return o(r)},n)}}var gt=(function(){function e(t){t&&(this._subscribe=t)}return e.prototype.lift=function(t){var n=new e;return n.source=this,n.operator=t,n},e.prototype.subscribe=function(t,n,r){var o=this,s=Ts(t)?t:new Qt(t,n,r);return it(function(){var i=o,a=i.operator,c=i.source;s.add(a?a.call(s,c):c?o._subscribe(s):o._trySubscribe(s))}),s},e.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(n){t.error(n)}},e.prototype.forEach=function(t,n){var r=this;return n=Ln(n),new n(function(o,s){var i=new Qt({next:function(a){try{t(a)}catch(c){s(c),i.unsubscribe()}},error:s,complete:o});r.subscribe(i)})},e.prototype._subscribe=function(t){var n;return(n=this.source)===null||n===void 0?void 0:n.subscribe(t)},e.prototype[Ss]=function(){return this},e.prototype.pipe=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return $s(t)(this)},e.prototype.toPromise=function(t){var n=this;return t=Ln(t),new t(function(r,o){var s;n.subscribe(function(i){return s=i},function(i){return o(i)},function(){return r(s)})})},e.create=function(t){return new e(t)},e})();function Ln(e){var t;return(t=e??vs.Promise)!==null&&t!==void 0?t:Promise}function zs(e){return e&&se(e.next)&&se(e.error)&&se(e.complete)}function Ts(e){return e&&e instanceof Tt||zs(e)&&Ir(e)}var Es=Pr(function(e){return function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}}),mt=(function(e){ze(t,e);function t(){var n=e.call(this)||this;return n.closed=!1,n.currentObservers=null,n.observers=[],n.isStopped=!1,n.hasError=!1,n.thrownError=null,n}return t.prototype.lift=function(n){var r=new en(this,this);return r.operator=n,r},t.prototype._throwIfClosed=function(){if(this.closed)throw new Es},t.prototype.next=function(n){var r=this;it(function(){var o,s;if(r._throwIfClosed(),!r.isStopped){r.currentObservers||(r.currentObservers=Array.from(r.observers));try{for(var i=Gt(r.currentObservers),a=i.next();!a.done;a=i.next()){var c=a.value;c.next(n)}}catch(l){o={error:l}}finally{try{a&&!a.done&&(s=i.return)&&s.call(i)}finally{if(o)throw o.error}}}})},t.prototype.error=function(n){var r=this;it(function(){if(r._throwIfClosed(),!r.isStopped){r.hasError=r.isStopped=!0,r.thrownError=n;for(var o=r.observers;o.length;)o.shift().error(n)}})},t.prototype.complete=function(){var n=this;it(function(){if(n._throwIfClosed(),!n.isStopped){n.isStopped=!0;for(var r=n.observers;r.length;)r.shift().complete()}})},t.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(t.prototype,"observed",{get:function(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0},enumerable:!1,configurable:!0}),t.prototype._trySubscribe=function(n){return this._throwIfClosed(),e.prototype._trySubscribe.call(this,n)},t.prototype._subscribe=function(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)},t.prototype._innerSubscribe=function(n){var r=this,o=this,s=o.hasError,i=o.isStopped,a=o.observers;return s||i?Ar:(this.currentObservers=null,a.push(n),new Ke(function(){r.currentObservers=null,Xt(a,n)}))},t.prototype._checkFinalizedStatuses=function(n){var r=this,o=r.hasError,s=r.thrownError,i=r.isStopped;o?n.error(s):i&&n.complete()},t.prototype.asObservable=function(){var n=new gt;return n.source=this,n},t.create=function(n,r){return new en(n,r)},t})(gt),en=(function(e){ze(t,e);function t(n,r){var o=e.call(this)||this;return o.destination=n,o.source=r,o}return t.prototype.next=function(n){var r,o;(o=(r=this.destination)===null||r===void 0?void 0:r.next)===null||o===void 0||o.call(r,n)},t.prototype.error=function(n){var r,o;(o=(r=this.destination)===null||r===void 0?void 0:r.error)===null||o===void 0||o.call(r,n)},t.prototype.complete=function(){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.complete)===null||r===void 0||r.call(n)},t.prototype._subscribe=function(n){var r,o;return(o=(r=this.source)===null||r===void 0?void 0:r.subscribe(n))!==null&&o!==void 0?o:Ar},t})(mt),Zr={now:function(){return(Zr.delegate||Date).now()},delegate:void 0},Mt=(function(e){ze(t,e);function t(n,r,o){n===void 0&&(n=1/0),r===void 0&&(r=1/0),o===void 0&&(o=Zr);var s=e.call(this)||this;return s._bufferSize=n,s._windowTime=r,s._timestampProvider=o,s._buffer=[],s._infiniteTimeWindow=!0,s._infiniteTimeWindow=r===1/0,s._bufferSize=Math.max(1,n),s._windowTime=Math.max(1,r),s}return t.prototype.next=function(n){var r=this,o=r.isStopped,s=r._buffer,i=r._infiniteTimeWindow,a=r._timestampProvider,c=r._windowTime;o||(s.push(n),!i&&s.push(a.now()+c)),this._trimBuffer(),e.prototype.next.call(this,n)},t.prototype._subscribe=function(n){this._throwIfClosed(),this._trimBuffer();for(var r=this._innerSubscribe(n),o=this,s=o._infiniteTimeWindow,i=o._buffer,a=i.slice(),c=0;c<a.length&&!n.closed;c+=s?1:2)n.next(a[c]);return this._checkFinalizedStatuses(n),r},t.prototype._trimBuffer=function(){var n=this,r=n._bufferSize,o=n._timestampProvider,s=n._buffer,i=n._infiniteTimeWindow,a=(i?1:2)*r;if(r<1/0&&a<s.length&&s.splice(0,s.length-a),!i){for(var c=o.now(),l=0,u=1;u<s.length&&s[u]<=c;u+=2)l=u;l&&s.splice(0,l+1)}},t})(mt),Os={url:"",deserializer:function(e){return JSON.parse(e.data)},serializer:function(e){return JSON.stringify(e)}},Ps="WebSocketSubject.error must be called with an object with an error code, and an optional reason: { code: number, reason: string }",As=(function(e){ze(t,e);function t(n,r){var o=e.call(this)||this;if(o._socket=null,n instanceof gt)o.destination=r,o.source=n;else{var s=o._config=Ht({},Os);if(o._output=new mt,typeof n=="string")s.url=n;else for(var i in n)n.hasOwnProperty(i)&&(s[i]=n[i]);if(!s.WebSocketCtor&&WebSocket)s.WebSocketCtor=WebSocket;else if(!s.WebSocketCtor)throw new Error("no WebSocket constructor can be found");o.destination=new Mt}return o}return t.prototype.lift=function(n){var r=new t(this._config,this.destination);return r.operator=n,r.source=this,r},t.prototype._resetState=function(){this._socket=null,this.source||(this.destination=new Mt),this._output=new mt},t.prototype.multiplex=function(n,r,o){var s=this;return new gt(function(i){try{s.next(n())}catch(c){i.error(c)}var a=s.subscribe({next:function(c){try{o(c)&&i.next(c)}catch(l){i.error(l)}},error:function(c){return i.error(c)},complete:function(){return i.complete()}});return function(){try{s.next(r())}catch(c){i.error(c)}a.unsubscribe()}})},t.prototype._connectSocket=function(){var n=this,r=this._config,o=r.WebSocketCtor,s=r.protocol,i=r.url,a=r.binaryType,c=this._output,l=null;try{l=s?new o(i,s):new o(i),this._socket=l,a&&(this._socket.binaryType=a)}catch(f){c.error(f);return}var u=new Ke(function(){n._socket=null,l&&l.readyState===1&&l.close()});l.onopen=function(f){var d=n._socket;if(!d){l.close(),n._resetState();return}var h=n._config.openObserver;h&&h.next(f);var g=n.destination;n.destination=Tt.create(function(m){if(l.readyState===1)try{var y=n._config.serializer;l.send(y(m))}catch(x){n.destination.error(x)}},function(m){var y=n._config.closingObserver;y&&y.next(void 0),m&&m.code?l.close(m.code,m.reason):c.error(new TypeError(Ps)),n._resetState()},function(){var m=n._config.closingObserver;m&&m.next(void 0),l.close(),n._resetState()}),g&&g instanceof Mt&&u.add(g.subscribe(n.destination))},l.onerror=function(f){n._resetState(),c.error(f)},l.onclose=function(f){l===n._socket&&n._resetState();var d=n._config.closeObserver;d&&d.next(f),f.wasClean?c.complete():c.error(f)},l.onmessage=function(f){try{var d=n._config.deserializer;c.next(d(f))}catch(h){c.error(h)}}},t.prototype._subscribe=function(n){var r=this,o=this.source;return o?o.subscribe(n):(this._socket||this._connectSocket(),this._output.subscribe(n),n.add(function(){var s=r._socket;r._output.observers.length===0&&(s&&(s.readyState===1||s.readyState===0)&&s.close(),r._resetState())}),n)},t.prototype.unsubscribe=function(){var n=this._socket;n&&(n.readyState===1||n.readyState===0)&&n.close(),this._resetState(),e.prototype.unsubscribe.call(this)},t})(en);function Is(e){return new As(e)}function Cs(e){return se(e?.lift)}function dn(e){return function(t){if(Cs(t))return t.lift(function(n){try{return e(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function hn(e,t,n,r,o){return new Zs(e,t,n,r,o)}var Zs=(function(e){ze(t,e);function t(n,r,o,s,i,a){var c=e.call(this,n)||this;return c.onFinalize=i,c.shouldUnsubscribe=a,c._next=r?function(l){try{r(l)}catch(u){n.error(u)}}:e.prototype._next,c._error=s?function(l){try{s(l)}catch(u){n.error(u)}finally{this.unsubscribe()}}:e.prototype._error,c._complete=o?function(){try{o()}catch(l){n.error(l)}finally{this.unsubscribe()}}:e.prototype._complete,c}return t.prototype.unsubscribe=function(){var n;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var r=this.closed;e.prototype.unsubscribe.call(this),!r&&((n=this.onFinalize)===null||n===void 0||n.call(this))}},t})(Tt);function Rs(e,t){return dn(function(n,r){var o=0;n.subscribe(hn(r,function(s){r.next(e.call(t,s,o++))}))})}function Dt(e,t){return dn(function(n,r){var o=0;n.subscribe(hn(r,function(s){return e.call(t,s,o++)&&r.next(s)}))})}function Ns(e,t,n){var r=se(e)||t||n?{next:e,error:t,complete:n}:e;return r?dn(function(o,s){var i;(i=r.subscribe)===null||i===void 0||i.call(r);var a=!0;o.subscribe(hn(s,function(c){var l;(l=r.next)===null||l===void 0||l.call(r,c),s.next(c)},function(){var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),s.complete()},function(c){var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,c),s.error(c)},function(){var c,l;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):Cr}function p(e,t,n){function r(a,c){if(a._zod||Object.defineProperty(a,"_zod",{value:{def:c,constr:i,traits:new Set},enumerable:!1}),a._zod.traits.has(e))return;a._zod.traits.add(e),t(a,c);const l=i.prototype,u=Object.keys(l);for(let f=0;f<u.length;f++){const d=u[f];d in a||(a[d]=l[d].bind(a))}}const o=n?.Parent??Object;class s extends o{}Object.defineProperty(s,"name",{value:e});function i(a){var c;const l=n?.Parent?new s:this;r(l,a),(c=l._zod).deferred??(c.deferred=[]);for(const u of l._zod.deferred)u();return l}return Object.defineProperty(i,"init",{value:r}),Object.defineProperty(i,Symbol.hasInstance,{value:a=>n?.Parent&&a instanceof n.Parent?!0:a?._zod?.traits?.has(e)}),Object.defineProperty(i,"name",{value:e}),i}class Ie extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}class Rr extends Error{constructor(t){super(`Encountered unidirectional transform during encode: ${t}`),this.name="ZodEncodeError"}}const Nr={};function ye(e){return Nr}function jr(e){const t=Object.values(e).filter(r=>typeof r=="number");return Object.entries(e).filter(([r,o])=>t.indexOf(+r)===-1).map(([r,o])=>o)}function tn(e,t){return typeof t=="bigint"?t.toString():t}function pn(e){return{get value(){{const t=e();return Object.defineProperty(this,"value",{value:t}),t}}}}function gn(e){return e==null}function mn(e){const t=e.startsWith("^")?1:0,n=e.endsWith("$")?e.length-1:e.length;return e.slice(t,n)}function js(e,t){const n=(e.toString().split(".")[1]||"").length,r=t.toString();let o=(r.split(".")[1]||"").length;if(o===0&&/\d?e-\d?/.test(r)){const c=r.match(/\d?e-(\d?)/);c?.[1]&&(o=Number.parseInt(c[1]))}const s=n>o?n:o,i=Number.parseInt(e.toFixed(s).replace(".","")),a=Number.parseInt(t.toFixed(s).replace(".",""));return i%a/10**s}const Mn=Symbol("evaluating");function A(e,t,n){let r;Object.defineProperty(e,t,{get(){if(r!==Mn)return r===void 0&&(r=Mn,r=n()),r},set(o){Object.defineProperty(e,t,{value:o})},configurable:!0})}function Te(e,t,n){Object.defineProperty(e,t,{value:n,writable:!0,enumerable:!0,configurable:!0})}function we(...e){const t={};for(const n of e){const r=Object.getOwnPropertyDescriptors(n);Object.assign(t,r)}return Object.defineProperties({},t)}function Dn(e){return JSON.stringify(e)}function Ls(e){return e.toLowerCase().trim().replace(/[^\w\s-]/g,"").replace(/[\s_-]+/g,"-").replace(/^-+|-+$/g,"")}const Lr="captureStackTrace"in Error?Error.captureStackTrace:(...e)=>{};function bt(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)}const Ms=pn(()=>{if(typeof navigator<"u"&&navigator?.userAgent?.includes("Cloudflare"))return!1;try{const e=Function;return new e(""),!0}catch{return!1}});function Re(e){if(bt(e)===!1)return!1;const t=e.constructor;if(t===void 0||typeof t!="function")return!0;const n=t.prototype;return!(bt(n)===!1||Object.prototype.hasOwnProperty.call(n,"isPrototypeOf")===!1)}function Mr(e){return Re(e)?{...e}:Array.isArray(e)?[...e]:e}const Ds=new Set(["string","number","symbol"]);function Ne(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function _e(e,t,n){const r=new e._zod.constr(t??e._zod.def);return(!t||n?.parent)&&(r._zod.parent=e),r}function b(e){const t=e;if(!t)return{};if(typeof t=="string")return{error:()=>t};if(t?.message!==void 0){if(t?.error!==void 0)throw new Error("Cannot specify both `message` and `error` params");t.error=t.message}return delete t.message,typeof t.error=="string"?{...t,error:()=>t.error}:t}function Us(e){return Object.keys(e).filter(t=>e[t]._zod.optin==="optional"&&e[t]._zod.optout==="optional")}const Fs={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-2147483648,2147483647],uint32:[0,4294967295],float32:[-34028234663852886e22,34028234663852886e22],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]};function Bs(e,t){const n=e._zod.def,r=n.checks;if(r&&r.length>0)throw new Error(".pick() cannot be used on object schemas containing refinements");const s=we(e._zod.def,{get shape(){const i={};for(const a in t){if(!(a in n.shape))throw new Error(`Unrecognized key: "${a}"`);t[a]&&(i[a]=n.shape[a])}return Te(this,"shape",i),i},checks:[]});return _e(e,s)}function Js(e,t){const n=e._zod.def,r=n.checks;if(r&&r.length>0)throw new Error(".omit() cannot be used on object schemas containing refinements");const s=we(e._zod.def,{get shape(){const i={...e._zod.def.shape};for(const a in t){if(!(a in n.shape))throw new Error(`Unrecognized key: "${a}"`);t[a]&&delete i[a]}return Te(this,"shape",i),i},checks:[]});return _e(e,s)}function Vs(e,t){if(!Re(t))throw new Error("Invalid input to extend: expected a plain object");const n=e._zod.def.checks;if(n&&n.length>0){const s=e._zod.def.shape;for(const i in t)if(Object.getOwnPropertyDescriptor(s,i)!==void 0)throw new Error("Cannot overwrite keys on object schemas containing refinements. Use `.safeExtend()` instead.")}const o=we(e._zod.def,{get shape(){const s={...e._zod.def.shape,...t};return Te(this,"shape",s),s}});return _e(e,o)}function Ws(e,t){if(!Re(t))throw new Error("Invalid input to safeExtend: expected a plain object");const n=we(e._zod.def,{get shape(){const r={...e._zod.def.shape,...t};return Te(this,"shape",r),r}});return _e(e,n)}function qs(e,t){const n=we(e._zod.def,{get shape(){const r={...e._zod.def.shape,...t._zod.def.shape};return Te(this,"shape",r),r},get catchall(){return t._zod.def.catchall},checks:[]});return _e(e,n)}function Hs(e,t,n){const o=t._zod.def.checks;if(o&&o.length>0)throw new Error(".partial() cannot be used on object schemas containing refinements");const i=we(t._zod.def,{get shape(){const a=t._zod.def.shape,c={...a};if(n)for(const l in n){if(!(l in a))throw new Error(`Unrecognized key: "${l}"`);n[l]&&(c[l]=e?new e({type:"optional",innerType:a[l]}):a[l])}else for(const l in a)c[l]=e?new e({type:"optional",innerType:a[l]}):a[l];return Te(this,"shape",c),c},checks:[]});return _e(t,i)}function Gs(e,t,n){const r=we(t._zod.def,{get shape(){const o=t._zod.def.shape,s={...o};if(n)for(const i in n){if(!(i in s))throw new Error(`Unrecognized key: "${i}"`);n[i]&&(s[i]=new e({type:"nonoptional",innerType:o[i]}))}else for(const i in o)s[i]=new e({type:"nonoptional",innerType:o[i]});return Te(this,"shape",s),s}});return _e(t,r)}function Pe(e,t=0){if(e.aborted===!0)return!0;for(let n=t;n<e.issues.length;n++)if(e.issues[n]?.continue!==!0)return!0;return!1}function Ae(e,t){return t.map(n=>{var r;return(r=n).path??(r.path=[]),n.path.unshift(e),n})}function tt(e){return typeof e=="string"?e:e?.message}function ke(e,t,n){const r={...e,path:e.path??[]};if(!e.message){const o=tt(e.inst?._zod.def?.error?.(e))??tt(t?.error?.(e))??tt(n.customError?.(e))??tt(n.localeError?.(e))??"Invalid input";r.message=o}return delete r.inst,delete r.continue,t?.reportInput||delete r.input,r}function bn(e){return Array.isArray(e)?"array":typeof e=="string"?"string":"unknown"}function He(...e){const[t,n,r]=e;return typeof t=="string"?{message:t,code:"custom",input:n,inst:r}:{...t}}const Dr=(e,t)=>{e.name="$ZodError",Object.defineProperty(e,"_zod",{value:e._zod,enumerable:!1}),Object.defineProperty(e,"issues",{value:t,enumerable:!1}),e.message=JSON.stringify(t,tn,2),Object.defineProperty(e,"toString",{value:()=>e.message,enumerable:!1})},Ur=p("$ZodError",Dr),Fr=p("$ZodError",Dr,{Parent:Error});function Ks(e,t=n=>n.message){const n={},r=[];for(const o of e.issues)o.path.length>0?(n[o.path[0]]=n[o.path[0]]||[],n[o.path[0]].push(t(o))):r.push(t(o));return{formErrors:r,fieldErrors:n}}function Ys(e,t=n=>n.message){const n={_errors:[]},r=o=>{for(const s of o.issues)if(s.code==="invalid_union"&&s.errors.length)s.errors.map(i=>r({issues:i}));else if(s.code==="invalid_key")r({issues:s.issues});else if(s.code==="invalid_element")r({issues:s.issues});else if(s.path.length===0)n._errors.push(t(s));else{let i=n,a=0;for(;a<s.path.length;){const c=s.path[a];a===s.path.length-1?(i[c]=i[c]||{_errors:[]},i[c]._errors.push(t(s))):i[c]=i[c]||{_errors:[]},i=i[c],a++}}};return r(e),n}const vn=e=>(t,n,r,o)=>{const s=r?Object.assign(r,{async:!1}):{async:!1},i=t._zod.run({value:n,issues:[]},s);if(i instanceof Promise)throw new Ie;if(i.issues.length){const a=new(o?.Err??e)(i.issues.map(c=>ke(c,s,ye())));throw Lr(a,o?.callee),a}return i.value},yn=e=>async(t,n,r,o)=>{const s=r?Object.assign(r,{async:!0}):{async:!0};let i=t._zod.run({value:n,issues:[]},s);if(i instanceof Promise&&(i=await i),i.issues.length){const a=new(o?.Err??e)(i.issues.map(c=>ke(c,s,ye())));throw Lr(a,o?.callee),a}return i.value},Et=e=>(t,n,r)=>{const o=r?{...r,async:!1}:{async:!1},s=t._zod.run({value:n,issues:[]},o);if(s instanceof Promise)throw new Ie;return s.issues.length?{success:!1,error:new(e??Ur)(s.issues.map(i=>ke(i,o,ye())))}:{success:!0,data:s.value}},Xs=Et(Fr),Ot=e=>async(t,n,r)=>{const o=r?Object.assign(r,{async:!0}):{async:!0};let s=t._zod.run({value:n,issues:[]},o);return s instanceof Promise&&(s=await s),s.issues.length?{success:!1,error:new e(s.issues.map(i=>ke(i,o,ye())))}:{success:!0,data:s.value}},Qs=Ot(Fr),ei=e=>(t,n,r)=>{const o=r?Object.assign(r,{direction:"backward"}):{direction:"backward"};return vn(e)(t,n,o)},ti=e=>(t,n,r)=>vn(e)(t,n,r),ni=e=>async(t,n,r)=>{const o=r?Object.assign(r,{direction:"backward"}):{direction:"backward"};return yn(e)(t,n,o)},ri=e=>async(t,n,r)=>yn(e)(t,n,r),oi=e=>(t,n,r)=>{const o=r?Object.assign(r,{direction:"backward"}):{direction:"backward"};return Et(e)(t,n,o)},si=e=>(t,n,r)=>Et(e)(t,n,r),ii=e=>async(t,n,r)=>{const o=r?Object.assign(r,{direction:"backward"}):{direction:"backward"};return Ot(e)(t,n,o)},ai=e=>async(t,n,r)=>Ot(e)(t,n,r),ci=/^[cC][^\s-]{8,}$/,li=/^[0-9a-z]+$/,ui=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,fi=/^[0-9a-vA-V]{20}$/,di=/^[A-Za-z0-9]{27}$/,hi=/^[a-zA-Z0-9_-]{21}$/,pi=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,gi=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,Un=e=>e?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${e}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/,mi=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,bi="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";function vi(){return new RegExp(bi,"u")}const yi=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ki=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:))$/,wi=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,_i=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,xi=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,Br=/^[A-Za-z0-9_-]*$/,Si=/^\+[1-9]\d{6,14}$/,Jr="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",$i=new RegExp(`^${Jr}$`);function Vr(e){const t="(?:[01]\\d|2[0-3]):[0-5]\\d";return typeof e.precision=="number"?e.precision===-1?`${t}`:e.precision===0?`${t}:[0-5]\\d`:`${t}:[0-5]\\d\\.\\d{${e.precision}}`:`${t}(?::[0-5]\\d(?:\\.\\d+)?)?`}function zi(e){return new RegExp(`^${Vr(e)}$`)}function Ti(e){const t=Vr({precision:e.precision}),n=["Z"];e.local&&n.push(""),e.offset&&n.push("([+-](?:[01]\\d|2[0-3]):[0-5]\\d)");const r=`${t}(?:${n.join("|")})`;return new RegExp(`^${Jr}T(?:${r})$`)}const Ei=e=>{const t=e?`[\\s\\S]{${e?.minimum??0},${e?.maximum??""}}`:"[\\s\\S]*";return new RegExp(`^${t}$`)},Oi=/^-?\d+$/,Wr=/^-?\d+(?:\.\d+)?$/,Pi=/^[^A-Z]*$/,Ai=/^[^a-z]*$/,X=p("$ZodCheck",(e,t)=>{var n;e._zod??(e._zod={}),e._zod.def=t,(n=e._zod).onattach??(n.onattach=[])}),qr={number:"number",bigint:"bigint",object:"date"},Hr=p("$ZodCheckLessThan",(e,t)=>{X.init(e,t);const n=qr[typeof t.value];e._zod.onattach.push(r=>{const o=r._zod.bag,s=(t.inclusive?o.maximum:o.exclusiveMaximum)??Number.POSITIVE_INFINITY;t.value<s&&(t.inclusive?o.maximum=t.value:o.exclusiveMaximum=t.value)}),e._zod.check=r=>{(t.inclusive?r.value<=t.value:r.value<t.value)||r.issues.push({origin:n,code:"too_big",maximum:typeof t.value=="object"?t.value.getTime():t.value,input:r.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),Gr=p("$ZodCheckGreaterThan",(e,t)=>{X.init(e,t);const n=qr[typeof t.value];e._zod.onattach.push(r=>{const o=r._zod.bag,s=(t.inclusive?o.minimum:o.exclusiveMinimum)??Number.NEGATIVE_INFINITY;t.value>s&&(t.inclusive?o.minimum=t.value:o.exclusiveMinimum=t.value)}),e._zod.check=r=>{(t.inclusive?r.value>=t.value:r.value>t.value)||r.issues.push({origin:n,code:"too_small",minimum:typeof t.value=="object"?t.value.getTime():t.value,input:r.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),Ii=p("$ZodCheckMultipleOf",(e,t)=>{X.init(e,t),e._zod.onattach.push(n=>{var r;(r=n._zod.bag).multipleOf??(r.multipleOf=t.value)}),e._zod.check=n=>{if(typeof n.value!=typeof t.value)throw new Error("Cannot mix number and bigint in multiple_of check.");(typeof n.value=="bigint"?n.value%t.value===BigInt(0):js(n.value,t.value)===0)||n.issues.push({origin:typeof n.value,code:"not_multiple_of",divisor:t.value,input:n.value,inst:e,continue:!t.abort})}}),Ci=p("$ZodCheckNumberFormat",(e,t)=>{X.init(e,t),t.format=t.format||"float64";const n=t.format?.includes("int"),r=n?"int":"number",[o,s]=Fs[t.format];e._zod.onattach.push(i=>{const a=i._zod.bag;a.format=t.format,a.minimum=o,a.maximum=s,n&&(a.pattern=Oi)}),e._zod.check=i=>{const a=i.value;if(n){if(!Number.isInteger(a)){i.issues.push({expected:r,format:t.format,code:"invalid_type",continue:!1,input:a,inst:e});return}if(!Number.isSafeInteger(a)){a>0?i.issues.push({input:a,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:r,inclusive:!0,continue:!t.abort}):i.issues.push({input:a,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:r,inclusive:!0,continue:!t.abort});return}}a<o&&i.issues.push({origin:"number",input:a,code:"too_small",minimum:o,inclusive:!0,inst:e,continue:!t.abort}),a>s&&i.issues.push({origin:"number",input:a,code:"too_big",maximum:s,inclusive:!0,inst:e,continue:!t.abort})}}),Zi=p("$ZodCheckMaxLength",(e,t)=>{var n;X.init(e,t),(n=e._zod.def).when??(n.when=r=>{const o=r.value;return!gn(o)&&o.length!==void 0}),e._zod.onattach.push(r=>{const o=r._zod.bag.maximum??Number.POSITIVE_INFINITY;t.maximum<o&&(r._zod.bag.maximum=t.maximum)}),e._zod.check=r=>{const o=r.value;if(o.length<=t.maximum)return;const i=bn(o);r.issues.push({origin:i,code:"too_big",maximum:t.maximum,inclusive:!0,input:o,inst:e,continue:!t.abort})}}),Ri=p("$ZodCheckMinLength",(e,t)=>{var n;X.init(e,t),(n=e._zod.def).when??(n.when=r=>{const o=r.value;return!gn(o)&&o.length!==void 0}),e._zod.onattach.push(r=>{const o=r._zod.bag.minimum??Number.NEGATIVE_INFINITY;t.minimum>o&&(r._zod.bag.minimum=t.minimum)}),e._zod.check=r=>{const o=r.value;if(o.length>=t.minimum)return;const i=bn(o);r.issues.push({origin:i,code:"too_small",minimum:t.minimum,inclusive:!0,input:o,inst:e,continue:!t.abort})}}),Ni=p("$ZodCheckLengthEquals",(e,t)=>{var n;X.init(e,t),(n=e._zod.def).when??(n.when=r=>{const o=r.value;return!gn(o)&&o.length!==void 0}),e._zod.onattach.push(r=>{const o=r._zod.bag;o.minimum=t.length,o.maximum=t.length,o.length=t.length}),e._zod.check=r=>{const o=r.value,s=o.length;if(s===t.length)return;const i=bn(o),a=s>t.length;r.issues.push({origin:i,...a?{code:"too_big",maximum:t.length}:{code:"too_small",minimum:t.length},inclusive:!0,exact:!0,input:r.value,inst:e,continue:!t.abort})}}),Pt=p("$ZodCheckStringFormat",(e,t)=>{var n,r;X.init(e,t),e._zod.onattach.push(o=>{const s=o._zod.bag;s.format=t.format,t.pattern&&(s.patterns??(s.patterns=new Set),s.patterns.add(t.pattern))}),t.pattern?(n=e._zod).check??(n.check=o=>{t.pattern.lastIndex=0,!t.pattern.test(o.value)&&o.issues.push({origin:"string",code:"invalid_format",format:t.format,input:o.value,...t.pattern?{pattern:t.pattern.toString()}:{},inst:e,continue:!t.abort})}):(r=e._zod).check??(r.check=()=>{})}),ji=p("$ZodCheckRegex",(e,t)=>{Pt.init(e,t),e._zod.check=n=>{t.pattern.lastIndex=0,!t.pattern.test(n.value)&&n.issues.push({origin:"string",code:"invalid_format",format:"regex",input:n.value,pattern:t.pattern.toString(),inst:e,continue:!t.abort})}}),Li=p("$ZodCheckLowerCase",(e,t)=>{t.pattern??(t.pattern=Pi),Pt.init(e,t)}),Mi=p("$ZodCheckUpperCase",(e,t)=>{t.pattern??(t.pattern=Ai),Pt.init(e,t)}),Di=p("$ZodCheckIncludes",(e,t)=>{X.init(e,t);const n=Ne(t.includes),r=new RegExp(typeof t.position=="number"?`^.{${t.position}}${n}`:n);t.pattern=r,e._zod.onattach.push(o=>{const s=o._zod.bag;s.patterns??(s.patterns=new Set),s.patterns.add(r)}),e._zod.check=o=>{o.value.includes(t.includes,t.position)||o.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:t.includes,input:o.value,inst:e,continue:!t.abort})}}),Ui=p("$ZodCheckStartsWith",(e,t)=>{X.init(e,t);const n=new RegExp(`^${Ne(t.prefix)}.*`);t.pattern??(t.pattern=n),e._zod.onattach.push(r=>{const o=r._zod.bag;o.patterns??(o.patterns=new Set),o.patterns.add(n)}),e._zod.check=r=>{r.value.startsWith(t.prefix)||r.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:t.prefix,input:r.value,inst:e,continue:!t.abort})}}),Fi=p("$ZodCheckEndsWith",(e,t)=>{X.init(e,t);const n=new RegExp(`.*${Ne(t.suffix)}$`);t.pattern??(t.pattern=n),e._zod.onattach.push(r=>{const o=r._zod.bag;o.patterns??(o.patterns=new Set),o.patterns.add(n)}),e._zod.check=r=>{r.value.endsWith(t.suffix)||r.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:t.suffix,input:r.value,inst:e,continue:!t.abort})}}),Bi=p("$ZodCheckOverwrite",(e,t)=>{X.init(e,t),e._zod.check=n=>{n.value=t.tx(n.value)}});class Ji{constructor(t=[]){this.content=[],this.indent=0,this&&(this.args=t)}indented(t){this.indent+=1,t(this),this.indent-=1}write(t){if(typeof t=="function"){t(this,{execution:"sync"}),t(this,{execution:"async"});return}const r=t.split(`
`).filter(i=>i),o=Math.min(...r.map(i=>i.length-i.trimStart().length)),s=r.map(i=>i.slice(o)).map(i=>" ".repeat(this.indent*2)+i);for(const i of s)this.content.push(i)}compile(){const t=Function,n=this?.args,o=[...(this?.content??[""]).map(s=>`  ${s}`)];return new t(...n,o.join(`
`))}}const Vi={major:4,minor:3,patch:5},D=p("$ZodType",(e,t)=>{var n;e??(e={}),e._zod.def=t,e._zod.bag=e._zod.bag||{},e._zod.version=Vi;const r=[...e._zod.def.checks??[]];e._zod.traits.has("$ZodCheck")&&r.unshift(e);for(const o of r)for(const s of o._zod.onattach)s(e);if(r.length===0)(n=e._zod).deferred??(n.deferred=[]),e._zod.deferred?.push(()=>{e._zod.run=e._zod.parse});else{const o=(i,a,c)=>{let l=Pe(i),u;for(const f of a){if(f._zod.def.when){if(!f._zod.def.when(i))continue}else if(l)continue;const d=i.issues.length,h=f._zod.check(i);if(h instanceof Promise&&c?.async===!1)throw new Ie;if(u||h instanceof Promise)u=(u??Promise.resolve()).then(async()=>{await h,i.issues.length!==d&&(l||(l=Pe(i,d)))});else{if(i.issues.length===d)continue;l||(l=Pe(i,d))}}return u?u.then(()=>i):i},s=(i,a,c)=>{if(Pe(i))return i.aborted=!0,i;const l=o(a,r,c);if(l instanceof Promise){if(c.async===!1)throw new Ie;return l.then(u=>e._zod.parse(u,c))}return e._zod.parse(l,c)};e._zod.run=(i,a)=>{if(a.skipChecks)return e._zod.parse(i,a);if(a.direction==="backward"){const l=e._zod.parse({value:i.value,issues:[]},{...a,skipChecks:!0});return l instanceof Promise?l.then(u=>s(u,i,a)):s(l,i,a)}const c=e._zod.parse(i,a);if(c instanceof Promise){if(a.async===!1)throw new Ie;return c.then(l=>o(l,r,a))}return o(c,r,a)}}A(e,"~standard",()=>({validate:o=>{try{const s=Xs(e,o);return s.success?{value:s.data}:{issues:s.error?.issues}}catch{return Qs(e,o).then(i=>i.success?{value:i.data}:{issues:i.error?.issues})}},vendor:"zod",version:1}))}),kn=p("$ZodString",(e,t)=>{D.init(e,t),e._zod.pattern=[...e?._zod.bag?.patterns??[]].pop()??Ei(e._zod.bag),e._zod.parse=(n,r)=>{if(t.coerce)try{n.value=String(n.value)}catch{}return typeof n.value=="string"||n.issues.push({expected:"string",code:"invalid_type",input:n.value,inst:e}),n}}),j=p("$ZodStringFormat",(e,t)=>{Pt.init(e,t),kn.init(e,t)}),Wi=p("$ZodGUID",(e,t)=>{t.pattern??(t.pattern=gi),j.init(e,t)}),qi=p("$ZodUUID",(e,t)=>{if(t.version){const r={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[t.version];if(r===void 0)throw new Error(`Invalid UUID version: "${t.version}"`);t.pattern??(t.pattern=Un(r))}else t.pattern??(t.pattern=Un());j.init(e,t)}),Hi=p("$ZodEmail",(e,t)=>{t.pattern??(t.pattern=mi),j.init(e,t)}),Gi=p("$ZodURL",(e,t)=>{j.init(e,t),e._zod.check=n=>{try{const r=n.value.trim(),o=new URL(r);t.hostname&&(t.hostname.lastIndex=0,t.hostname.test(o.hostname)||n.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:t.hostname.source,input:n.value,inst:e,continue:!t.abort})),t.protocol&&(t.protocol.lastIndex=0,t.protocol.test(o.protocol.endsWith(":")?o.protocol.slice(0,-1):o.protocol)||n.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:t.protocol.source,input:n.value,inst:e,continue:!t.abort})),t.normalize?n.value=o.href:n.value=r;return}catch{n.issues.push({code:"invalid_format",format:"url",input:n.value,inst:e,continue:!t.abort})}}}),Ki=p("$ZodEmoji",(e,t)=>{t.pattern??(t.pattern=vi()),j.init(e,t)}),Yi=p("$ZodNanoID",(e,t)=>{t.pattern??(t.pattern=hi),j.init(e,t)}),Xi=p("$ZodCUID",(e,t)=>{t.pattern??(t.pattern=ci),j.init(e,t)}),Qi=p("$ZodCUID2",(e,t)=>{t.pattern??(t.pattern=li),j.init(e,t)}),ea=p("$ZodULID",(e,t)=>{t.pattern??(t.pattern=ui),j.init(e,t)}),ta=p("$ZodXID",(e,t)=>{t.pattern??(t.pattern=fi),j.init(e,t)}),na=p("$ZodKSUID",(e,t)=>{t.pattern??(t.pattern=di),j.init(e,t)}),ra=p("$ZodISODateTime",(e,t)=>{t.pattern??(t.pattern=Ti(t)),j.init(e,t)}),oa=p("$ZodISODate",(e,t)=>{t.pattern??(t.pattern=$i),j.init(e,t)}),sa=p("$ZodISOTime",(e,t)=>{t.pattern??(t.pattern=zi(t)),j.init(e,t)}),ia=p("$ZodISODuration",(e,t)=>{t.pattern??(t.pattern=pi),j.init(e,t)}),aa=p("$ZodIPv4",(e,t)=>{t.pattern??(t.pattern=yi),j.init(e,t),e._zod.bag.format="ipv4"}),ca=p("$ZodIPv6",(e,t)=>{t.pattern??(t.pattern=ki),j.init(e,t),e._zod.bag.format="ipv6",e._zod.check=n=>{try{new URL(`http://[${n.value}]`)}catch{n.issues.push({code:"invalid_format",format:"ipv6",input:n.value,inst:e,continue:!t.abort})}}}),la=p("$ZodCIDRv4",(e,t)=>{t.pattern??(t.pattern=wi),j.init(e,t)}),ua=p("$ZodCIDRv6",(e,t)=>{t.pattern??(t.pattern=_i),j.init(e,t),e._zod.check=n=>{const r=n.value.split("/");try{if(r.length!==2)throw new Error;const[o,s]=r;if(!s)throw new Error;const i=Number(s);if(`${i}`!==s)throw new Error;if(i<0||i>128)throw new Error;new URL(`http://[${o}]`)}catch{n.issues.push({code:"invalid_format",format:"cidrv6",input:n.value,inst:e,continue:!t.abort})}}});function Kr(e){if(e==="")return!0;if(e.length%4!==0)return!1;try{return atob(e),!0}catch{return!1}}const fa=p("$ZodBase64",(e,t)=>{t.pattern??(t.pattern=xi),j.init(e,t),e._zod.bag.contentEncoding="base64",e._zod.check=n=>{Kr(n.value)||n.issues.push({code:"invalid_format",format:"base64",input:n.value,inst:e,continue:!t.abort})}});function da(e){if(!Br.test(e))return!1;const t=e.replace(/[-_]/g,r=>r==="-"?"+":"/"),n=t.padEnd(Math.ceil(t.length/4)*4,"=");return Kr(n)}const ha=p("$ZodBase64URL",(e,t)=>{t.pattern??(t.pattern=Br),j.init(e,t),e._zod.bag.contentEncoding="base64url",e._zod.check=n=>{da(n.value)||n.issues.push({code:"invalid_format",format:"base64url",input:n.value,inst:e,continue:!t.abort})}}),pa=p("$ZodE164",(e,t)=>{t.pattern??(t.pattern=Si),j.init(e,t)});function ga(e,t=null){try{const n=e.split(".");if(n.length!==3)return!1;const[r]=n;if(!r)return!1;const o=JSON.parse(atob(r));return!("typ"in o&&o?.typ!=="JWT"||!o.alg||t&&(!("alg"in o)||o.alg!==t))}catch{return!1}}const ma=p("$ZodJWT",(e,t)=>{j.init(e,t),e._zod.check=n=>{ga(n.value,t.alg)||n.issues.push({code:"invalid_format",format:"jwt",input:n.value,inst:e,continue:!t.abort})}}),Yr=p("$ZodNumber",(e,t)=>{D.init(e,t),e._zod.pattern=e._zod.bag.pattern??Wr,e._zod.parse=(n,r)=>{if(t.coerce)try{n.value=Number(n.value)}catch{}const o=n.value;if(typeof o=="number"&&!Number.isNaN(o)&&Number.isFinite(o))return n;const s=typeof o=="number"?Number.isNaN(o)?"NaN":Number.isFinite(o)?void 0:"Infinity":void 0;return n.issues.push({expected:"number",code:"invalid_type",input:o,inst:e,...s?{received:s}:{}}),n}}),ba=p("$ZodNumberFormat",(e,t)=>{Ci.init(e,t),Yr.init(e,t)}),va=p("$ZodUnknown",(e,t)=>{D.init(e,t),e._zod.parse=n=>n}),ya=p("$ZodNever",(e,t)=>{D.init(e,t),e._zod.parse=(n,r)=>(n.issues.push({expected:"never",code:"invalid_type",input:n.value,inst:e}),n)});function Fn(e,t,n){e.issues.length&&t.issues.push(...Ae(n,e.issues)),t.value[n]=e.value}const ka=p("$ZodArray",(e,t)=>{D.init(e,t),e._zod.parse=(n,r)=>{const o=n.value;if(!Array.isArray(o))return n.issues.push({expected:"array",code:"invalid_type",input:o,inst:e}),n;n.value=Array(o.length);const s=[];for(let i=0;i<o.length;i++){const a=o[i],c=t.element._zod.run({value:a,issues:[]},r);c instanceof Promise?s.push(c.then(l=>Fn(l,n,i))):Fn(c,n,i)}return s.length?Promise.all(s).then(()=>n):n}});function vt(e,t,n,r,o){if(e.issues.length){if(o&&!(n in r))return;t.issues.push(...Ae(n,e.issues))}e.value===void 0?n in r&&(t.value[n]=void 0):t.value[n]=e.value}function Xr(e){const t=Object.keys(e.shape);for(const r of t)if(!e.shape?.[r]?._zod?.traits?.has("$ZodType"))throw new Error(`Invalid element at key "${r}": expected a Zod schema`);const n=Us(e.shape);return{...e,keys:t,keySet:new Set(t),numKeys:t.length,optionalKeys:new Set(n)}}function Qr(e,t,n,r,o,s){const i=[],a=o.keySet,c=o.catchall._zod,l=c.def.type,u=c.optout==="optional";for(const f in t){if(a.has(f))continue;if(l==="never"){i.push(f);continue}const d=c.run({value:t[f],issues:[]},r);d instanceof Promise?e.push(d.then(h=>vt(h,n,f,t,u))):vt(d,n,f,t,u)}return i.length&&n.issues.push({code:"unrecognized_keys",keys:i,input:t,inst:s}),e.length?Promise.all(e).then(()=>n):n}const wa=p("$ZodObject",(e,t)=>{if(D.init(e,t),!Object.getOwnPropertyDescriptor(t,"shape")?.get){const a=t.shape;Object.defineProperty(t,"shape",{get:()=>{const c={...a};return Object.defineProperty(t,"shape",{value:c}),c}})}const r=pn(()=>Xr(t));A(e._zod,"propValues",()=>{const a=t.shape,c={};for(const l in a){const u=a[l]._zod;if(u.values){c[l]??(c[l]=new Set);for(const f of u.values)c[l].add(f)}}return c});const o=bt,s=t.catchall;let i;e._zod.parse=(a,c)=>{i??(i=r.value);const l=a.value;if(!o(l))return a.issues.push({expected:"object",code:"invalid_type",input:l,inst:e}),a;a.value={};const u=[],f=i.shape;for(const d of i.keys){const h=f[d],g=h._zod.optout==="optional",m=h._zod.run({value:l[d],issues:[]},c);m instanceof Promise?u.push(m.then(y=>vt(y,a,d,l,g))):vt(m,a,d,l,g)}return s?Qr(u,l,a,c,r.value,e):u.length?Promise.all(u).then(()=>a):a}}),_a=p("$ZodObjectJIT",(e,t)=>{wa.init(e,t);const n=e._zod.parse,r=pn(()=>Xr(t)),o=d=>{const h=new Ji(["shape","payload","ctx"]),g=r.value,m=I=>{const w=Dn(I);return`shape[${w}]._zod.run({ value: input[${w}], issues: [] }, ctx)`};h.write("const input = payload.value;");const y=Object.create(null);let x=0;for(const I of g.keys)y[I]=`key_${x++}`;h.write("const newResult = {};");for(const I of g.keys){const w=y[I],O=Dn(I),xe=d[I]?._zod?.optout==="optional";h.write(`const ${w} = ${m(I)};`),xe?h.write(`
        if (${w}.issues.length) {
          if (${O} in input) {
            payload.issues = payload.issues.concat(${w}.issues.map(iss => ({
              ...iss,
              path: iss.path ? [${O}, ...iss.path] : [${O}]
            })));
          }
        }
        
        if (${w}.value === undefined) {
          if (${O} in input) {
            newResult[${O}] = undefined;
          }
        } else {
          newResult[${O}] = ${w}.value;
        }
        
      `):h.write(`
        if (${w}.issues.length) {
          payload.issues = payload.issues.concat(${w}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${O}, ...iss.path] : [${O}]
          })));
        }
        
        if (${w}.value === undefined) {
          if (${O} in input) {
            newResult[${O}] = undefined;
          }
        } else {
          newResult[${O}] = ${w}.value;
        }
        
      `)}h.write("payload.value = newResult;"),h.write("return payload;");const z=h.compile();return(I,w)=>z(d,I,w)};let s;const i=bt,a=!Nr.jitless,l=a&&Ms.value,u=t.catchall;let f;e._zod.parse=(d,h)=>{f??(f=r.value);const g=d.value;return i(g)?a&&l&&h?.async===!1&&h.jitless!==!0?(s||(s=o(t.shape)),d=s(d,h),u?Qr([],g,d,h,f,e):d):n(d,h):(d.issues.push({expected:"object",code:"invalid_type",input:g,inst:e}),d)}});function Bn(e,t,n,r){for(const s of e)if(s.issues.length===0)return t.value=s.value,t;const o=e.filter(s=>!Pe(s));return o.length===1?(t.value=o[0].value,o[0]):(t.issues.push({code:"invalid_union",input:t.value,inst:n,errors:e.map(s=>s.issues.map(i=>ke(i,r,ye())))}),t)}const xa=p("$ZodUnion",(e,t)=>{D.init(e,t),A(e._zod,"optin",()=>t.options.some(o=>o._zod.optin==="optional")?"optional":void 0),A(e._zod,"optout",()=>t.options.some(o=>o._zod.optout==="optional")?"optional":void 0),A(e._zod,"values",()=>{if(t.options.every(o=>o._zod.values))return new Set(t.options.flatMap(o=>Array.from(o._zod.values)))}),A(e._zod,"pattern",()=>{if(t.options.every(o=>o._zod.pattern)){const o=t.options.map(s=>s._zod.pattern);return new RegExp(`^(${o.map(s=>mn(s.source)).join("|")})$`)}});const n=t.options.length===1,r=t.options[0]._zod.run;e._zod.parse=(o,s)=>{if(n)return r(o,s);let i=!1;const a=[];for(const c of t.options){const l=c._zod.run({value:o.value,issues:[]},s);if(l instanceof Promise)a.push(l),i=!0;else{if(l.issues.length===0)return l;a.push(l)}}return i?Promise.all(a).then(c=>Bn(c,o,e,s)):Bn(a,o,e,s)}}),Sa=p("$ZodIntersection",(e,t)=>{D.init(e,t),e._zod.parse=(n,r)=>{const o=n.value,s=t.left._zod.run({value:o,issues:[]},r),i=t.right._zod.run({value:o,issues:[]},r);return s instanceof Promise||i instanceof Promise?Promise.all([s,i]).then(([c,l])=>Jn(n,c,l)):Jn(n,s,i)}});function nn(e,t){if(e===t)return{valid:!0,data:e};if(e instanceof Date&&t instanceof Date&&+e==+t)return{valid:!0,data:e};if(Re(e)&&Re(t)){const n=Object.keys(t),r=Object.keys(e).filter(s=>n.indexOf(s)!==-1),o={...e,...t};for(const s of r){const i=nn(e[s],t[s]);if(!i.valid)return{valid:!1,mergeErrorPath:[s,...i.mergeErrorPath]};o[s]=i.data}return{valid:!0,data:o}}if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return{valid:!1,mergeErrorPath:[]};const n=[];for(let r=0;r<e.length;r++){const o=e[r],s=t[r],i=nn(o,s);if(!i.valid)return{valid:!1,mergeErrorPath:[r,...i.mergeErrorPath]};n.push(i.data)}return{valid:!0,data:n}}return{valid:!1,mergeErrorPath:[]}}function Jn(e,t,n){const r=new Map;let o;for(const a of t.issues)if(a.code==="unrecognized_keys"){o??(o=a);for(const c of a.keys)r.has(c)||r.set(c,{}),r.get(c).l=!0}else e.issues.push(a);for(const a of n.issues)if(a.code==="unrecognized_keys")for(const c of a.keys)r.has(c)||r.set(c,{}),r.get(c).r=!0;else e.issues.push(a);const s=[...r].filter(([,a])=>a.l&&a.r).map(([a])=>a);if(s.length&&o&&e.issues.push({...o,keys:s}),Pe(e))return e;const i=nn(t.value,n.value);if(!i.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(i.mergeErrorPath)}`);return e.value=i.data,e}const $a=p("$ZodRecord",(e,t)=>{D.init(e,t),e._zod.parse=(n,r)=>{const o=n.value;if(!Re(o))return n.issues.push({expected:"record",code:"invalid_type",input:o,inst:e}),n;const s=[],i=t.keyType._zod.values;if(i){n.value={};const a=new Set;for(const l of i)if(typeof l=="string"||typeof l=="number"||typeof l=="symbol"){a.add(typeof l=="number"?l.toString():l);const u=t.valueType._zod.run({value:o[l],issues:[]},r);u instanceof Promise?s.push(u.then(f=>{f.issues.length&&n.issues.push(...Ae(l,f.issues)),n.value[l]=f.value})):(u.issues.length&&n.issues.push(...Ae(l,u.issues)),n.value[l]=u.value)}let c;for(const l in o)a.has(l)||(c=c??[],c.push(l));c&&c.length>0&&n.issues.push({code:"unrecognized_keys",input:o,inst:e,keys:c})}else{n.value={};for(const a of Reflect.ownKeys(o)){if(a==="__proto__")continue;let c=t.keyType._zod.run({value:a,issues:[]},r);if(c instanceof Promise)throw new Error("Async schemas not supported in object keys currently");if(typeof a=="string"&&Wr.test(a)&&c.issues.length&&c.issues.some(f=>f.code==="invalid_type"&&f.expected==="number")){const f=t.keyType._zod.run({value:Number(a),issues:[]},r);if(f instanceof Promise)throw new Error("Async schemas not supported in object keys currently");f.issues.length===0&&(c=f)}if(c.issues.length){t.mode==="loose"?n.value[a]=o[a]:n.issues.push({code:"invalid_key",origin:"record",issues:c.issues.map(f=>ke(f,r,ye())),input:a,path:[a],inst:e});continue}const u=t.valueType._zod.run({value:o[a],issues:[]},r);u instanceof Promise?s.push(u.then(f=>{f.issues.length&&n.issues.push(...Ae(a,f.issues)),n.value[c.value]=f.value})):(u.issues.length&&n.issues.push(...Ae(a,u.issues)),n.value[c.value]=u.value)}}return s.length?Promise.all(s).then(()=>n):n}}),za=p("$ZodEnum",(e,t)=>{D.init(e,t);const n=jr(t.entries),r=new Set(n);e._zod.values=r,e._zod.pattern=new RegExp(`^(${n.filter(o=>Ds.has(typeof o)).map(o=>typeof o=="string"?Ne(o):o.toString()).join("|")})$`),e._zod.parse=(o,s)=>{const i=o.value;return r.has(i)||o.issues.push({code:"invalid_value",values:n,input:i,inst:e}),o}}),Ta=p("$ZodLiteral",(e,t)=>{if(D.init(e,t),t.values.length===0)throw new Error("Cannot create literal schema with no valid values");const n=new Set(t.values);e._zod.values=n,e._zod.pattern=new RegExp(`^(${t.values.map(r=>typeof r=="string"?Ne(r):r?Ne(r.toString()):String(r)).join("|")})$`),e._zod.parse=(r,o)=>{const s=r.value;return n.has(s)||r.issues.push({code:"invalid_value",values:t.values,input:s,inst:e}),r}}),Ea=p("$ZodTransform",(e,t)=>{D.init(e,t),e._zod.parse=(n,r)=>{if(r.direction==="backward")throw new Rr(e.constructor.name);const o=t.transform(n.value,n);if(r.async)return(o instanceof Promise?o:Promise.resolve(o)).then(i=>(n.value=i,n));if(o instanceof Promise)throw new Ie;return n.value=o,n}});function Vn(e,t){return e.issues.length&&t===void 0?{issues:[],value:void 0}:e}const eo=p("$ZodOptional",(e,t)=>{D.init(e,t),e._zod.optin="optional",e._zod.optout="optional",A(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,void 0]):void 0),A(e._zod,"pattern",()=>{const n=t.innerType._zod.pattern;return n?new RegExp(`^(${mn(n.source)})?$`):void 0}),e._zod.parse=(n,r)=>{if(t.innerType._zod.optin==="optional"){const o=t.innerType._zod.run(n,r);return o instanceof Promise?o.then(s=>Vn(s,n.value)):Vn(o,n.value)}return n.value===void 0?n:t.innerType._zod.run(n,r)}}),Oa=p("$ZodExactOptional",(e,t)=>{eo.init(e,t),A(e._zod,"values",()=>t.innerType._zod.values),A(e._zod,"pattern",()=>t.innerType._zod.pattern),e._zod.parse=(n,r)=>t.innerType._zod.run(n,r)}),Pa=p("$ZodNullable",(e,t)=>{D.init(e,t),A(e._zod,"optin",()=>t.innerType._zod.optin),A(e._zod,"optout",()=>t.innerType._zod.optout),A(e._zod,"pattern",()=>{const n=t.innerType._zod.pattern;return n?new RegExp(`^(${mn(n.source)}|null)$`):void 0}),A(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,null]):void 0),e._zod.parse=(n,r)=>n.value===null?n:t.innerType._zod.run(n,r)}),Aa=p("$ZodDefault",(e,t)=>{D.init(e,t),e._zod.optin="optional",A(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(n,r)=>{if(r.direction==="backward")return t.innerType._zod.run(n,r);if(n.value===void 0)return n.value=t.defaultValue,n;const o=t.innerType._zod.run(n,r);return o instanceof Promise?o.then(s=>Wn(s,t)):Wn(o,t)}});function Wn(e,t){return e.value===void 0&&(e.value=t.defaultValue),e}const Ia=p("$ZodPrefault",(e,t)=>{D.init(e,t),e._zod.optin="optional",A(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(n,r)=>(r.direction==="backward"||n.value===void 0&&(n.value=t.defaultValue),t.innerType._zod.run(n,r))}),Ca=p("$ZodNonOptional",(e,t)=>{D.init(e,t),A(e._zod,"values",()=>{const n=t.innerType._zod.values;return n?new Set([...n].filter(r=>r!==void 0)):void 0}),e._zod.parse=(n,r)=>{const o=t.innerType._zod.run(n,r);return o instanceof Promise?o.then(s=>qn(s,e)):qn(o,e)}});function qn(e,t){return!e.issues.length&&e.value===void 0&&e.issues.push({code:"invalid_type",expected:"nonoptional",input:e.value,inst:t}),e}const Za=p("$ZodCatch",(e,t)=>{D.init(e,t),A(e._zod,"optin",()=>t.innerType._zod.optin),A(e._zod,"optout",()=>t.innerType._zod.optout),A(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(n,r)=>{if(r.direction==="backward")return t.innerType._zod.run(n,r);const o=t.innerType._zod.run(n,r);return o instanceof Promise?o.then(s=>(n.value=s.value,s.issues.length&&(n.value=t.catchValue({...n,error:{issues:s.issues.map(i=>ke(i,r,ye()))},input:n.value}),n.issues=[]),n)):(n.value=o.value,o.issues.length&&(n.value=t.catchValue({...n,error:{issues:o.issues.map(s=>ke(s,r,ye()))},input:n.value}),n.issues=[]),n)}}),Ra=p("$ZodPipe",(e,t)=>{D.init(e,t),A(e._zod,"values",()=>t.in._zod.values),A(e._zod,"optin",()=>t.in._zod.optin),A(e._zod,"optout",()=>t.out._zod.optout),A(e._zod,"propValues",()=>t.in._zod.propValues),e._zod.parse=(n,r)=>{if(r.direction==="backward"){const s=t.out._zod.run(n,r);return s instanceof Promise?s.then(i=>nt(i,t.in,r)):nt(s,t.in,r)}const o=t.in._zod.run(n,r);return o instanceof Promise?o.then(s=>nt(s,t.out,r)):nt(o,t.out,r)}});function nt(e,t,n){return e.issues.length?(e.aborted=!0,e):t._zod.run({value:e.value,issues:e.issues},n)}const Na=p("$ZodReadonly",(e,t)=>{D.init(e,t),A(e._zod,"propValues",()=>t.innerType._zod.propValues),A(e._zod,"values",()=>t.innerType._zod.values),A(e._zod,"optin",()=>t.innerType?._zod?.optin),A(e._zod,"optout",()=>t.innerType?._zod?.optout),e._zod.parse=(n,r)=>{if(r.direction==="backward")return t.innerType._zod.run(n,r);const o=t.innerType._zod.run(n,r);return o instanceof Promise?o.then(Hn):Hn(o)}});function Hn(e){return e.value=Object.freeze(e.value),e}const ja=p("$ZodCustom",(e,t)=>{X.init(e,t),D.init(e,t),e._zod.parse=(n,r)=>n,e._zod.check=n=>{const r=n.value,o=t.fn(r);if(o instanceof Promise)return o.then(s=>Gn(s,n,r,e));Gn(o,n,r,e)}});function Gn(e,t,n,r){if(!e){const o={code:"custom",input:n,inst:r,path:[...r._zod.def.path??[]],continue:!r._zod.def.abort};r._zod.def.params&&(o.params=r._zod.def.params),t.issues.push(He(o))}}var Kn;class La{constructor(){this._map=new WeakMap,this._idmap=new Map}add(t,...n){const r=n[0];return this._map.set(t,r),r&&typeof r=="object"&&"id"in r&&this._idmap.set(r.id,t),this}clear(){return this._map=new WeakMap,this._idmap=new Map,this}remove(t){const n=this._map.get(t);return n&&typeof n=="object"&&"id"in n&&this._idmap.delete(n.id),this._map.delete(t),this}get(t){const n=t._zod.parent;if(n){const r={...this.get(n)??{}};delete r.id;const o={...r,...this._map.get(t)};return Object.keys(o).length?o:void 0}return this._map.get(t)}has(t){return this._map.has(t)}}function Ma(){return new La}(Kn=globalThis).__zod_globalRegistry??(Kn.__zod_globalRegistry=Ma());const Je=globalThis.__zod_globalRegistry;function Da(e,t){return new e({type:"string",...b(t)})}function Ua(e,t){return new e({type:"string",format:"email",check:"string_format",abort:!1,...b(t)})}function Yn(e,t){return new e({type:"string",format:"guid",check:"string_format",abort:!1,...b(t)})}function Fa(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,...b(t)})}function Ba(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...b(t)})}function Ja(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...b(t)})}function Va(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...b(t)})}function Wa(e,t){return new e({type:"string",format:"url",check:"string_format",abort:!1,...b(t)})}function qa(e,t){return new e({type:"string",format:"emoji",check:"string_format",abort:!1,...b(t)})}function Ha(e,t){return new e({type:"string",format:"nanoid",check:"string_format",abort:!1,...b(t)})}function Ga(e,t){return new e({type:"string",format:"cuid",check:"string_format",abort:!1,...b(t)})}function Ka(e,t){return new e({type:"string",format:"cuid2",check:"string_format",abort:!1,...b(t)})}function Ya(e,t){return new e({type:"string",format:"ulid",check:"string_format",abort:!1,...b(t)})}function Xa(e,t){return new e({type:"string",format:"xid",check:"string_format",abort:!1,...b(t)})}function Qa(e,t){return new e({type:"string",format:"ksuid",check:"string_format",abort:!1,...b(t)})}function ec(e,t){return new e({type:"string",format:"ipv4",check:"string_format",abort:!1,...b(t)})}function tc(e,t){return new e({type:"string",format:"ipv6",check:"string_format",abort:!1,...b(t)})}function nc(e,t){return new e({type:"string",format:"cidrv4",check:"string_format",abort:!1,...b(t)})}function rc(e,t){return new e({type:"string",format:"cidrv6",check:"string_format",abort:!1,...b(t)})}function oc(e,t){return new e({type:"string",format:"base64",check:"string_format",abort:!1,...b(t)})}function sc(e,t){return new e({type:"string",format:"base64url",check:"string_format",abort:!1,...b(t)})}function ic(e,t){return new e({type:"string",format:"e164",check:"string_format",abort:!1,...b(t)})}function ac(e,t){return new e({type:"string",format:"jwt",check:"string_format",abort:!1,...b(t)})}function cc(e,t){return new e({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...b(t)})}function lc(e,t){return new e({type:"string",format:"date",check:"string_format",...b(t)})}function uc(e,t){return new e({type:"string",format:"time",check:"string_format",precision:null,...b(t)})}function fc(e,t){return new e({type:"string",format:"duration",check:"string_format",...b(t)})}function dc(e,t){return new e({type:"number",checks:[],...b(t)})}function hc(e,t){return new e({type:"number",check:"number_format",abort:!1,format:"safeint",...b(t)})}function pc(e){return new e({type:"unknown"})}function gc(e,t){return new e({type:"never",...b(t)})}function Xn(e,t){return new Hr({check:"less_than",...b(t),value:e,inclusive:!1})}function Ut(e,t){return new Hr({check:"less_than",...b(t),value:e,inclusive:!0})}function Qn(e,t){return new Gr({check:"greater_than",...b(t),value:e,inclusive:!1})}function Ft(e,t){return new Gr({check:"greater_than",...b(t),value:e,inclusive:!0})}function er(e,t){return new Ii({check:"multiple_of",...b(t),value:e})}function to(e,t){return new Zi({check:"max_length",...b(t),maximum:e})}function yt(e,t){return new Ri({check:"min_length",...b(t),minimum:e})}function no(e,t){return new Ni({check:"length_equals",...b(t),length:e})}function mc(e,t){return new ji({check:"string_format",format:"regex",...b(t),pattern:e})}function bc(e){return new Li({check:"string_format",format:"lowercase",...b(e)})}function vc(e){return new Mi({check:"string_format",format:"uppercase",...b(e)})}function yc(e,t){return new Di({check:"string_format",format:"includes",...b(t),includes:e})}function kc(e,t){return new Ui({check:"string_format",format:"starts_with",...b(t),prefix:e})}function wc(e,t){return new Fi({check:"string_format",format:"ends_with",...b(t),suffix:e})}function Me(e){return new Bi({check:"overwrite",tx:e})}function _c(e){return Me(t=>t.normalize(e))}function xc(){return Me(e=>e.trim())}function Sc(){return Me(e=>e.toLowerCase())}function $c(){return Me(e=>e.toUpperCase())}function zc(){return Me(e=>Ls(e))}function Tc(e,t,n){return new e({type:"array",element:t,...b(n)})}function Ec(e,t,n){return new e({type:"custom",check:"custom",fn:t,...b(n)})}function Oc(e){const t=Pc(n=>(n.addIssue=r=>{if(typeof r=="string")n.issues.push(He(r,n.value,t._zod.def));else{const o=r;o.fatal&&(o.continue=!1),o.code??(o.code="custom"),o.input??(o.input=n.value),o.inst??(o.inst=t),o.continue??(o.continue=!t._zod.def.abort),n.issues.push(He(o))}},e(n.value,n)));return t}function Pc(e,t){const n=new X({check:"custom",...b(t)});return n._zod.check=e,n}function ro(e){let t=e?.target??"draft-2020-12";return t==="draft-4"&&(t="draft-04"),t==="draft-7"&&(t="draft-07"),{processors:e.processors??{},metadataRegistry:e?.metadata??Je,target:t,unrepresentable:e?.unrepresentable??"throw",override:e?.override??(()=>{}),io:e?.io??"output",counter:0,seen:new Map,cycles:e?.cycles??"ref",reused:e?.reused??"inline",external:e?.external??void 0}}function J(e,t,n={path:[],schemaPath:[]}){var r;const o=e._zod.def,s=t.seen.get(e);if(s)return s.count++,n.schemaPath.includes(e)&&(s.cycle=n.path),s.schema;const i={schema:{},count:1,cycle:void 0,path:n.path};t.seen.set(e,i);const a=e._zod.toJSONSchema?.();if(a)i.schema=a;else{const u={...n,schemaPath:[...n.schemaPath,e],path:n.path};if(e._zod.processJSONSchema)e._zod.processJSONSchema(t,i.schema,u);else{const d=i.schema,h=t.processors[o.type];if(!h)throw new Error(`[toJSONSchema]: Non-representable type encountered: ${o.type}`);h(e,t,d,u)}const f=e._zod.parent;f&&(i.ref||(i.ref=f),J(f,t,u),t.seen.get(f).isParent=!0)}const c=t.metadataRegistry.get(e);return c&&Object.assign(i.schema,c),t.io==="input"&&K(e)&&(delete i.schema.examples,delete i.schema.default),t.io==="input"&&i.schema._prefault&&((r=i.schema).default??(r.default=i.schema._prefault)),delete i.schema._prefault,t.seen.get(e).schema}function oo(e,t){const n=e.seen.get(t);if(!n)throw new Error("Unprocessed schema. This is a bug in Zod.");const r=new Map;for(const i of e.seen.entries()){const a=e.metadataRegistry.get(i[0])?.id;if(a){const c=r.get(a);if(c&&c!==i[0])throw new Error(`Duplicate schema id "${a}" detected during JSON Schema conversion. Two different schemas cannot share the same id when converted together.`);r.set(a,i[0])}}const o=i=>{const a=e.target==="draft-2020-12"?"$defs":"definitions";if(e.external){const f=e.external.registry.get(i[0])?.id,d=e.external.uri??(g=>g);if(f)return{ref:d(f)};const h=i[1].defId??i[1].schema.id??`schema${e.counter++}`;return i[1].defId=h,{defId:h,ref:`${d("__shared")}#/${a}/${h}`}}if(i[1]===n)return{ref:"#"};const l=`#/${a}/`,u=i[1].schema.id??`__schema${e.counter++}`;return{defId:u,ref:l+u}},s=i=>{if(i[1].schema.$ref)return;const a=i[1],{ref:c,defId:l}=o(i);a.def={...a.schema},l&&(a.defId=l);const u=a.schema;for(const f in u)delete u[f];u.$ref=c};if(e.cycles==="throw")for(const i of e.seen.entries()){const a=i[1];if(a.cycle)throw new Error(`Cycle detected: #/${a.cycle?.join("/")}/<root>

Set the \`cycles\` parameter to \`"ref"\` to resolve cyclical schemas with defs.`)}for(const i of e.seen.entries()){const a=i[1];if(t===i[0]){s(i);continue}if(e.external){const l=e.external.registry.get(i[0])?.id;if(t!==i[0]&&l){s(i);continue}}if(e.metadataRegistry.get(i[0])?.id){s(i);continue}if(a.cycle){s(i);continue}if(a.count>1&&e.reused==="ref"){s(i);continue}}}function so(e,t){const n=e.seen.get(t);if(!n)throw new Error("Unprocessed schema. This is a bug in Zod.");const r=i=>{const a=e.seen.get(i);if(a.ref===null)return;const c=a.def??a.schema,l={...c},u=a.ref;if(a.ref=null,u){r(u);const d=e.seen.get(u),h=d.schema;if(h.$ref&&(e.target==="draft-07"||e.target==="draft-04"||e.target==="openapi-3.0")?(c.allOf=c.allOf??[],c.allOf.push(h)):Object.assign(c,h),Object.assign(c,l),i._zod.parent===u)for(const m in c)m==="$ref"||m==="allOf"||m in l||delete c[m];if(h.$ref)for(const m in c)m==="$ref"||m==="allOf"||m in d.def&&JSON.stringify(c[m])===JSON.stringify(d.def[m])&&delete c[m]}const f=i._zod.parent;if(f&&f!==u){r(f);const d=e.seen.get(f);if(d?.schema.$ref&&(c.$ref=d.schema.$ref,d.def))for(const h in c)h==="$ref"||h==="allOf"||h in d.def&&JSON.stringify(c[h])===JSON.stringify(d.def[h])&&delete c[h]}e.override({zodSchema:i,jsonSchema:c,path:a.path??[]})};for(const i of[...e.seen.entries()].reverse())r(i[0]);const o={};if(e.target==="draft-2020-12"?o.$schema="https://json-schema.org/draft/2020-12/schema":e.target==="draft-07"?o.$schema="http://json-schema.org/draft-07/schema#":e.target==="draft-04"?o.$schema="http://json-schema.org/draft-04/schema#":e.target,e.external?.uri){const i=e.external.registry.get(t)?.id;if(!i)throw new Error("Schema is missing an `id` property");o.$id=e.external.uri(i)}Object.assign(o,n.def??n.schema);const s=e.external?.defs??{};for(const i of e.seen.entries()){const a=i[1];a.def&&a.defId&&(s[a.defId]=a.def)}e.external||Object.keys(s).length>0&&(e.target==="draft-2020-12"?o.$defs=s:o.definitions=s);try{const i=JSON.parse(JSON.stringify(o));return Object.defineProperty(i,"~standard",{value:{...t["~standard"],jsonSchema:{input:kt(t,"input",e.processors),output:kt(t,"output",e.processors)}},enumerable:!1,writable:!1}),i}catch{throw new Error("Error converting schema to JSON.")}}function K(e,t){const n=t??{seen:new Set};if(n.seen.has(e))return!1;n.seen.add(e);const r=e._zod.def;if(r.type==="transform")return!0;if(r.type==="array")return K(r.element,n);if(r.type==="set")return K(r.valueType,n);if(r.type==="lazy")return K(r.getter(),n);if(r.type==="promise"||r.type==="optional"||r.type==="nonoptional"||r.type==="nullable"||r.type==="readonly"||r.type==="default"||r.type==="prefault")return K(r.innerType,n);if(r.type==="intersection")return K(r.left,n)||K(r.right,n);if(r.type==="record"||r.type==="map")return K(r.keyType,n)||K(r.valueType,n);if(r.type==="pipe")return K(r.in,n)||K(r.out,n);if(r.type==="object"){for(const o in r.shape)if(K(r.shape[o],n))return!0;return!1}if(r.type==="union"){for(const o of r.options)if(K(o,n))return!0;return!1}if(r.type==="tuple"){for(const o of r.items)if(K(o,n))return!0;return!!(r.rest&&K(r.rest,n))}return!1}const Ac=(e,t={})=>n=>{const r=ro({...n,processors:t});return J(e,r),oo(r,e),so(r,e)},kt=(e,t,n={})=>r=>{const{libraryOptions:o,target:s}=r??{},i=ro({...o??{},target:s,io:t,processors:n});return J(e,i),oo(i,e),so(i,e)},Ic={guid:"uuid",url:"uri",datetime:"date-time",json_string:"json-string",regex:""},Cc=(e,t,n,r)=>{const o=n;o.type="string";const{minimum:s,maximum:i,format:a,patterns:c,contentEncoding:l}=e._zod.bag;if(typeof s=="number"&&(o.minLength=s),typeof i=="number"&&(o.maxLength=i),a&&(o.format=Ic[a]??a,o.format===""&&delete o.format,a==="time"&&delete o.format),l&&(o.contentEncoding=l),c&&c.size>0){const u=[...c];u.length===1?o.pattern=u[0].source:u.length>1&&(o.allOf=[...u.map(f=>({...t.target==="draft-07"||t.target==="draft-04"||t.target==="openapi-3.0"?{type:"string"}:{},pattern:f.source}))])}},Zc=(e,t,n,r)=>{const o=n,{minimum:s,maximum:i,format:a,multipleOf:c,exclusiveMaximum:l,exclusiveMinimum:u}=e._zod.bag;typeof a=="string"&&a.includes("int")?o.type="integer":o.type="number",typeof u=="number"&&(t.target==="draft-04"||t.target==="openapi-3.0"?(o.minimum=u,o.exclusiveMinimum=!0):o.exclusiveMinimum=u),typeof s=="number"&&(o.minimum=s,typeof u=="number"&&t.target!=="draft-04"&&(u>=s?delete o.minimum:delete o.exclusiveMinimum)),typeof l=="number"&&(t.target==="draft-04"||t.target==="openapi-3.0"?(o.maximum=l,o.exclusiveMaximum=!0):o.exclusiveMaximum=l),typeof i=="number"&&(o.maximum=i,typeof l=="number"&&t.target!=="draft-04"&&(l<=i?delete o.maximum:delete o.exclusiveMaximum)),typeof c=="number"&&(o.multipleOf=c)},Rc=(e,t,n,r)=>{n.not={}},Nc=(e,t,n,r)=>{},jc=(e,t,n,r)=>{const o=e._zod.def,s=jr(o.entries);s.every(i=>typeof i=="number")&&(n.type="number"),s.every(i=>typeof i=="string")&&(n.type="string"),n.enum=s},Lc=(e,t,n,r)=>{const o=e._zod.def,s=[];for(const i of o.values)if(i===void 0){if(t.unrepresentable==="throw")throw new Error("Literal `undefined` cannot be represented in JSON Schema")}else if(typeof i=="bigint"){if(t.unrepresentable==="throw")throw new Error("BigInt literals cannot be represented in JSON Schema");s.push(Number(i))}else s.push(i);if(s.length!==0)if(s.length===1){const i=s[0];n.type=i===null?"null":typeof i,t.target==="draft-04"||t.target==="openapi-3.0"?n.enum=[i]:n.const=i}else s.every(i=>typeof i=="number")&&(n.type="number"),s.every(i=>typeof i=="string")&&(n.type="string"),s.every(i=>typeof i=="boolean")&&(n.type="boolean"),s.every(i=>i===null)&&(n.type="null"),n.enum=s},Mc=(e,t,n,r)=>{if(t.unrepresentable==="throw")throw new Error("Custom types cannot be represented in JSON Schema")},Dc=(e,t,n,r)=>{if(t.unrepresentable==="throw")throw new Error("Transforms cannot be represented in JSON Schema")},Uc=(e,t,n,r)=>{const o=n,s=e._zod.def,{minimum:i,maximum:a}=e._zod.bag;typeof i=="number"&&(o.minItems=i),typeof a=="number"&&(o.maxItems=a),o.type="array",o.items=J(s.element,t,{...r,path:[...r.path,"items"]})},Fc=(e,t,n,r)=>{const o=n,s=e._zod.def;o.type="object",o.properties={};const i=s.shape;for(const l in i)o.properties[l]=J(i[l],t,{...r,path:[...r.path,"properties",l]});const a=new Set(Object.keys(i)),c=new Set([...a].filter(l=>{const u=s.shape[l]._zod;return t.io==="input"?u.optin===void 0:u.optout===void 0}));c.size>0&&(o.required=Array.from(c)),s.catchall?._zod.def.type==="never"?o.additionalProperties=!1:s.catchall?s.catchall&&(o.additionalProperties=J(s.catchall,t,{...r,path:[...r.path,"additionalProperties"]})):t.io==="output"&&(o.additionalProperties=!1)},Bc=(e,t,n,r)=>{const o=e._zod.def,s=o.inclusive===!1,i=o.options.map((a,c)=>J(a,t,{...r,path:[...r.path,s?"oneOf":"anyOf",c]}));s?n.oneOf=i:n.anyOf=i},Jc=(e,t,n,r)=>{const o=e._zod.def,s=J(o.left,t,{...r,path:[...r.path,"allOf",0]}),i=J(o.right,t,{...r,path:[...r.path,"allOf",1]}),a=l=>"allOf"in l&&Object.keys(l).length===1,c=[...a(s)?s.allOf:[s],...a(i)?i.allOf:[i]];n.allOf=c},Vc=(e,t,n,r)=>{const o=n,s=e._zod.def;o.type="object";const i=s.keyType,c=i._zod.bag?.patterns;if(s.mode==="loose"&&c&&c.size>0){const u=J(s.valueType,t,{...r,path:[...r.path,"patternProperties","*"]});o.patternProperties={};for(const f of c)o.patternProperties[f.source]=u}else(t.target==="draft-07"||t.target==="draft-2020-12")&&(o.propertyNames=J(s.keyType,t,{...r,path:[...r.path,"propertyNames"]})),o.additionalProperties=J(s.valueType,t,{...r,path:[...r.path,"additionalProperties"]});const l=i._zod.values;if(l){const u=[...l].filter(f=>typeof f=="string"||typeof f=="number");u.length>0&&(o.required=u)}},Wc=(e,t,n,r)=>{const o=e._zod.def,s=J(o.innerType,t,r),i=t.seen.get(e);t.target==="openapi-3.0"?(i.ref=o.innerType,n.nullable=!0):n.anyOf=[s,{type:"null"}]},qc=(e,t,n,r)=>{const o=e._zod.def;J(o.innerType,t,r);const s=t.seen.get(e);s.ref=o.innerType},Hc=(e,t,n,r)=>{const o=e._zod.def;J(o.innerType,t,r);const s=t.seen.get(e);s.ref=o.innerType,n.default=JSON.parse(JSON.stringify(o.defaultValue))},Gc=(e,t,n,r)=>{const o=e._zod.def;J(o.innerType,t,r);const s=t.seen.get(e);s.ref=o.innerType,t.io==="input"&&(n._prefault=JSON.parse(JSON.stringify(o.defaultValue)))},Kc=(e,t,n,r)=>{const o=e._zod.def;J(o.innerType,t,r);const s=t.seen.get(e);s.ref=o.innerType;let i;try{i=o.catchValue(void 0)}catch{throw new Error("Dynamic catch values are not supported in JSON Schema")}n.default=i},Yc=(e,t,n,r)=>{const o=e._zod.def,s=t.io==="input"?o.in._zod.def.type==="transform"?o.out:o.in:o.out;J(s,t,r);const i=t.seen.get(e);i.ref=s},Xc=(e,t,n,r)=>{const o=e._zod.def;J(o.innerType,t,r);const s=t.seen.get(e);s.ref=o.innerType,n.readOnly=!0},io=(e,t,n,r)=>{const o=e._zod.def;J(o.innerType,t,r);const s=t.seen.get(e);s.ref=o.innerType},Qc=p("ZodISODateTime",(e,t)=>{ra.init(e,t),M.init(e,t)});function el(e){return cc(Qc,e)}const tl=p("ZodISODate",(e,t)=>{oa.init(e,t),M.init(e,t)});function nl(e){return lc(tl,e)}const rl=p("ZodISOTime",(e,t)=>{sa.init(e,t),M.init(e,t)});function ol(e){return uc(rl,e)}const sl=p("ZodISODuration",(e,t)=>{ia.init(e,t),M.init(e,t)});function il(e){return fc(sl,e)}const al=(e,t)=>{Ur.init(e,t),e.name="ZodError",Object.defineProperties(e,{format:{value:n=>Ys(e,n)},flatten:{value:n=>Ks(e,n)},addIssue:{value:n=>{e.issues.push(n),e.message=JSON.stringify(e.issues,tn,2)}},addIssues:{value:n=>{e.issues.push(...n),e.message=JSON.stringify(e.issues,tn,2)}},isEmpty:{get(){return e.issues.length===0}}})},ne=p("ZodError",al,{Parent:Error}),cl=vn(ne),ll=yn(ne),ul=Et(ne),fl=Ot(ne),dl=ei(ne),hl=ti(ne),pl=ni(ne),gl=ri(ne),ml=oi(ne),bl=si(ne),vl=ii(ne),yl=ai(ne),U=p("ZodType",(e,t)=>(D.init(e,t),Object.assign(e["~standard"],{jsonSchema:{input:kt(e,"input"),output:kt(e,"output")}}),e.toJSONSchema=Ac(e,{}),e.def=t,e.type=t.type,Object.defineProperty(e,"_def",{value:t}),e.check=(...n)=>e.clone(we(t,{checks:[...t.checks??[],...n.map(r=>typeof r=="function"?{_zod:{check:r,def:{check:"custom"},onattach:[]}}:r)]}),{parent:!0}),e.with=e.check,e.clone=(n,r)=>_e(e,n,r),e.brand=()=>e,e.register=((n,r)=>(n.add(e,r),e)),e.parse=(n,r)=>cl(e,n,r,{callee:e.parse}),e.safeParse=(n,r)=>ul(e,n,r),e.parseAsync=async(n,r)=>ll(e,n,r,{callee:e.parseAsync}),e.safeParseAsync=async(n,r)=>fl(e,n,r),e.spa=e.safeParseAsync,e.encode=(n,r)=>dl(e,n,r),e.decode=(n,r)=>hl(e,n,r),e.encodeAsync=async(n,r)=>pl(e,n,r),e.decodeAsync=async(n,r)=>gl(e,n,r),e.safeEncode=(n,r)=>ml(e,n,r),e.safeDecode=(n,r)=>bl(e,n,r),e.safeEncodeAsync=async(n,r)=>vl(e,n,r),e.safeDecodeAsync=async(n,r)=>yl(e,n,r),e.refine=(n,r)=>e.check(mu(n,r)),e.superRefine=n=>e.check(bu(n)),e.overwrite=n=>e.check(Me(n)),e.optional=()=>rr(e),e.exactOptional=()=>ru(e),e.nullable=()=>or(e),e.nullish=()=>rr(or(e)),e.nonoptional=n=>lu(e,n),e.array=()=>Jl(e),e.or=n=>ql([e,n]),e.and=n=>Gl(e,n),e.transform=n=>sr(e,tu(n)),e.default=n=>iu(e,n),e.prefault=n=>cu(e,n),e.catch=n=>fu(e,n),e.pipe=n=>sr(e,n),e.readonly=()=>pu(e),e.describe=n=>{const r=e.clone();return Je.add(r,{description:n}),r},Object.defineProperty(e,"description",{get(){return Je.get(e)?.description},configurable:!0}),e.meta=(...n)=>{if(n.length===0)return Je.get(e);const r=e.clone();return Je.add(r,n[0]),r},e.isOptional=()=>e.safeParse(void 0).success,e.isNullable=()=>e.safeParse(null).success,e.apply=n=>n(e),e)),ao=p("_ZodString",(e,t)=>{kn.init(e,t),U.init(e,t),e._zod.processJSONSchema=(r,o,s)=>Cc(e,r,o);const n=e._zod.bag;e.format=n.format??null,e.minLength=n.minimum??null,e.maxLength=n.maximum??null,e.regex=(...r)=>e.check(mc(...r)),e.includes=(...r)=>e.check(yc(...r)),e.startsWith=(...r)=>e.check(kc(...r)),e.endsWith=(...r)=>e.check(wc(...r)),e.min=(...r)=>e.check(yt(...r)),e.max=(...r)=>e.check(to(...r)),e.length=(...r)=>e.check(no(...r)),e.nonempty=(...r)=>e.check(yt(1,...r)),e.lowercase=r=>e.check(bc(r)),e.uppercase=r=>e.check(vc(r)),e.trim=()=>e.check(xc()),e.normalize=(...r)=>e.check(_c(...r)),e.toLowerCase=()=>e.check(Sc()),e.toUpperCase=()=>e.check($c()),e.slugify=()=>e.check(zc())}),kl=p("ZodString",(e,t)=>{kn.init(e,t),ao.init(e,t),e.email=n=>e.check(Ua(wl,n)),e.url=n=>e.check(Wa(_l,n)),e.jwt=n=>e.check(ac(jl,n)),e.emoji=n=>e.check(qa(xl,n)),e.guid=n=>e.check(Yn(tr,n)),e.uuid=n=>e.check(Fa(rt,n)),e.uuidv4=n=>e.check(Ba(rt,n)),e.uuidv6=n=>e.check(Ja(rt,n)),e.uuidv7=n=>e.check(Va(rt,n)),e.nanoid=n=>e.check(Ha(Sl,n)),e.guid=n=>e.check(Yn(tr,n)),e.cuid=n=>e.check(Ga($l,n)),e.cuid2=n=>e.check(Ka(zl,n)),e.ulid=n=>e.check(Ya(Tl,n)),e.base64=n=>e.check(oc(Zl,n)),e.base64url=n=>e.check(sc(Rl,n)),e.xid=n=>e.check(Xa(El,n)),e.ksuid=n=>e.check(Qa(Ol,n)),e.ipv4=n=>e.check(ec(Pl,n)),e.ipv6=n=>e.check(tc(Al,n)),e.cidrv4=n=>e.check(nc(Il,n)),e.cidrv6=n=>e.check(rc(Cl,n)),e.e164=n=>e.check(ic(Nl,n)),e.datetime=n=>e.check(el(n)),e.date=n=>e.check(nl(n)),e.time=n=>e.check(ol(n)),e.duration=n=>e.check(il(n))});function Ue(e){return Da(kl,e)}const M=p("ZodStringFormat",(e,t)=>{j.init(e,t),ao.init(e,t)}),wl=p("ZodEmail",(e,t)=>{Hi.init(e,t),M.init(e,t)}),tr=p("ZodGUID",(e,t)=>{Wi.init(e,t),M.init(e,t)}),rt=p("ZodUUID",(e,t)=>{qi.init(e,t),M.init(e,t)}),_l=p("ZodURL",(e,t)=>{Gi.init(e,t),M.init(e,t)}),xl=p("ZodEmoji",(e,t)=>{Ki.init(e,t),M.init(e,t)}),Sl=p("ZodNanoID",(e,t)=>{Yi.init(e,t),M.init(e,t)}),$l=p("ZodCUID",(e,t)=>{Xi.init(e,t),M.init(e,t)}),zl=p("ZodCUID2",(e,t)=>{Qi.init(e,t),M.init(e,t)}),Tl=p("ZodULID",(e,t)=>{ea.init(e,t),M.init(e,t)}),El=p("ZodXID",(e,t)=>{ta.init(e,t),M.init(e,t)}),Ol=p("ZodKSUID",(e,t)=>{na.init(e,t),M.init(e,t)}),Pl=p("ZodIPv4",(e,t)=>{aa.init(e,t),M.init(e,t)}),Al=p("ZodIPv6",(e,t)=>{ca.init(e,t),M.init(e,t)}),Il=p("ZodCIDRv4",(e,t)=>{la.init(e,t),M.init(e,t)}),Cl=p("ZodCIDRv6",(e,t)=>{ua.init(e,t),M.init(e,t)}),Zl=p("ZodBase64",(e,t)=>{fa.init(e,t),M.init(e,t)}),Rl=p("ZodBase64URL",(e,t)=>{ha.init(e,t),M.init(e,t)}),Nl=p("ZodE164",(e,t)=>{pa.init(e,t),M.init(e,t)}),jl=p("ZodJWT",(e,t)=>{ma.init(e,t),M.init(e,t)}),co=p("ZodNumber",(e,t)=>{Yr.init(e,t),U.init(e,t),e._zod.processJSONSchema=(r,o,s)=>Zc(e,r,o),e.gt=(r,o)=>e.check(Qn(r,o)),e.gte=(r,o)=>e.check(Ft(r,o)),e.min=(r,o)=>e.check(Ft(r,o)),e.lt=(r,o)=>e.check(Xn(r,o)),e.lte=(r,o)=>e.check(Ut(r,o)),e.max=(r,o)=>e.check(Ut(r,o)),e.int=r=>e.check(nr(r)),e.safe=r=>e.check(nr(r)),e.positive=r=>e.check(Qn(0,r)),e.nonnegative=r=>e.check(Ft(0,r)),e.negative=r=>e.check(Xn(0,r)),e.nonpositive=r=>e.check(Ut(0,r)),e.multipleOf=(r,o)=>e.check(er(r,o)),e.step=(r,o)=>e.check(er(r,o)),e.finite=()=>e;const n=e._zod.bag;e.minValue=Math.max(n.minimum??Number.NEGATIVE_INFINITY,n.exclusiveMinimum??Number.NEGATIVE_INFINITY)??null,e.maxValue=Math.min(n.maximum??Number.POSITIVE_INFINITY,n.exclusiveMaximum??Number.POSITIVE_INFINITY)??null,e.isInt=(n.format??"").includes("int")||Number.isSafeInteger(n.multipleOf??.5),e.isFinite=!0,e.format=n.format??null});function Ll(e){return dc(co,e)}const Ml=p("ZodNumberFormat",(e,t)=>{ba.init(e,t),co.init(e,t)});function nr(e){return hc(Ml,e)}const Dl=p("ZodUnknown",(e,t)=>{va.init(e,t),U.init(e,t),e._zod.processJSONSchema=(n,r,o)=>Nc()});function rn(){return pc(Dl)}const Ul=p("ZodNever",(e,t)=>{ya.init(e,t),U.init(e,t),e._zod.processJSONSchema=(n,r,o)=>Rc(e,n,r)});function Fl(e){return gc(Ul,e)}const Bl=p("ZodArray",(e,t)=>{ka.init(e,t),U.init(e,t),e._zod.processJSONSchema=(n,r,o)=>Uc(e,n,r,o),e.element=t.element,e.min=(n,r)=>e.check(yt(n,r)),e.nonempty=n=>e.check(yt(1,n)),e.max=(n,r)=>e.check(to(n,r)),e.length=(n,r)=>e.check(no(n,r)),e.unwrap=()=>e.element});function Jl(e,t){return Tc(Bl,e,t)}const Vl=p("ZodObject",(e,t)=>{_a.init(e,t),U.init(e,t),e._zod.processJSONSchema=(n,r,o)=>Fc(e,n,r,o),A(e,"shape",()=>t.shape),e.keyof=()=>at(Object.keys(e._zod.def.shape)),e.catchall=n=>e.clone({...e._zod.def,catchall:n}),e.passthrough=()=>e.clone({...e._zod.def,catchall:rn()}),e.loose=()=>e.clone({...e._zod.def,catchall:rn()}),e.strict=()=>e.clone({...e._zod.def,catchall:Fl()}),e.strip=()=>e.clone({...e._zod.def,catchall:void 0}),e.extend=n=>Vs(e,n),e.safeExtend=n=>Ws(e,n),e.merge=n=>qs(e,n),e.pick=n=>Bs(e,n),e.omit=n=>Js(e,n),e.partial=(...n)=>Hs(uo,e,n[0]),e.required=(...n)=>Gs(fo,e,n[0])});function lo(e,t){const n={type:"object",shape:e??{},...b(t)};return new Vl(n)}const Wl=p("ZodUnion",(e,t)=>{xa.init(e,t),U.init(e,t),e._zod.processJSONSchema=(n,r,o)=>Bc(e,n,r,o),e.options=t.options});function ql(e,t){return new Wl({type:"union",options:e,...b(t)})}const Hl=p("ZodIntersection",(e,t)=>{Sa.init(e,t),U.init(e,t),e._zod.processJSONSchema=(n,r,o)=>Jc(e,n,r,o)});function Gl(e,t){return new Hl({type:"intersection",left:e,right:t})}const Kl=p("ZodRecord",(e,t)=>{$a.init(e,t),U.init(e,t),e._zod.processJSONSchema=(n,r,o)=>Vc(e,n,r,o),e.keyType=t.keyType,e.valueType=t.valueType});function Yl(e,t,n){return new Kl({type:"record",keyType:e,valueType:t,...b(n)})}const on=p("ZodEnum",(e,t)=>{za.init(e,t),U.init(e,t),e._zod.processJSONSchema=(r,o,s)=>jc(e,r,o),e.enum=t.entries,e.options=Object.values(t.entries);const n=new Set(Object.keys(t.entries));e.extract=(r,o)=>{const s={};for(const i of r)if(n.has(i))s[i]=t.entries[i];else throw new Error(`Key ${i} not found in enum`);return new on({...t,checks:[],...b(o),entries:s})},e.exclude=(r,o)=>{const s={...t.entries};for(const i of r)if(n.has(i))delete s[i];else throw new Error(`Key ${i} not found in enum`);return new on({...t,checks:[],...b(o),entries:s})}});function at(e,t){const n=Array.isArray(e)?Object.fromEntries(e.map(r=>[r,r])):e;return new on({type:"enum",entries:n,...b(t)})}const Xl=p("ZodLiteral",(e,t)=>{Ta.init(e,t),U.init(e,t),e._zod.processJSONSchema=(n,r,o)=>Lc(e,n,r),e.values=new Set(t.values),Object.defineProperty(e,"value",{get(){if(t.values.length>1)throw new Error("This schema contains multiple valid literal values. Use `.values` instead.");return t.values[0]}})});function Ql(e,t){return new Xl({type:"literal",values:Array.isArray(e)?e:[e],...b(t)})}const eu=p("ZodTransform",(e,t)=>{Ea.init(e,t),U.init(e,t),e._zod.processJSONSchema=(n,r,o)=>Dc(e,n),e._zod.parse=(n,r)=>{if(r.direction==="backward")throw new Rr(e.constructor.name);n.addIssue=s=>{if(typeof s=="string")n.issues.push(He(s,n.value,t));else{const i=s;i.fatal&&(i.continue=!1),i.code??(i.code="custom"),i.input??(i.input=n.value),i.inst??(i.inst=e),n.issues.push(He(i))}};const o=t.transform(n.value,n);return o instanceof Promise?o.then(s=>(n.value=s,n)):(n.value=o,n)}});function tu(e){return new eu({type:"transform",transform:e})}const uo=p("ZodOptional",(e,t)=>{eo.init(e,t),U.init(e,t),e._zod.processJSONSchema=(n,r,o)=>io(e,n,r,o),e.unwrap=()=>e._zod.def.innerType});function rr(e){return new uo({type:"optional",innerType:e})}const nu=p("ZodExactOptional",(e,t)=>{Oa.init(e,t),U.init(e,t),e._zod.processJSONSchema=(n,r,o)=>io(e,n,r,o),e.unwrap=()=>e._zod.def.innerType});function ru(e){return new nu({type:"optional",innerType:e})}const ou=p("ZodNullable",(e,t)=>{Pa.init(e,t),U.init(e,t),e._zod.processJSONSchema=(n,r,o)=>Wc(e,n,r,o),e.unwrap=()=>e._zod.def.innerType});function or(e){return new ou({type:"nullable",innerType:e})}const su=p("ZodDefault",(e,t)=>{Aa.init(e,t),U.init(e,t),e._zod.processJSONSchema=(n,r,o)=>Hc(e,n,r,o),e.unwrap=()=>e._zod.def.innerType,e.removeDefault=e.unwrap});function iu(e,t){return new su({type:"default",innerType:e,get defaultValue(){return typeof t=="function"?t():Mr(t)}})}const au=p("ZodPrefault",(e,t)=>{Ia.init(e,t),U.init(e,t),e._zod.processJSONSchema=(n,r,o)=>Gc(e,n,r,o),e.unwrap=()=>e._zod.def.innerType});function cu(e,t){return new au({type:"prefault",innerType:e,get defaultValue(){return typeof t=="function"?t():Mr(t)}})}const fo=p("ZodNonOptional",(e,t)=>{Ca.init(e,t),U.init(e,t),e._zod.processJSONSchema=(n,r,o)=>qc(e,n,r,o),e.unwrap=()=>e._zod.def.innerType});function lu(e,t){return new fo({type:"nonoptional",innerType:e,...b(t)})}const uu=p("ZodCatch",(e,t)=>{Za.init(e,t),U.init(e,t),e._zod.processJSONSchema=(n,r,o)=>Kc(e,n,r,o),e.unwrap=()=>e._zod.def.innerType,e.removeCatch=e.unwrap});function fu(e,t){return new uu({type:"catch",innerType:e,catchValue:typeof t=="function"?t:()=>t})}const du=p("ZodPipe",(e,t)=>{Ra.init(e,t),U.init(e,t),e._zod.processJSONSchema=(n,r,o)=>Yc(e,n,r,o),e.in=t.in,e.out=t.out});function sr(e,t){return new du({type:"pipe",in:e,out:t})}const hu=p("ZodReadonly",(e,t)=>{Na.init(e,t),U.init(e,t),e._zod.processJSONSchema=(n,r,o)=>Xc(e,n,r,o),e.unwrap=()=>e._zod.def.innerType});function pu(e){return new hu({type:"readonly",innerType:e})}const gu=p("ZodCustom",(e,t)=>{ja.init(e,t),U.init(e,t),e._zod.processJSONSchema=(n,r,o)=>Mc(e,n)});function mu(e,t={}){return Ec(gu,e,t)}function bu(e){return Oc(e)}const vu=lo({address:at(["session","user"]),target:at(["user","agent"]),handler:at(["system","agent"])}),yu=lo({type:Ql("notification"),id:Ue(),session_id:Ue().nullable().optional(),content:Ue(),routing:vu,owner_lease:Ll(),metadata:Yl(Ue(),rn()).nullable().optional(),timestamp:Ue().nullable().optional()});function ku(){const[e,t]=Z(0),n=new BroadcastChannel("mmcp_lease_fence");return n.onmessage=o=>{o.data.type==="LEASE_UPDATE"&&o.data.lease>e()&&t(o.data.lease)},{activeLease:e,updateLease:o=>{o>e()&&(t(o),n.postMessage({type:"LEASE_UPDATE",lease:o}))}}}const sn=le(ku);function wu(){const[e,t]=Z(null);return{sessionActivity:e,triggerSessionActivity:r=>{t(r),setTimeout(()=>t(null),0)}}}const ho=le(wu),_u=window.location.protocol==="https:"?"wss:":"ws:",xu=window.location.port==="3000"?"localhost:3000":window.location.host,Su=`${_u}//${xu}/api/v1/notifications/ws`,$u=Is(Su),zu=$u.pipe(Dt(e=>e.type==="notification"),Rs(e=>{const t=yu.safeParse(e);return t.success?t.data:null}),Dt(e=>e!==null),Dt(e=>e.owner_lease>sn.activeLease()),Ns(e=>{sn.updateLease(e.owner_lease),e.session_id&&ho.triggerSessionActivity(e.session_id)})),Tu=(e,t)=>{fetch("/api/v1/notifications/ack",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e,lease_id:t,type:"ack"})})};var Eu=E("<button>");function ir(e){const[t,n]=Fo(e,["children","class","highlight"]);return(()=>{var r=Eu();return Er(r,zr(n,{get class(){return`cursor-pointer border-none bg-transparent outline-none select-none transition-colors text-[var(--color-primary)] hover:text-[var(--color-primary-highlight)] ${t.highlight?"text-[var(--color-primary-highlight)]":""} ${t.class||""}`}}),!1),S(r,()=>t.children),r})()}var Ou=E('<div class="px-6 py-4 flex justify-end gap-3">'),Pu=E('<div><div><div class="px-6 py-4"><h3 class="text-lg font-semibold text-zinc-100"></h3></div><div class="px-6 py-4">');function ar(e){const t=r=>{r.target===r.currentTarget&&e.onClose()},n=r=>{r.key==="Escape"&&e.onClose()};return je(()=>{e.isOpen&&document.addEventListener("keydown",n)}),Se(()=>{document.removeEventListener("keydown",n)}),(()=>{var r=Pu(),o=r.firstChild,s=o.firstChild,i=s.firstChild,a=s.nextSibling;return r.$$click=t,o.$$click=c=>c.stopPropagation(),S(i,()=>e.title),S(a,()=>e.children),S(o,C(ce,{get when(){return e.actions},get children(){var c=Ou();return S(c,()=>e.actions),c}}),null),V(c=>{var l=`fixed inset-0 z-50 flex items-center justify-center transition-opacity duration-300 ease-out ${e.isOpen?"bg-black/20 opacity-100":"bg-black/0 opacity-0 pointer-events-none"}`,u=`bg-[var(--bg-tertiary)] rounded-lg shadow-lg max-w-md w-full mx-4 transition-all duration-300 ease-out ${e.isOpen?"scale-100 opacity-100":"scale-95 opacity-0"}`;return l!==c.e&&ue(r,c.e=l),u!==c.t&&ue(o,c.t=u),c},{e:void 0,t:void 0}),r})()}Ge(["click"]);var Au=E("<div>");function po(e){const[t,n]=Z(!1),[r,o]=Z(!1);let s,i;const a=h=>{s=h,e.ref&&e.ref(h)},c=()=>{n(!0),i&&clearTimeout(i),i=window.setTimeout(()=>{n(!1)},3e3)},l=h=>{if(!s)return;const g=s.getBoundingClientRect(),m=e.orientation!=="horizontal",y=17;let x=!1;m?x=h.clientX>=g.right-y&&h.clientX<=g.right&&h.clientY>=g.top&&h.clientY<=g.bottom:x=h.clientY>=g.bottom-y&&h.clientY<=g.bottom&&h.clientX>=g.left&&h.clientX<=g.right,o(x)},u=()=>{o(!1)};je(()=>{s&&(s.addEventListener("scroll",c,{passive:!0}),s.addEventListener("mousemove",l),s.addEventListener("mouseleave",u))}),Se(()=>{i&&clearTimeout(i),s&&(s.removeEventListener("scroll",c),s.removeEventListener("mousemove",l),s.removeEventListener("mouseleave",u))});const f=()=>{const h="mmcp-scrollbar",g=e.orientation==="horizontal"?"overflow-x-auto overflow-y-hidden":e.orientation==="vertical"?"overflow-y-auto overflow-x-hidden":"overflow-auto";return`${h} ${g} ${e.class||""}`.trim()},d=()=>t()||r();return(()=>{var h=Au();return zt(a,h),S(h,()=>e.children),V(g=>{var m=f(),y=d()?"1":"0",x=d()?"#151515":"transparent";return m!==g.e&&ue(h,g.e=m),y!==g.t&&ae(h,"--scrollbar-opacity",g.t=y),x!==g.a&&ae(h,"--scrollbar-bg",g.a=x),g},{e:void 0,t:void 0,a:void 0}),h})()}var Iu=E('<svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M9 5l7 7-7 7">'),Cu=E('<svg class="w-5 h-5 flex-shrink-0"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M12 4v16m8-8H4">'),Zu=E('<span class="text-white text-sm font-mono transition-opacity duration-300 truncate w-[120px]">New chat'),Ru=E('<div data-menu-dropdown class="fixed z-[100] w-48 bg-[var(--bg-tertiary)] border border-[var(--border-primary)] rounded-md"><button class="w-full px-4 py-2 text-left text-sm text-zinc-100 hover:bg-zinc-700 transition-colors first:rounded-t-md">Rename</button><button class="w-full px-4 py-2 text-left text-sm text-red-400 hover:bg-zinc-700 transition-colors last:rounded-b-md">Delete'),Nu=E('<p class="text-zinc-300 text-sm">Are you sure you want to delete this session? This action cannot be undone.'),ju=E('<div class=space-y-4><input type=text class="w-full px-3 py-2 bg-[var(--bg-secondary)] border border-[var(--border-primary)] rounded-md text-zinc-100 placeholder-zinc-500 focus:outline-none"placeholder="Enter new session name"autofocus>'),Lu=E('<div class="h-full flex flex-col min-h-0 relative overflow-hidden select-none"><div class="border-b border-[var(--border-secondary)] flex flex-col gap-3 h-[120px] py-4"style=padding-left:22px;padding-right:22px></div><div>'),Mu=E('<svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"stroke-width=2 stroke-linecap=round stroke-linejoin=round><path d="M15 19l-7-7 7-7">'),Du=E('<div class="p-4 text-zinc-500 text-sm">Loading sessions...'),Uu=E('<div class="p-4 text-zinc-500 text-sm">No sessions yet'),Fu=E('<div class="group relative"><div><div class="text-sm text-zinc-100 truncate whitespace-nowrap max-w-[240px] group-hover:max-w-[calc(100%)] flex-1 text-left min-w-0 overflow-hidden"></div><div class="relative flex-shrink-0 flex items-center justify-center transition-all z-10"data-menu-container><button class="p-0 text-zinc-400 hover:text-zinc-100 transition-colors relative z-10 cursor-pointer"title="Session options"><svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z">'),cr=E('<button class="px-4 py-2 text-sm text-zinc-300 hover:text-zinc-100 transition-colors cursor-pointer">Cancel'),Bu=E('<button class="px-4 py-2 text-sm bg-red-600 text-white hover:bg-red-700 transition-colors rounded cursor-pointer">Delete'),Ju=E('<button class="px-4 py-2 text-sm font-bold bg-[var(--color-primary)] hover:bg-[var(--color-primary-highlight)] text-black transition-colors rounded cursor-pointer">Rename');function Vu(e){const[t,{refetch:n,mutate:r}]=Zo(()=>cs()),[o,s]=Z(null),[i,a]=Z(null),[c,l]=Z(!1),[u,f]=Z(null),[d,h]=Z(!1),[g,m]=Z(null),[y,x]=Z(""),z=te.currentSessionId,I=()=>{te.clearSession()},w=(v,T)=>{s(null),a(null),m({id:v,title:T}),x(T),h(!0)},O=async()=>{const v=g(),T=y().trim();if(!(!v||!T||T===v.title)){h(!1),m(null),x("");try{await ls(v.id,T),n()}catch(H){alert(`Failed to rename session: ${H}`)}}},fe=()=>{h(!1),m(null),x("")},xe=async v=>{s(null),a(null),f(v),l(!0)},Xe=async()=>{const v=u();if(!v)return;l(!1),f(null);const T=t();if(T)try{await us(v),z()===v&&te.clearSession();const H=T.filter(k=>k.id!==v);r(H)}catch(H){console.error("Delete failed",H),alert(`Failed to delete session: ${H}`),n()}},F=()=>{l(!1),f(null)};let L=null;Ce(()=>{const v=z(),T=t();if(v&&!L&&T&&!T.some(k=>k.id===v)){const k=te.pendingSessionTitle(),W=[{id:v,title:k||"New Chat",updated_at:new Date().toISOString()},...T];r(W)}L=v});const Q=v=>{const T=t();if(!T)return;const H=T.findIndex(B=>B.id===v);if(H<=0)return;const k=T[H],q=T.filter(B=>B.id!==v),W=[k,...q];r(W)};return Ce(()=>{const v=ho.sessionActivity();v&&Q(v)}),je(()=>{const v=T=>{const H=T.target;!H.closest("[data-menu-container]")&&!H.closest("[data-menu-dropdown]")&&(s(null),a(null))};document.addEventListener("click",v),Se(()=>document.removeEventListener("click",v))}),(()=>{var v=Lu(),T=v.firstChild,H=T.nextSibling;return S(T,C(ir,{get onClick(){return e.onToggle},class:"self-start h-[36px] flex items-center justify-center",get title(){return e.isCollapsed?"Expand sidebar":"Collapse sidebar"},get children(){return C(ce,{get when(){return e.isCollapsed},get fallback(){return Mu()},get children(){return Iu()}})}}),null),S(T,C(ir,{onClick:I,class:"flex items-center gap-2 self-start h-[36px]",title:"New chat",get children(){return[Cu(),(()=>{var k=Zu();return V(q=>{var W=!!e.isCollapsed,B=!e.isCollapsed;return W!==q.e&&k.classList.toggle("opacity-0",q.e=W),B!==q.t&&k.classList.toggle("opacity-100",q.t=B),q},{e:void 0,t:void 0}),k})()]}}),null),S(H,C(po,{class:"flex-1",get children(){return C(ce,{get when(){return!t.loading},get fallback(){return Du()},get children(){return C(ce,{get when(){return An(()=>!!t())()&&t().length>0},get fallback(){return Uu()},get children(){return C(Tr,{get each(){return t()},children:k=>{const q=()=>{const W=z();return W===k.id&&W!==null};return(()=>{var W=Fu(),B=W.firstChild,ee=B.firstChild,me=ee.nextSibling,Ct=me.firstChild;return B.$$click=()=>{te.loadSession(k.id)},S(ee,()=>k.title||"New Chat"),Ct.$$click=be=>{be.stopPropagation();const De=be.currentTarget.getBoundingClientRect();if(o()===k.id)s(null),a(null);else{s(k.id);const zo=192,To=De.left+De.width/2;a({top:De.bottom+4,left:To-zo/2})}},V(be=>{var Zt=`flex items-center w-full hover:bg-[var(--bg-tertiary)] transition-colors px-4 py-3 ${q()?"bg-[var(--bg-tertiary)] border-l-2 border-l-[var(--color-primary)]":""}`,De={"w-0 overflow-hidden opacity-0 group-hover:w-auto group-hover:opacity-100":o()!==k.id,"w-auto opacity-100":o()===k.id};return Zt!==be.e&&ue(B,be.e=Zt),be.t=fn(me,De,be.t),be},{e:void 0,t:void 0}),W})()}})}})}})}})),S(v,C(as,{get children(){return C(ce,{get when(){return An(()=>!!o())()&&i()},get children(){var k=Ru(),q=k.firstChild,W=q.nextSibling;return q.$$click=B=>{B.stopPropagation();const ee=o();if(ee){const me=t()?.find(Ct=>Ct.id===ee);me&&w(ee,me.title||"New Chat")}},W.$$click=B=>{B.stopPropagation();const ee=o();ee&&xe(ee)},V(B=>{var ee=`${i().top}px`,me=`${i().left}px`;return ee!==B.e&&ae(k,"top",B.e=ee),me!==B.t&&ae(k,"left",B.t=me),B},{e:void 0,t:void 0}),k}})}}),null),S(v,C(ar,{get isOpen(){return c()},onClose:F,title:"Delete Session",get actions(){return[(()=>{var k=cr();return k.$$click=F,k})(),(()=>{var k=Bu();return k.$$click=Xe,k})()]},get children(){return Nu()}}),null),S(v,C(ar,{get isOpen(){return d()},onClose:fe,title:"Rename Session",get actions(){return[(()=>{var k=cr();return k.$$click=fe,k})(),(()=>{var k=Ju();return k.$$click=O,V(()=>k.disabled=!y().trim()||y().trim()===g()?.title),k})()]},get children(){var k=ju(),q=k.firstChild;return q.$$keydown=W=>{W.key==="Enter"&&O()},q.$$input=W=>x(W.currentTarget.value),V(()=>q.value=y()),k}}),null),V(()=>ue(H,`flex-1 flex flex-col min-h-0 transition-opacity duration-300 w-[280px] ${e.isCollapsed?"opacity-0 pointer-events-none":"opacity-100"}`)),v})()}Ge(["click","input","keydown"]);var Wu=E('<div class="flex h-screen bg-[var(--bg-primary)] text-zinc-100"><aside></aside><main class="flex-1 overflow-auto"><div class="max-w-4xl mx-auto h-full">');function qu(e){const[t,n]=Z(!1);return(()=>{var r=Wu(),o=r.firstChild,s=o.nextSibling,i=s.firstChild;return S(o,C(Vu,{get isCollapsed(){return t()},onToggle:()=>n(!t())})),S(i,()=>e.children),V(()=>ue(o,`bg-[var(--bg-secondary)] border-r border-[var(--border-primary)] flex-shrink-0 transition-all duration-300 overflow-hidden ${t()?"w-[64px]":"w-[280px]"}`)),r})()}class Hu{historyEffectInitialized=!1;async sendMessage(t){if(!t||Ze.isBusy())return;const n=crypto.randomUUID();_.addMessage({id:n,sender:"user",content:t,isPersistent:!1});const r=crypto.randomUUID();try{let o=null;for await(const s of hs(t,te.currentSessionId()))s.session_id&&!o&&(o=s.session_id),this.handleStreamChunk(s,r);if(o&&o!==te.currentSessionId()){const s=t.split(`
`)[0].trim()||t.trim();te.setPendingTitle(s),te.setSessionId(o)}this.finalizeStreamingResponse(r)}catch(o){console.error("Chat streaming failed:",o),_.updateStreamingContent("Error: Failed to send message")}}async resolveAction(t){const n=_.pendingAction();if(!n||!n.approval_id)return;const r=t?"approve":"deny",o=n.session_id||te.currentSessionId();if(!o){console.warn("Global-scope action resolution not yet implemented"),_.setPendingActionData(null);return}_.setPendingActionData(null);try{const s=crypto.randomUUID();for await(const i of ps(o,n.approval_id,r))this.handleStreamChunk(i,s);this.finalizeStreamingResponse(s)}catch(s){console.error("Action resolution failed:",s),_.updateStreamingContent("Error: Failed to resolve action")}}handleStreamChunk(t,n){if(t.type==="action_request")_.setPendingActionData(t),_.clearStreamingContent(),_.setIsThinking(!1);else if(t.type==="tool_use"){const r=crypto.randomUUID();_.addMessage({id:r,sender:"system",content:t.content||"",handler:"system",isPersistent:!1}),_.setIsThinking(!1)}else _.updateStreamingContent(t.response||""),t.response&&t.response.trim().length>0&&_.setIsThinking(!1)}finalizeStreamingResponse(t){const n=_.streamingContent();n&&_.addMessage({id:t,sender:"agent",content:n,isPersistent:!1}),_.clearStreamingContent()}initHistoryLoading(){this.historyEffectInitialized||(this.historyEffectInitialized=!0,Ce(()=>{const t=te.currentSessionId();t?Or.loadHistory(t).then(n=>{n&&(_.clearMessages(),_.setMessagesList(n))}):_.clearMessages()}))}}const Bt=new Hu;class Gu{subscription=null;observer=null;pendingAcks=new Set;debounceTimer;initialize(){this.setupObserver(),this.setupNotifications()}cleanup(){this.subscription&&this.subscription.unsubscribe(),this.observer&&this.observer.disconnect(),this.debounceTimer&&clearTimeout(this.debounceTimer)}observeNotification(t,n){this.observer&&this.observer.observe(t)}setupObserver(){this.observer=new IntersectionObserver(t=>{t.forEach(n=>{if(n.isIntersecting){const r=n.target.getAttribute("data-notification-id");r&&this.pendingAcks.add(r)}}),this.debounceTimer&&clearTimeout(this.debounceTimer),this.debounceTimer=window.setTimeout(()=>{if(this.pendingAcks.size>0){const n=sn.activeLease();this.pendingAcks.forEach(r=>{Tu(r,n)}),this.pendingAcks.clear()}},500)},{threshold:.5})}setupNotifications(){this.subscription=zu.subscribe(t=>{if(_.messages().find(o=>o.id===t.id))return;const r={id:t.id,sender:t.routing.handler==="system"?"system":"agent",content:t.content,handler:t.routing.handler,isPersistent:!0};_.addMessage(r)})}}const Jt=new Gu,Ku="modulepreload",Yu=function(e){return"/"+e},lr={},Xu=function(t,n,r){let o=Promise.resolve();if(n&&n.length>0){let l=function(u){return Promise.all(u.map(f=>Promise.resolve(f).then(d=>({status:"fulfilled",value:d}),d=>({status:"rejected",reason:d}))))};var i=l;document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),c=a?.nonce||a?.getAttribute("nonce");o=l(n.map(u=>{if(u=Yu(u),u in lr)return;lr[u]=!0;const f=u.endsWith(".css"),d=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${d}`))return;const h=document.createElement("link");if(h.rel=f?"stylesheet":Ku,f||(h.as="script"),h.crossOrigin="",h.href=u,c&&h.setAttribute("nonce",c),document.head.appendChild(h),f)return new Promise((g,m)=>{h.addEventListener("load",g),h.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${u}`)))})}))}function s(a){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=a,window.dispatchEvent(c),!c.defaultPrevented)throw a}return o.then(a=>{for(const c of a||[])c.status==="rejected"&&s(c.reason);return t().catch(s)})};var Qu=E('<div class="border border-emerald-900 bg-emerald-950/20 p-4 my-4 rounded-sm font-mono"><div class="text-emerald-500 text-xs mb-2 uppercase tracking-tighter font-bold">Action Request: </div><p class="text-zinc-300 text-sm mb-4 italic">"<!>"</p><div class="bg-black/40 p-3 border border-zinc-800 mb-4"><jsfe-form readonly></jsfe-form></div><div class="flex gap-2"><button class="bg-emerald-600 hover:bg-emerald-500 text-white px-4 py-1 text-sm transition-colors">APPROVE</button><button class="border border-zinc-700 hover:bg-[var(--bg-tertiary)] px-4 py-1 text-sm transition-colors">DENY',!0,!1,!1);const ef=e=>(je(()=>{Xu(()=>import("./index-gtFWm77V.js"),[])}),(()=>{var t=Qu(),n=t.firstChild;n.firstChild;var r=n.nextSibling,o=r.firstChild,s=o.nextSibling;s.nextSibling;var i=r.nextSibling,a=i.firstChild,c=i.nextSibling,l=c.firstChild,u=l.nextSibling;return S(n,()=>e.toolName,null),S(r,()=>e.explanation,s),a._$owner=kr(),l.$$click=()=>e.onResolve(!0),u.$$click=()=>e.onResolve(!1),V(()=>a.value=JSON.stringify(e.toolArgs)),t})());Ge(["click"]);var tf=E('<div class="relative w-full max-w-2xl"><textarea rows=1 class="w-full bg-[var(--bg-secondary)] border border-[var(--border-primary)] rounded-lg px-4 py-3 pr-12 focus:outline-none disabled:cursor-not-allowed text-zinc-100 placeholder-zinc-500 resize-none overflow-hidden break-words"style=min-height:48px;max-height:200px></textarea><button class="absolute right-2 top-1/2 -translate-y-1/2 flex items-center justify-center w-9 h-9 text-zinc-400 disabled:opacity-30 transition-colors cursor-pointer disabled:cursor-default"title="Send message"><svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"stroke-width=2 stroke-linecap=round stroke-linejoin=round><path d="M18 15l-6-6-6 6">');function nf(e){const[t,n]=Z("");let r;const o=()=>e.disabled||!t().trim(),s=()=>{if(r){r.style.height="auto";const l=Math.min(r.scrollHeight,200);r.style.height=`${l}px`}},i=l=>{const u=l.currentTarget;n(u.value),s()},a=()=>{const l=t().trim();!l||e.disabled||(e.onSend(l),n(""),r&&(r.style.height="auto"))},c=l=>{l.key==="Enter"&&!l.shiftKey&&(l.preventDefault(),a())};return je(()=>{r&&s()}),(()=>{var l=tf(),u=l.firstChild,f=u.nextSibling;u.addEventListener("keypress",c),u.$$input=i;var d=r;return typeof d=="function"?zt(d,u):r=u,f.$$click=a,V(h=>{var g=e.placeholder||"Talk to MMCP",m=e.disabled,y=o(),x={"hover:text-zinc-100":!o()};return g!==h.e&&ht(u,"placeholder",h.e=g),m!==h.t&&(u.disabled=h.t=m),y!==h.a&&(f.disabled=h.a=y),h.o=fn(f,x,h.o),h},{e:void 0,t:void 0,a:void 0,o:void 0}),V(()=>u.value=t()),l})()}Ge(["input","click"]);function wn(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}var Ee=wn();function go(e){Ee=e}var We={exec:()=>null};function $(e,t=""){let n=typeof e=="string"?e:e.source,r={replace:(o,s)=>{let i=typeof s=="string"?s:s.source;return i=i.replace(Y.caret,"$1"),n=n.replace(o,i),r},getRegex:()=>new RegExp(n,t)};return r}var rf=(()=>{try{return!!new RegExp("(?<=1)(?<!1)")}catch{return!1}})(),Y={codeRemoveIndent:/^(?: {1,4}| {0,3}\t)/gm,outputLinkReplace:/\\([\[\]])/g,indentCodeCompensation:/^(\s+)(?:```)/,beginningSpace:/^\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\n/g,tabCharGlobal:/\t/g,multipleSpaceGlobal:/\s+/g,blankLine:/^[ \t]*$/,doubleBlankLine:/\n[ \t]*\n[ \t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \t]?/gm,listReplaceTabs:/^\t+/,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\[[ xX]\] +\S/,listReplaceTask:/^\[[ xX]\] +/,listTaskCheckbox:/\[[ xX]\]/,anyLine:/\n.*\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\||\| *$/g,tableRowBlankLine:/\n[ \t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\s|>)/i,endPreScriptTag:/^<\/(pre|code|kbd|script)(\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'"]*[^\s])\s+(['"])(.*)\2/,unicodeAlphaNumeric:/[\p{L}\p{N}]/u,escapeTest:/[&<>"']/,escapeReplace:/[&<>"']/g,escapeTestNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g,unescapeTest:/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig,caret:/(^|[^\[])\^/g,percentDecode:/%25/g,findPipe:/\|/g,splitPipe:/ \|/,slashPipe:/\\\|/g,carriageReturn:/\r\n|\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\S*/,endingNewline:/\n$/,listItemRegex:e=>new RegExp(`^( {0,3}${e})((?:[	 ][^\\n]*)?(?:\\n|$))`),nextBulletRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),hrRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),fencesBeginRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}(?:\`\`\`|~~~)`),headingBeginRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}#`),htmlBeginRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}<(?:[a-z].*>|!--)`,"i")},of=/^(?:[ \t]*(?:\n|$))+/,sf=/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,af=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,Ye=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,cf=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,_n=/(?:[*+-]|\d{1,9}[.)])/,mo=/^(?!bull |blockCode|fences|blockquote|heading|html|table)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html|table))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,bo=$(mo).replace(/bull/g,_n).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/\|table/g,"").getRegex(),lf=$(mo).replace(/bull/g,_n).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/table/g,/ {0,3}\|?(?:[:\- ]*\|)+[\:\- ]*\n/).getRegex(),xn=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,uf=/^[^\n]+/,Sn=/(?!\s*\])(?:\\[\s\S]|[^\[\]\\])+/,ff=$(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",Sn).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),df=$(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,_n).getRegex(),At="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",$n=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,hf=$("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$))","i").replace("comment",$n).replace("tag",At).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),vo=$(xn).replace("hr",Ye).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",At).getRegex(),pf=$(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",vo).getRegex(),zn={blockquote:pf,code:sf,def:ff,fences:af,heading:cf,hr:Ye,html:hf,lheading:bo,list:df,newline:of,paragraph:vo,table:We,text:uf},ur=$("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",Ye).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}	)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",At).getRegex(),gf={...zn,lheading:lf,table:ur,paragraph:$(xn).replace("hr",Ye).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",ur).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",At).getRegex()},mf={...zn,html:$(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",$n).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:We,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:$(xn).replace("hr",Ye).replace("heading",` *#{1,6} *[^
]`).replace("lheading",bo).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},bf=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,vf=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,yo=/^( {2,}|\\)\n(?!\s*$)/,yf=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,It=/[\p{P}\p{S}]/u,Tn=/[\s\p{P}\p{S}]/u,ko=/[^\s\p{P}\p{S}]/u,kf=$(/^((?![*_])punctSpace)/,"u").replace(/punctSpace/g,Tn).getRegex(),wo=/(?!~)[\p{P}\p{S}]/u,wf=/(?!~)[\s\p{P}\p{S}]/u,_f=/(?:[^\s\p{P}\p{S}]|~)/u,xf=$(/link|precode-code|html/,"g").replace("link",/\[(?:[^\[\]`]|(?<a>`+)[^`]+\k<a>(?!`))*?\]\((?:\\[\s\S]|[^\\\(\)]|\((?:\\[\s\S]|[^\\\(\)])*\))*\)/).replace("precode-",rf?"(?<!`)()":"(^^|[^`])").replace("code",/(?<b>`+)[^`]+\k<b>(?!`)/).replace("html",/<(?! )[^<>]*?>/).getRegex(),_o=/^(?:\*+(?:((?!\*)punct)|[^\s*]))|^_+(?:((?!_)punct)|([^\s_]))/,Sf=$(_o,"u").replace(/punct/g,It).getRegex(),$f=$(_o,"u").replace(/punct/g,wo).getRegex(),xo="^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)punct(\\*+)(?=[\\s]|$)|notPunctSpace(\\*+)(?!\\*)(?=punctSpace|$)|(?!\\*)punctSpace(\\*+)(?=notPunctSpace)|[\\s](\\*+)(?!\\*)(?=punct)|(?!\\*)punct(\\*+)(?!\\*)(?=punct)|notPunctSpace(\\*+)(?=notPunctSpace)",zf=$(xo,"gu").replace(/notPunctSpace/g,ko).replace(/punctSpace/g,Tn).replace(/punct/g,It).getRegex(),Tf=$(xo,"gu").replace(/notPunctSpace/g,_f).replace(/punctSpace/g,wf).replace(/punct/g,wo).getRegex(),Ef=$("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)","gu").replace(/notPunctSpace/g,ko).replace(/punctSpace/g,Tn).replace(/punct/g,It).getRegex(),Of=$(/\\(punct)/,"gu").replace(/punct/g,It).getRegex(),Pf=$(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),Af=$($n).replace("(?:-->|$)","-->").getRegex(),If=$("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",Af).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),wt=/(?:\[(?:\\[\s\S]|[^\[\]\\])*\]|\\[\s\S]|`+[^`]*?`+(?!`)|[^\[\]\\`])*?/,Cf=$(/^!?\[(label)\]\(\s*(href)(?:(?:[ \t]*(?:\n[ \t]*)?)(title))?\s*\)/).replace("label",wt).replace("href",/<(?:\\.|[^\n<>\\])+>|[^ \t\n\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),So=$(/^!?\[(label)\]\[(ref)\]/).replace("label",wt).replace("ref",Sn).getRegex(),$o=$(/^!?\[(ref)\](?:\[\])?/).replace("ref",Sn).getRegex(),Zf=$("reflink|nolink(?!\\()","g").replace("reflink",So).replace("nolink",$o).getRegex(),fr=/[hH][tT][tT][pP][sS]?|[fF][tT][pP]/,En={_backpedal:We,anyPunctuation:Of,autolink:Pf,blockSkip:xf,br:yo,code:vf,del:We,emStrongLDelim:Sf,emStrongRDelimAst:zf,emStrongRDelimUnd:Ef,escape:bf,link:Cf,nolink:$o,punctuation:kf,reflink:So,reflinkSearch:Zf,tag:If,text:yf,url:We},Rf={...En,link:$(/^!?\[(label)\]\((.*?)\)/).replace("label",wt).getRegex(),reflink:$(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",wt).getRegex()},an={...En,emStrongRDelimAst:Tf,emStrongLDelim:$f,url:$(/^((?:protocol):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/).replace("protocol",fr).replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\[\s\S]|[^\\])*?(?:\\[\s\S]|[^\s~\\]))\1(?=[^~]|$)/,text:$(/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|protocol:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/).replace("protocol",fr).getRegex()},Nf={...an,br:$(yo).replace("{2,}","*").getRegex(),text:$(an.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},ot={normal:zn,gfm:gf,pedantic:mf},Fe={normal:En,gfm:an,breaks:Nf,pedantic:Rf},jf={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},dr=e=>jf[e];function de(e,t){if(t){if(Y.escapeTest.test(e))return e.replace(Y.escapeReplace,dr)}else if(Y.escapeTestNoEncode.test(e))return e.replace(Y.escapeReplaceNoEncode,dr);return e}function hr(e){try{e=encodeURI(e).replace(Y.percentDecode,"%")}catch{return null}return e}function pr(e,t){let n=e.replace(Y.findPipe,(s,i,a)=>{let c=!1,l=i;for(;--l>=0&&a[l]==="\\";)c=!c;return c?"|":" |"}),r=n.split(Y.splitPipe),o=0;if(r[0].trim()||r.shift(),r.length>0&&!r.at(-1)?.trim()&&r.pop(),t)if(r.length>t)r.splice(t);else for(;r.length<t;)r.push("");for(;o<r.length;o++)r[o]=r[o].trim().replace(Y.slashPipe,"|");return r}function Be(e,t,n){let r=e.length;if(r===0)return"";let o=0;for(;o<r&&e.charAt(r-o-1)===t;)o++;return e.slice(0,r-o)}function Lf(e,t){if(e.indexOf(t[1])===-1)return-1;let n=0;for(let r=0;r<e.length;r++)if(e[r]==="\\")r++;else if(e[r]===t[0])n++;else if(e[r]===t[1]&&(n--,n<0))return r;return n>0?-2:-1}function gr(e,t,n,r,o){let s=t.href,i=t.title||null,a=e[1].replace(o.other.outputLinkReplace,"$1");r.state.inLink=!0;let c={type:e[0].charAt(0)==="!"?"image":"link",raw:n,href:s,title:i,text:a,tokens:r.inlineTokens(a)};return r.state.inLink=!1,c}function Mf(e,t,n){let r=e.match(n.other.indentCodeCompensation);if(r===null)return t;let o=r[1];return t.split(`
`).map(s=>{let i=s.match(n.other.beginningSpace);if(i===null)return s;let[a]=i;return a.length>=o.length?s.slice(o.length):s}).join(`
`)}var _t=class{options;rules;lexer;constructor(e){this.options=e||Ee}space(e){let t=this.rules.block.newline.exec(e);if(t&&t[0].length>0)return{type:"space",raw:t[0]}}code(e){let t=this.rules.block.code.exec(e);if(t){let n=t[0].replace(this.rules.other.codeRemoveIndent,"");return{type:"code",raw:t[0],codeBlockStyle:"indented",text:this.options.pedantic?n:Be(n,`
`)}}}fences(e){let t=this.rules.block.fences.exec(e);if(t){let n=t[0],r=Mf(n,t[3]||"",this.rules);return{type:"code",raw:n,lang:t[2]?t[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):t[2],text:r}}}heading(e){let t=this.rules.block.heading.exec(e);if(t){let n=t[2].trim();if(this.rules.other.endingHash.test(n)){let r=Be(n,"#");(this.options.pedantic||!r||this.rules.other.endingSpaceChar.test(r))&&(n=r.trim())}return{type:"heading",raw:t[0],depth:t[1].length,text:n,tokens:this.lexer.inline(n)}}}hr(e){let t=this.rules.block.hr.exec(e);if(t)return{type:"hr",raw:Be(t[0],`
`)}}blockquote(e){let t=this.rules.block.blockquote.exec(e);if(t){let n=Be(t[0],`
`).split(`
`),r="",o="",s=[];for(;n.length>0;){let i=!1,a=[],c;for(c=0;c<n.length;c++)if(this.rules.other.blockquoteStart.test(n[c]))a.push(n[c]),i=!0;else if(!i)a.push(n[c]);else break;n=n.slice(c);let l=a.join(`
`),u=l.replace(this.rules.other.blockquoteSetextReplace,`
    $1`).replace(this.rules.other.blockquoteSetextReplace2,"");r=r?`${r}
${l}`:l,o=o?`${o}
${u}`:u;let f=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(u,s,!0),this.lexer.state.top=f,n.length===0)break;let d=s.at(-1);if(d?.type==="code")break;if(d?.type==="blockquote"){let h=d,g=h.raw+`
`+n.join(`
`),m=this.blockquote(g);s[s.length-1]=m,r=r.substring(0,r.length-h.raw.length)+m.raw,o=o.substring(0,o.length-h.text.length)+m.text;break}else if(d?.type==="list"){let h=d,g=h.raw+`
`+n.join(`
`),m=this.list(g);s[s.length-1]=m,r=r.substring(0,r.length-d.raw.length)+m.raw,o=o.substring(0,o.length-h.raw.length)+m.raw,n=g.substring(s.at(-1).raw.length).split(`
`);continue}}return{type:"blockquote",raw:r,tokens:s,text:o}}}list(e){let t=this.rules.block.list.exec(e);if(t){let n=t[1].trim(),r=n.length>1,o={type:"list",raw:"",ordered:r,start:r?+n.slice(0,-1):"",loose:!1,items:[]};n=r?`\\d{1,9}\\${n.slice(-1)}`:`\\${n}`,this.options.pedantic&&(n=r?n:"[*+-]");let s=this.rules.other.listItemRegex(n),i=!1;for(;e;){let c=!1,l="",u="";if(!(t=s.exec(e))||this.rules.block.hr.test(e))break;l=t[0],e=e.substring(l.length);let f=t[2].split(`
`,1)[0].replace(this.rules.other.listReplaceTabs,m=>" ".repeat(3*m.length)),d=e.split(`
`,1)[0],h=!f.trim(),g=0;if(this.options.pedantic?(g=2,u=f.trimStart()):h?g=t[1].length+1:(g=t[2].search(this.rules.other.nonSpaceChar),g=g>4?1:g,u=f.slice(g),g+=t[1].length),h&&this.rules.other.blankLine.test(d)&&(l+=d+`
`,e=e.substring(d.length+1),c=!0),!c){let m=this.rules.other.nextBulletRegex(g),y=this.rules.other.hrRegex(g),x=this.rules.other.fencesBeginRegex(g),z=this.rules.other.headingBeginRegex(g),I=this.rules.other.htmlBeginRegex(g);for(;e;){let w=e.split(`
`,1)[0],O;if(d=w,this.options.pedantic?(d=d.replace(this.rules.other.listReplaceNesting,"  "),O=d):O=d.replace(this.rules.other.tabCharGlobal,"    "),x.test(d)||z.test(d)||I.test(d)||m.test(d)||y.test(d))break;if(O.search(this.rules.other.nonSpaceChar)>=g||!d.trim())u+=`
`+O.slice(g);else{if(h||f.replace(this.rules.other.tabCharGlobal,"    ").search(this.rules.other.nonSpaceChar)>=4||x.test(f)||z.test(f)||y.test(f))break;u+=`
`+d}!h&&!d.trim()&&(h=!0),l+=w+`
`,e=e.substring(w.length+1),f=O.slice(g)}}o.loose||(i?o.loose=!0:this.rules.other.doubleBlankLine.test(l)&&(i=!0)),o.items.push({type:"list_item",raw:l,task:!!this.options.gfm&&this.rules.other.listIsTask.test(u),loose:!1,text:u,tokens:[]}),o.raw+=l}let a=o.items.at(-1);if(a)a.raw=a.raw.trimEnd(),a.text=a.text.trimEnd();else return;o.raw=o.raw.trimEnd();for(let c of o.items){if(this.lexer.state.top=!1,c.tokens=this.lexer.blockTokens(c.text,[]),c.task){if(c.text=c.text.replace(this.rules.other.listReplaceTask,""),c.tokens[0]?.type==="text"||c.tokens[0]?.type==="paragraph"){c.tokens[0].raw=c.tokens[0].raw.replace(this.rules.other.listReplaceTask,""),c.tokens[0].text=c.tokens[0].text.replace(this.rules.other.listReplaceTask,"");for(let u=this.lexer.inlineQueue.length-1;u>=0;u--)if(this.rules.other.listIsTask.test(this.lexer.inlineQueue[u].src)){this.lexer.inlineQueue[u].src=this.lexer.inlineQueue[u].src.replace(this.rules.other.listReplaceTask,"");break}}let l=this.rules.other.listTaskCheckbox.exec(c.raw);if(l){let u={type:"checkbox",raw:l[0]+" ",checked:l[0]!=="[ ]"};c.checked=u.checked,o.loose?c.tokens[0]&&["paragraph","text"].includes(c.tokens[0].type)&&"tokens"in c.tokens[0]&&c.tokens[0].tokens?(c.tokens[0].raw=u.raw+c.tokens[0].raw,c.tokens[0].text=u.raw+c.tokens[0].text,c.tokens[0].tokens.unshift(u)):c.tokens.unshift({type:"paragraph",raw:u.raw,text:u.raw,tokens:[u]}):c.tokens.unshift(u)}}if(!o.loose){let l=c.tokens.filter(f=>f.type==="space"),u=l.length>0&&l.some(f=>this.rules.other.anyLine.test(f.raw));o.loose=u}}if(o.loose)for(let c of o.items){c.loose=!0;for(let l of c.tokens)l.type==="text"&&(l.type="paragraph")}return o}}html(e){let t=this.rules.block.html.exec(e);if(t)return{type:"html",block:!0,raw:t[0],pre:t[1]==="pre"||t[1]==="script"||t[1]==="style",text:t[0]}}def(e){let t=this.rules.block.def.exec(e);if(t){let n=t[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal," "),r=t[2]?t[2].replace(this.rules.other.hrefBrackets,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",o=t[3]?t[3].substring(1,t[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):t[3];return{type:"def",tag:n,raw:t[0],href:r,title:o}}}table(e){let t=this.rules.block.table.exec(e);if(!t||!this.rules.other.tableDelimiter.test(t[2]))return;let n=pr(t[1]),r=t[2].replace(this.rules.other.tableAlignChars,"").split("|"),o=t[3]?.trim()?t[3].replace(this.rules.other.tableRowBlankLine,"").split(`
`):[],s={type:"table",raw:t[0],header:[],align:[],rows:[]};if(n.length===r.length){for(let i of r)this.rules.other.tableAlignRight.test(i)?s.align.push("right"):this.rules.other.tableAlignCenter.test(i)?s.align.push("center"):this.rules.other.tableAlignLeft.test(i)?s.align.push("left"):s.align.push(null);for(let i=0;i<n.length;i++)s.header.push({text:n[i],tokens:this.lexer.inline(n[i]),header:!0,align:s.align[i]});for(let i of o)s.rows.push(pr(i,s.header.length).map((a,c)=>({text:a,tokens:this.lexer.inline(a),header:!1,align:s.align[c]})));return s}}lheading(e){let t=this.rules.block.lheading.exec(e);if(t)return{type:"heading",raw:t[0],depth:t[2].charAt(0)==="="?1:2,text:t[1],tokens:this.lexer.inline(t[1])}}paragraph(e){let t=this.rules.block.paragraph.exec(e);if(t){let n=t[1].charAt(t[1].length-1)===`
`?t[1].slice(0,-1):t[1];return{type:"paragraph",raw:t[0],text:n,tokens:this.lexer.inline(n)}}}text(e){let t=this.rules.block.text.exec(e);if(t)return{type:"text",raw:t[0],text:t[0],tokens:this.lexer.inline(t[0])}}escape(e){let t=this.rules.inline.escape.exec(e);if(t)return{type:"escape",raw:t[0],text:t[1]}}tag(e){let t=this.rules.inline.tag.exec(e);if(t)return!this.lexer.state.inLink&&this.rules.other.startATag.test(t[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&this.rules.other.endATag.test(t[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(t[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(t[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:t[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:t[0]}}link(e){let t=this.rules.inline.link.exec(e);if(t){let n=t[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(n)){if(!this.rules.other.endAngleBracket.test(n))return;let s=Be(n.slice(0,-1),"\\");if((n.length-s.length)%2===0)return}else{let s=Lf(t[2],"()");if(s===-2)return;if(s>-1){let i=(t[0].indexOf("!")===0?5:4)+t[1].length+s;t[2]=t[2].substring(0,s),t[0]=t[0].substring(0,i).trim(),t[3]=""}}let r=t[2],o="";if(this.options.pedantic){let s=this.rules.other.pedanticHrefTitle.exec(r);s&&(r=s[1],o=s[3])}else o=t[3]?t[3].slice(1,-1):"";return r=r.trim(),this.rules.other.startAngleBracket.test(r)&&(this.options.pedantic&&!this.rules.other.endAngleBracket.test(n)?r=r.slice(1):r=r.slice(1,-1)),gr(t,{href:r&&r.replace(this.rules.inline.anyPunctuation,"$1"),title:o&&o.replace(this.rules.inline.anyPunctuation,"$1")},t[0],this.lexer,this.rules)}}reflink(e,t){let n;if((n=this.rules.inline.reflink.exec(e))||(n=this.rules.inline.nolink.exec(e))){let r=(n[2]||n[1]).replace(this.rules.other.multipleSpaceGlobal," "),o=t[r.toLowerCase()];if(!o){let s=n[0].charAt(0);return{type:"text",raw:s,text:s}}return gr(n,o,n[0],this.lexer,this.rules)}}emStrong(e,t,n=""){let r=this.rules.inline.emStrongLDelim.exec(e);if(!(!r||r[3]&&n.match(this.rules.other.unicodeAlphaNumeric))&&(!(r[1]||r[2])||!n||this.rules.inline.punctuation.exec(n))){let o=[...r[0]].length-1,s,i,a=o,c=0,l=r[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(l.lastIndex=0,t=t.slice(-1*e.length+o);(r=l.exec(t))!=null;){if(s=r[1]||r[2]||r[3]||r[4]||r[5]||r[6],!s)continue;if(i=[...s].length,r[3]||r[4]){a+=i;continue}else if((r[5]||r[6])&&o%3&&!((o+i)%3)){c+=i;continue}if(a-=i,a>0)continue;i=Math.min(i,i+a+c);let u=[...r[0]][0].length,f=e.slice(0,o+r.index+u+i);if(Math.min(o,i)%2){let h=f.slice(1,-1);return{type:"em",raw:f,text:h,tokens:this.lexer.inlineTokens(h)}}let d=f.slice(2,-2);return{type:"strong",raw:f,text:d,tokens:this.lexer.inlineTokens(d)}}}}codespan(e){let t=this.rules.inline.code.exec(e);if(t){let n=t[2].replace(this.rules.other.newLineCharGlobal," "),r=this.rules.other.nonSpaceChar.test(n),o=this.rules.other.startingSpaceChar.test(n)&&this.rules.other.endingSpaceChar.test(n);return r&&o&&(n=n.substring(1,n.length-1)),{type:"codespan",raw:t[0],text:n}}}br(e){let t=this.rules.inline.br.exec(e);if(t)return{type:"br",raw:t[0]}}del(e){let t=this.rules.inline.del.exec(e);if(t)return{type:"del",raw:t[0],text:t[2],tokens:this.lexer.inlineTokens(t[2])}}autolink(e){let t=this.rules.inline.autolink.exec(e);if(t){let n,r;return t[2]==="@"?(n=t[1],r="mailto:"+n):(n=t[1],r=n),{type:"link",raw:t[0],text:n,href:r,tokens:[{type:"text",raw:n,text:n}]}}}url(e){let t;if(t=this.rules.inline.url.exec(e)){let n,r;if(t[2]==="@")n=t[0],r="mailto:"+n;else{let o;do o=t[0],t[0]=this.rules.inline._backpedal.exec(t[0])?.[0]??"";while(o!==t[0]);n=t[0],t[1]==="www."?r="http://"+t[0]:r=t[0]}return{type:"link",raw:t[0],text:n,href:r,tokens:[{type:"text",raw:n,text:n}]}}}inlineText(e){let t=this.rules.inline.text.exec(e);if(t){let n=this.lexer.state.inRawBlock;return{type:"text",raw:t[0],text:t[0],escaped:n}}}},re=class cn{tokens;options;state;inlineQueue;tokenizer;constructor(t){this.tokens=[],this.tokens.links=Object.create(null),this.options=t||Ee,this.options.tokenizer=this.options.tokenizer||new _t,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};let n={other:Y,block:ot.normal,inline:Fe.normal};this.options.pedantic?(n.block=ot.pedantic,n.inline=Fe.pedantic):this.options.gfm&&(n.block=ot.gfm,this.options.breaks?n.inline=Fe.breaks:n.inline=Fe.gfm),this.tokenizer.rules=n}static get rules(){return{block:ot,inline:Fe}}static lex(t,n){return new cn(n).lex(t)}static lexInline(t,n){return new cn(n).inlineTokens(t)}lex(t){t=t.replace(Y.carriageReturn,`
`),this.blockTokens(t,this.tokens);for(let n=0;n<this.inlineQueue.length;n++){let r=this.inlineQueue[n];this.inlineTokens(r.src,r.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(t,n=[],r=!1){for(this.options.pedantic&&(t=t.replace(Y.tabCharGlobal,"    ").replace(Y.spaceLine,""));t;){let o;if(this.options.extensions?.block?.some(i=>(o=i.call({lexer:this},t,n))?(t=t.substring(o.raw.length),n.push(o),!0):!1))continue;if(o=this.tokenizer.space(t)){t=t.substring(o.raw.length);let i=n.at(-1);o.raw.length===1&&i!==void 0?i.raw+=`
`:n.push(o);continue}if(o=this.tokenizer.code(t)){t=t.substring(o.raw.length);let i=n.at(-1);i?.type==="paragraph"||i?.type==="text"?(i.raw+=(i.raw.endsWith(`
`)?"":`
`)+o.raw,i.text+=`
`+o.text,this.inlineQueue.at(-1).src=i.text):n.push(o);continue}if(o=this.tokenizer.fences(t)){t=t.substring(o.raw.length),n.push(o);continue}if(o=this.tokenizer.heading(t)){t=t.substring(o.raw.length),n.push(o);continue}if(o=this.tokenizer.hr(t)){t=t.substring(o.raw.length),n.push(o);continue}if(o=this.tokenizer.blockquote(t)){t=t.substring(o.raw.length),n.push(o);continue}if(o=this.tokenizer.list(t)){t=t.substring(o.raw.length),n.push(o);continue}if(o=this.tokenizer.html(t)){t=t.substring(o.raw.length),n.push(o);continue}if(o=this.tokenizer.def(t)){t=t.substring(o.raw.length);let i=n.at(-1);i?.type==="paragraph"||i?.type==="text"?(i.raw+=(i.raw.endsWith(`
`)?"":`
`)+o.raw,i.text+=`
`+o.raw,this.inlineQueue.at(-1).src=i.text):this.tokens.links[o.tag]||(this.tokens.links[o.tag]={href:o.href,title:o.title},n.push(o));continue}if(o=this.tokenizer.table(t)){t=t.substring(o.raw.length),n.push(o);continue}if(o=this.tokenizer.lheading(t)){t=t.substring(o.raw.length),n.push(o);continue}let s=t;if(this.options.extensions?.startBlock){let i=1/0,a=t.slice(1),c;this.options.extensions.startBlock.forEach(l=>{c=l.call({lexer:this},a),typeof c=="number"&&c>=0&&(i=Math.min(i,c))}),i<1/0&&i>=0&&(s=t.substring(0,i+1))}if(this.state.top&&(o=this.tokenizer.paragraph(s))){let i=n.at(-1);r&&i?.type==="paragraph"?(i.raw+=(i.raw.endsWith(`
`)?"":`
`)+o.raw,i.text+=`
`+o.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=i.text):n.push(o),r=s.length!==t.length,t=t.substring(o.raw.length);continue}if(o=this.tokenizer.text(t)){t=t.substring(o.raw.length);let i=n.at(-1);i?.type==="text"?(i.raw+=(i.raw.endsWith(`
`)?"":`
`)+o.raw,i.text+=`
`+o.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=i.text):n.push(o);continue}if(t){let i="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(i);break}else throw new Error(i)}}return this.state.top=!0,n}inline(t,n=[]){return this.inlineQueue.push({src:t,tokens:n}),n}inlineTokens(t,n=[]){let r=t,o=null;if(this.tokens.links){let c=Object.keys(this.tokens.links);if(c.length>0)for(;(o=this.tokenizer.rules.inline.reflinkSearch.exec(r))!=null;)c.includes(o[0].slice(o[0].lastIndexOf("[")+1,-1))&&(r=r.slice(0,o.index)+"["+"a".repeat(o[0].length-2)+"]"+r.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(o=this.tokenizer.rules.inline.anyPunctuation.exec(r))!=null;)r=r.slice(0,o.index)+"++"+r.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);let s;for(;(o=this.tokenizer.rules.inline.blockSkip.exec(r))!=null;)s=o[2]?o[2].length:0,r=r.slice(0,o.index+s)+"["+"a".repeat(o[0].length-s-2)+"]"+r.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);r=this.options.hooks?.emStrongMask?.call({lexer:this},r)??r;let i=!1,a="";for(;t;){i||(a=""),i=!1;let c;if(this.options.extensions?.inline?.some(u=>(c=u.call({lexer:this},t,n))?(t=t.substring(c.raw.length),n.push(c),!0):!1))continue;if(c=this.tokenizer.escape(t)){t=t.substring(c.raw.length),n.push(c);continue}if(c=this.tokenizer.tag(t)){t=t.substring(c.raw.length),n.push(c);continue}if(c=this.tokenizer.link(t)){t=t.substring(c.raw.length),n.push(c);continue}if(c=this.tokenizer.reflink(t,this.tokens.links)){t=t.substring(c.raw.length);let u=n.at(-1);c.type==="text"&&u?.type==="text"?(u.raw+=c.raw,u.text+=c.text):n.push(c);continue}if(c=this.tokenizer.emStrong(t,r,a)){t=t.substring(c.raw.length),n.push(c);continue}if(c=this.tokenizer.codespan(t)){t=t.substring(c.raw.length),n.push(c);continue}if(c=this.tokenizer.br(t)){t=t.substring(c.raw.length),n.push(c);continue}if(c=this.tokenizer.del(t)){t=t.substring(c.raw.length),n.push(c);continue}if(c=this.tokenizer.autolink(t)){t=t.substring(c.raw.length),n.push(c);continue}if(!this.state.inLink&&(c=this.tokenizer.url(t))){t=t.substring(c.raw.length),n.push(c);continue}let l=t;if(this.options.extensions?.startInline){let u=1/0,f=t.slice(1),d;this.options.extensions.startInline.forEach(h=>{d=h.call({lexer:this},f),typeof d=="number"&&d>=0&&(u=Math.min(u,d))}),u<1/0&&u>=0&&(l=t.substring(0,u+1))}if(c=this.tokenizer.inlineText(l)){t=t.substring(c.raw.length),c.raw.slice(-1)!=="_"&&(a=c.raw.slice(-1)),i=!0;let u=n.at(-1);u?.type==="text"?(u.raw+=c.raw,u.text+=c.text):n.push(c);continue}if(t){let u="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(u);break}else throw new Error(u)}}return n}},xt=class{options;parser;constructor(e){this.options=e||Ee}space(e){return""}code({text:e,lang:t,escaped:n}){let r=(t||"").match(Y.notSpaceStart)?.[0],o=e.replace(Y.endingNewline,"")+`
`;return r?'<pre><code class="language-'+de(r)+'">'+(n?o:de(o,!0))+`</code></pre>
`:"<pre><code>"+(n?o:de(o,!0))+`</code></pre>
`}blockquote({tokens:e}){return`<blockquote>
${this.parser.parse(e)}</blockquote>
`}html({text:e}){return e}def(e){return""}heading({tokens:e,depth:t}){return`<h${t}>${this.parser.parseInline(e)}</h${t}>
`}hr(e){return`<hr>
`}list(e){let t=e.ordered,n=e.start,r="";for(let i=0;i<e.items.length;i++){let a=e.items[i];r+=this.listitem(a)}let o=t?"ol":"ul",s=t&&n!==1?' start="'+n+'"':"";return"<"+o+s+`>
`+r+"</"+o+`>
`}listitem(e){return`<li>${this.parser.parse(e.tokens)}</li>
`}checkbox({checked:e}){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox"> '}paragraph({tokens:e}){return`<p>${this.parser.parseInline(e)}</p>
`}table(e){let t="",n="";for(let o=0;o<e.header.length;o++)n+=this.tablecell(e.header[o]);t+=this.tablerow({text:n});let r="";for(let o=0;o<e.rows.length;o++){let s=e.rows[o];n="";for(let i=0;i<s.length;i++)n+=this.tablecell(s[i]);r+=this.tablerow({text:n})}return r&&(r=`<tbody>${r}</tbody>`),`<table>
<thead>
`+t+`</thead>
`+r+`</table>
`}tablerow({text:e}){return`<tr>
${e}</tr>
`}tablecell(e){let t=this.parser.parseInline(e.tokens),n=e.header?"th":"td";return(e.align?`<${n} align="${e.align}">`:`<${n}>`)+t+`</${n}>
`}strong({tokens:e}){return`<strong>${this.parser.parseInline(e)}</strong>`}em({tokens:e}){return`<em>${this.parser.parseInline(e)}</em>`}codespan({text:e}){return`<code>${de(e,!0)}</code>`}br(e){return"<br>"}del({tokens:e}){return`<del>${this.parser.parseInline(e)}</del>`}link({href:e,title:t,tokens:n}){let r=this.parser.parseInline(n),o=hr(e);if(o===null)return r;e=o;let s='<a href="'+e+'"';return t&&(s+=' title="'+de(t)+'"'),s+=">"+r+"</a>",s}image({href:e,title:t,text:n,tokens:r}){r&&(n=this.parser.parseInline(r,this.parser.textRenderer));let o=hr(e);if(o===null)return de(n);e=o;let s=`<img src="${e}" alt="${n}"`;return t&&(s+=` title="${de(t)}"`),s+=">",s}text(e){return"tokens"in e&&e.tokens?this.parser.parseInline(e.tokens):"escaped"in e&&e.escaped?e.text:de(e.text)}},On=class{strong({text:e}){return e}em({text:e}){return e}codespan({text:e}){return e}del({text:e}){return e}html({text:e}){return e}text({text:e}){return e}link({text:e}){return""+e}image({text:e}){return""+e}br(){return""}checkbox({raw:e}){return e}},oe=class ln{options;renderer;textRenderer;constructor(t){this.options=t||Ee,this.options.renderer=this.options.renderer||new xt,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new On}static parse(t,n){return new ln(n).parse(t)}static parseInline(t,n){return new ln(n).parseInline(t)}parse(t){let n="";for(let r=0;r<t.length;r++){let o=t[r];if(this.options.extensions?.renderers?.[o.type]){let i=o,a=this.options.extensions.renderers[i.type].call({parser:this},i);if(a!==!1||!["space","hr","heading","code","table","blockquote","list","html","def","paragraph","text"].includes(i.type)){n+=a||"";continue}}let s=o;switch(s.type){case"space":{n+=this.renderer.space(s);break}case"hr":{n+=this.renderer.hr(s);break}case"heading":{n+=this.renderer.heading(s);break}case"code":{n+=this.renderer.code(s);break}case"table":{n+=this.renderer.table(s);break}case"blockquote":{n+=this.renderer.blockquote(s);break}case"list":{n+=this.renderer.list(s);break}case"checkbox":{n+=this.renderer.checkbox(s);break}case"html":{n+=this.renderer.html(s);break}case"def":{n+=this.renderer.def(s);break}case"paragraph":{n+=this.renderer.paragraph(s);break}case"text":{n+=this.renderer.text(s);break}default:{let i='Token with "'+s.type+'" type was not found.';if(this.options.silent)return console.error(i),"";throw new Error(i)}}}return n}parseInline(t,n=this.renderer){let r="";for(let o=0;o<t.length;o++){let s=t[o];if(this.options.extensions?.renderers?.[s.type]){let a=this.options.extensions.renderers[s.type].call({parser:this},s);if(a!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(s.type)){r+=a||"";continue}}let i=s;switch(i.type){case"escape":{r+=n.text(i);break}case"html":{r+=n.html(i);break}case"link":{r+=n.link(i);break}case"image":{r+=n.image(i);break}case"checkbox":{r+=n.checkbox(i);break}case"strong":{r+=n.strong(i);break}case"em":{r+=n.em(i);break}case"codespan":{r+=n.codespan(i);break}case"br":{r+=n.br(i);break}case"del":{r+=n.del(i);break}case"text":{r+=n.text(i);break}default:{let a='Token with "'+i.type+'" type was not found.';if(this.options.silent)return console.error(a),"";throw new Error(a)}}}return r}},Ve=class{options;block;constructor(e){this.options=e||Ee}static passThroughHooks=new Set(["preprocess","postprocess","processAllTokens","emStrongMask"]);static passThroughHooksRespectAsync=new Set(["preprocess","postprocess","processAllTokens"]);preprocess(e){return e}postprocess(e){return e}processAllTokens(e){return e}emStrongMask(e){return e}provideLexer(){return this.block?re.lex:re.lexInline}provideParser(){return this.block?oe.parse:oe.parseInline}},Df=class{defaults=wn();options=this.setOptions;parse=this.parseMarkdown(!0);parseInline=this.parseMarkdown(!1);Parser=oe;Renderer=xt;TextRenderer=On;Lexer=re;Tokenizer=_t;Hooks=Ve;constructor(...e){this.use(...e)}walkTokens(e,t){let n=[];for(let r of e)switch(n=n.concat(t.call(this,r)),r.type){case"table":{let o=r;for(let s of o.header)n=n.concat(this.walkTokens(s.tokens,t));for(let s of o.rows)for(let i of s)n=n.concat(this.walkTokens(i.tokens,t));break}case"list":{let o=r;n=n.concat(this.walkTokens(o.items,t));break}default:{let o=r;this.defaults.extensions?.childTokens?.[o.type]?this.defaults.extensions.childTokens[o.type].forEach(s=>{let i=o[s].flat(1/0);n=n.concat(this.walkTokens(i,t))}):o.tokens&&(n=n.concat(this.walkTokens(o.tokens,t)))}}return n}use(...e){let t=this.defaults.extensions||{renderers:{},childTokens:{}};return e.forEach(n=>{let r={...n};if(r.async=this.defaults.async||r.async||!1,n.extensions&&(n.extensions.forEach(o=>{if(!o.name)throw new Error("extension name required");if("renderer"in o){let s=t.renderers[o.name];s?t.renderers[o.name]=function(...i){let a=o.renderer.apply(this,i);return a===!1&&(a=s.apply(this,i)),a}:t.renderers[o.name]=o.renderer}if("tokenizer"in o){if(!o.level||o.level!=="block"&&o.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");let s=t[o.level];s?s.unshift(o.tokenizer):t[o.level]=[o.tokenizer],o.start&&(o.level==="block"?t.startBlock?t.startBlock.push(o.start):t.startBlock=[o.start]:o.level==="inline"&&(t.startInline?t.startInline.push(o.start):t.startInline=[o.start]))}"childTokens"in o&&o.childTokens&&(t.childTokens[o.name]=o.childTokens)}),r.extensions=t),n.renderer){let o=this.defaults.renderer||new xt(this.defaults);for(let s in n.renderer){if(!(s in o))throw new Error(`renderer '${s}' does not exist`);if(["options","parser"].includes(s))continue;let i=s,a=n.renderer[i],c=o[i];o[i]=(...l)=>{let u=a.apply(o,l);return u===!1&&(u=c.apply(o,l)),u||""}}r.renderer=o}if(n.tokenizer){let o=this.defaults.tokenizer||new _t(this.defaults);for(let s in n.tokenizer){if(!(s in o))throw new Error(`tokenizer '${s}' does not exist`);if(["options","rules","lexer"].includes(s))continue;let i=s,a=n.tokenizer[i],c=o[i];o[i]=(...l)=>{let u=a.apply(o,l);return u===!1&&(u=c.apply(o,l)),u}}r.tokenizer=o}if(n.hooks){let o=this.defaults.hooks||new Ve;for(let s in n.hooks){if(!(s in o))throw new Error(`hook '${s}' does not exist`);if(["options","block"].includes(s))continue;let i=s,a=n.hooks[i],c=o[i];Ve.passThroughHooks.has(s)?o[i]=l=>{if(this.defaults.async&&Ve.passThroughHooksRespectAsync.has(s))return(async()=>{let f=await a.call(o,l);return c.call(o,f)})();let u=a.call(o,l);return c.call(o,u)}:o[i]=(...l)=>{if(this.defaults.async)return(async()=>{let f=await a.apply(o,l);return f===!1&&(f=await c.apply(o,l)),f})();let u=a.apply(o,l);return u===!1&&(u=c.apply(o,l)),u}}r.hooks=o}if(n.walkTokens){let o=this.defaults.walkTokens,s=n.walkTokens;r.walkTokens=function(i){let a=[];return a.push(s.call(this,i)),o&&(a=a.concat(o.call(this,i))),a}}this.defaults={...this.defaults,...r}}),this}setOptions(e){return this.defaults={...this.defaults,...e},this}lexer(e,t){return re.lex(e,t??this.defaults)}parser(e,t){return oe.parse(e,t??this.defaults)}parseMarkdown(e){return(t,n)=>{let r={...n},o={...this.defaults,...r},s=this.onError(!!o.silent,!!o.async);if(this.defaults.async===!0&&r.async===!1)return s(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof t>"u"||t===null)return s(new Error("marked(): input parameter is undefined or null"));if(typeof t!="string")return s(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(t)+", string expected"));if(o.hooks&&(o.hooks.options=o,o.hooks.block=e),o.async)return(async()=>{let i=o.hooks?await o.hooks.preprocess(t):t,a=await(o.hooks?await o.hooks.provideLexer():e?re.lex:re.lexInline)(i,o),c=o.hooks?await o.hooks.processAllTokens(a):a;o.walkTokens&&await Promise.all(this.walkTokens(c,o.walkTokens));let l=await(o.hooks?await o.hooks.provideParser():e?oe.parse:oe.parseInline)(c,o);return o.hooks?await o.hooks.postprocess(l):l})().catch(s);try{o.hooks&&(t=o.hooks.preprocess(t));let i=(o.hooks?o.hooks.provideLexer():e?re.lex:re.lexInline)(t,o);o.hooks&&(i=o.hooks.processAllTokens(i)),o.walkTokens&&this.walkTokens(i,o.walkTokens);let a=(o.hooks?o.hooks.provideParser():e?oe.parse:oe.parseInline)(i,o);return o.hooks&&(a=o.hooks.postprocess(a)),a}catch(i){return s(i)}}}onError(e,t){return n=>{if(n.message+=`
Please report this to https://github.com/markedjs/marked.`,e){let r="<p>An error occurred:</p><pre>"+de(n.message+"",!0)+"</pre>";return t?Promise.resolve(r):r}if(t)return Promise.reject(n);throw n}}},$e=new Df;function P(e,t){return $e.parse(e,t)}P.options=P.setOptions=function(e){return $e.setOptions(e),P.defaults=$e.defaults,go(P.defaults),P};P.getDefaults=wn;P.defaults=Ee;P.use=function(...e){return $e.use(...e),P.defaults=$e.defaults,go(P.defaults),P};P.walkTokens=function(e,t){return $e.walkTokens(e,t)};P.parseInline=$e.parseInline;P.Parser=oe;P.parser=oe.parse;P.Renderer=xt;P.TextRenderer=On;P.Lexer=re;P.lexer=re.lex;P.Tokenizer=_t;P.Hooks=Ve;P.parse=P;P.options;P.setOptions;P.use;P.walkTokens;P.parseInline;oe.parse;re.lex;var Uf=E("<div>");const mr=e=>{const t=()=>e.content??"",n=pe(()=>P.parse(t(),{async:!1}));return(()=>{var r=Uf();return V(o=>{var s=`mmcp-markdown text-[15px] leading-relaxed ${e.class||""}`.trim(),i=n();return s!==o.e&&ue(r,o.e=s),i!==o.t&&(r.innerHTML=o.t=i),o},{e:void 0,t:void 0}),r})()};var Ff=E('<div class="w-full flex justify-start"><div class="px-1 sm:px-2 text-[13px] tracking-wide text-[var(--color-primary-highlight)]/80 animate-pulse">Thinking...'),Bf=E('<div class="w-full flex justify-start"><div class="w-full px-1 sm:px-2 text-[15px] text-[var(--color-primary-highlight)] text-left">'),Jf=E('<div class="mx-auto w-full max-w-3xl space-y-3">'),Vf=E('<div class="h-full flex flex-col bg-[var(--bg-primary)] font-sans"><div class="flex-1 relative overflow-hidden min-h-0"><div class="absolute inset-0 flex flex-col transition-all duration-200 ease-out"></div><div class="absolute left-0 right-0 transition-all duration-200 ease-out"><div class="p-8 flex justify-center w-full">'),Wf=E('<div class="mb-1 text-[10px] uppercase tracking-wide text-[var(--color-primary)]/70">'),qf=E('<div class="whitespace-pre-wrap break-words">'),Hf=E("<div><div>"),Gf=E('<div class="px-8 pb-4">');function Kf(){const e=()=>te.currentSessionId();let t,n=0;je(()=>{Bt.initHistoryLoading(),Jt.initialize()}),Se(()=>{Jt.cleanup()}),Ce(()=>{const i=e(),a=_.messages(),c=_.streamingContent(),l=_.pendingAction(),u=t;if(!u)return;const f=a.length,d=f>0;if(i&&d&&n===0){setTimeout(()=>{t&&(t.scrollTop=t.scrollHeight)},0);return}u.scrollHeight-u.clientHeight-u.scrollTop>48||((d||c||l)&&setTimeout(()=>{t&&(t.scrollTop=t.scrollHeight)},0),n=f)});const r=async i=>{await Bt.sendMessage(i)},o=async i=>{await Bt.resolveAction(i)},s=()=>{const i=e(),a=_.messages().length>0,c=!!_.streamingContent(),l=!!_.pendingAction();return!!i||a||c||l};return(()=>{var i=Vf(),a=i.firstChild,c=a.firstChild,l=c.nextSibling,u=l.firstChild;return S(c,C(po,{class:"flex-1 px-4 sm:px-8 pb-24 pt-6",ref:f=>t=f,get children(){var f=Jf();return S(f,C(Tr,{get each(){return _.messages()},children:d=>{const h=d.sender==="user",g=d.sender==="agent",m=!h&&!g;return(()=>{var y=Hf(),x=y.firstChild;return zt(z=>{d.handler==="system"&&d.isPersistent&&Jt.observeNotification(z,d.id)},y),ue(y,`w-full flex ${h?"justify-start md:justify-end":"justify-start"}`),Er(y,zr(()=>d.isPersistent?{"data-notification-id":d.id}:{}),!1),ue(x,h?"inline-block max-w-full md:max-w-[70%] rounded-2xl px-4 py-2 bg-[var(--bg-tertiary)] border border-[var(--border-secondary)] text-[var(--color-primary-highlight)] shadow-sm text-[15px] text-left":g?"w-full px-1 sm:px-2 text-[15px] text-[var(--color-primary)] text-left":"inline-block max-w-full rounded-md px-3 py-2 bg-[var(--bg-secondary)] border border-[var(--border-secondary)] text-[var(--color-primary)] text-xs text-left"),S(x,C(ce,{when:m,get children(){var z=Wf();return S(z,()=>d.sender.toUpperCase()),z}}),null),S(x,C(ce,{when:h,get fallback(){return C(mr,{get content(){return d.content},class:g?"mmcp-markdown":""})},get children(){var z=qf();return S(z,()=>d.content),z}}),null),y})()}}),null),S(f,C(ce,{get when(){return _.isThinking()},get children(){return Ff()}}),null),S(f,C(ce,{get when(){return _.streamingContent()},get children(){var d=Bf(),h=d.firstChild;return S(h,C(mr,{get content(){return _.streamingContent()||""}})),d}}),null),f}}),null),S(c,C(ce,{get when(){return _.pendingAction()},children:f=>(()=>{var d=Gf();return S(d,C(ef,{get toolName(){return f().tool_name||"unknown"},get toolArgs(){return f().tool_args||{}},get approvalId(){return f().approval_id||""},get explanation(){return f().explanation||"No explanation provided"},onResolve:o})),d})()}),null),S(u,C(nf,{onSend:r,get disabled(){return Ze.isBusy()||_.pendingAction()!==null}})),V(f=>{var d=s()?"1":"0",h=s()?"translateY(0)":"translateY(8px)",g=s()?"auto":"none",m=s()?"auto":"50%",y=s()?"0":"auto",x=s()?"translateY(0)":"translateY(-50%)";return d!==f.e&&ae(c,"opacity",f.e=d),h!==f.t&&ae(c,"transform",f.t=h),g!==f.a&&ae(c,"pointer-events",f.a=g),m!==f.o&&ae(l,"top",f.o=m),y!==f.i&&ae(l,"bottom",f.i=y),x!==f.n&&ae(l,"transform",f.n=x),f},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0}),i})()}const Yf=()=>C(qu,{get children(){return C(Kf,{})}}),Xf=document.getElementById("root");Xo(()=>C(Yf,{}),Xf);
